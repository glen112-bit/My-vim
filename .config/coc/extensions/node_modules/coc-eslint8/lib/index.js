var hs=Object.create,ln=Object.defineProperty,gs=Object.getPrototypeOf,ms=Object.prototype.hasOwnProperty,ys=Object.getOwnPropertyNames,vs=Object.getOwnPropertyDescriptor,ui=e=>ln(e,"__esModule",{value:!0}),k=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),di=(e,t)=>{ui(e);for(var r in t)ln(e,r,{get:t[r],enumerable:!0})},bs=(e,t,r)=>{if(ui(e),t&&typeof t=="object"||typeof t=="function")for(let n of ys(t))!ms.call(e,n)&&n!=="default"&&ln(e,n,{get:()=>t[n],enumerable:!(r=vs(t,n))||r.enumerable});return e},Ge=e=>e&&e.__esModule?e:bs(ln(e!=null?hs(gs(e)):{},"default",{value:e,enumerable:!0}),e),Ie=k(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var On;function jn(){if(On===void 0)throw new Error("No runtime abstraction layer installed");return On}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");On=r}e.install=t})(jn||(jn={}));Nn.default=jn}),Mn=k(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Disposable=void 0;var Rs;(function(e){function t(r){return{dispose:r}}e.create=t})(Rs=Lt.Disposable||(Lt.Disposable={}))}),fi=k(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.AbstractMessageBuffer=void 0;var ws=13,_s=10,Ps=`\r
`,li=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length!==0){let t=0,r=0,n=0,i=0;e:for(;r<this._chunks.length;){let v=this._chunks[r];n=0;t:for(;n<v.length;){switch(v[n]){case ws:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case _s:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}i+=v.byteLength,r++}if(t===4){let s=this._read(i+n),c=new Map,g=this.toString(s,"ascii").split(Ps);if(g.length<2)return c;for(let v=0;v<g.length-2;v++){let x=g[v],O=x.indexOf(":");if(O===-1)throw new Error("Message header must separate key and value using :");let F=x.substr(0,O),G=x.substr(O+1).trim();c.set(F,G)}return c}}}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(s)}if(this._chunks[0].byteLength>t){let s=this._chunks[0],c=this.asNative(s,t);return this._chunks[0]=s.slice(t),this._totalLength-=t,c}let r=this.allocNative(t),n=0,i=0;for(;t>0;){let s=this._chunks[i];if(s.byteLength>t){let c=s.slice(0,t);r.set(c,n),n+=t,this._chunks[i]=s.slice(t),this._totalLength-=t,t-=t}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,t-=s.byteLength}return r}};fn.AbstractMessageBuffer=li}),yi=k(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var xs=Ie(),pi=require("util"),ot=Mn(),Ts=fi(),Ft=class extends Ts.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return Ft.emptyBuffer}fromString(t,r){return Buffer.from(t,r)}toString(t,r){return t instanceof Buffer?t.toString(r):new pi.TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,r):Buffer.from(t,0,r)}allocNative(t){return Buffer.allocUnsafe(t)}};Ft.emptyBuffer=Buffer.allocUnsafe(0);var hi=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),ot.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),ot.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),ot.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),ot.Disposable.create(()=>this.stream.off("data",t))}},gi=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),ot.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),ot.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),ot.Disposable.create(()=>this.stream.off("end",t))}write(t,r){return new Promise((n,i)=>{let s=c=>{c==null?n():i(c)};typeof t=="string"?this.stream.write(t,r,s):this.stream.write(t,s)})}end(){this.stream.end()}},mi=Object.freeze({messageBuffer:Object.freeze({create:e=>new Ft(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new pi.TextDecoder(t.charset).decode(e)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:e=>new hi(e),asWritableStream:e=>new gi(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){return setTimeout(e,t,...r)},clearTimeout(e){clearTimeout(e)},setImmediate(e,...t){return setImmediate(e,...t)},clearImmediate(e){clearImmediate(e)}})});function Fn(){return mi}(function(e){function t(){xs.default.install(mi)}e.install=t})(Fn||(Fn={}));Ln.default=Fn}),mt=k(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.stringArray=ue.array=ue.func=ue.error=ue.number=ue.string=ue.boolean=void 0;function Cs(e){return e===!0||e===!1}ue.boolean=Cs;function vi(e){return typeof e=="string"||e instanceof String}ue.string=vi;function ks(e){return typeof e=="number"||e instanceof Number}ue.number=ks;function qs(e){return e instanceof Error}ue.error=qs;function Ss(e){return typeof e=="function"}ue.func=Ss;function bi(e){return Array.isArray(e)}ue.array=bi;function Es(e){return bi(e)&&e.every(t=>vi(t))}ue.stringArray=Es}),An=k(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.isResponseMessage=y.isNotificationMessage=y.isRequestMessage=y.NotificationType9=y.NotificationType8=y.NotificationType7=y.NotificationType6=y.NotificationType5=y.NotificationType4=y.NotificationType3=y.NotificationType2=y.NotificationType1=y.NotificationType0=y.NotificationType=y.RequestType9=y.RequestType8=y.RequestType7=y.RequestType6=y.RequestType5=y.RequestType4=y.RequestType3=y.RequestType2=y.RequestType1=y.RequestType=y.RequestType0=y.AbstractMessageSignature=y.ParameterStructures=y.ResponseError=y.ErrorCodes=void 0;var st=mt(),Ri;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=e.jsonrpcReservedErrorRangeStart,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=e.jsonrpcReservedErrorRangeEnd})(Ri=y.ErrorCodes||(y.ErrorCodes={}));var pn=class extends Error{constructor(t,r,n){super(r);this.code=st.number(t)?t:Ri.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,pn.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};y.ResponseError=pn;var se=class{constructor(t){this.kind=t}static is(t){return t===se.auto||t===se.byName||t===se.byPosition}toString(){return this.kind}};y.ParameterStructures=se;se.auto=new se("auto");se.byPosition=new se("byPosition");se.byName=new se("byName");var A=class{constructor(t,r){this.method=t,this.numberOfParams=r}get parameterStructures(){return se.auto}};y.AbstractMessageSignature=A;var wi=class extends A{constructor(t){super(t,0)}};y.RequestType0=wi;var _i=class extends A{constructor(t,r=se.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};y.RequestType=_i;var Pi=class extends A{constructor(t,r=se.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};y.RequestType1=Pi;var xi=class extends A{constructor(t){super(t,2)}};y.RequestType2=xi;var Ti=class extends A{constructor(t){super(t,3)}};y.RequestType3=Ti;var Ci=class extends A{constructor(t){super(t,4)}};y.RequestType4=Ci;var ki=class extends A{constructor(t){super(t,5)}};y.RequestType5=ki;var qi=class extends A{constructor(t){super(t,6)}};y.RequestType6=qi;var Si=class extends A{constructor(t){super(t,7)}};y.RequestType7=Si;var Ei=class extends A{constructor(t){super(t,8)}};y.RequestType8=Ei;var Di=class extends A{constructor(t){super(t,9)}};y.RequestType9=Di;var Ni=class extends A{constructor(t,r=se.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};y.NotificationType=Ni;var Oi=class extends A{constructor(t){super(t,0)}};y.NotificationType0=Oi;var ji=class extends A{constructor(t,r=se.auto){super(t,1);this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};y.NotificationType1=ji;var Mi=class extends A{constructor(t){super(t,2)}};y.NotificationType2=Mi;var Li=class extends A{constructor(t){super(t,3)}};y.NotificationType3=Li;var Fi=class extends A{constructor(t){super(t,4)}};y.NotificationType4=Fi;var Ai=class extends A{constructor(t){super(t,5)}};y.NotificationType5=Ai;var Ii=class extends A{constructor(t){super(t,6)}};y.NotificationType6=Ii;var Wi=class extends A{constructor(t){super(t,7)}};y.NotificationType7=Wi;var $i=class extends A{constructor(t){super(t,8)}};y.NotificationType8=$i;var zi=class extends A{constructor(t){super(t,9)}};y.NotificationType9=zi;function Ds(e){let t=e;return t&&st.string(t.method)&&(st.string(t.id)||st.number(t.id))}y.isRequestMessage=Ds;function Ns(e){let t=e;return t&&st.string(t.method)&&e.id===void 0}y.isNotificationMessage=Ns;function Os(e){let t=e;return t&&(t.result!==void 0||!!t.error)&&(st.string(t.id)||st.number(t.id)||t.id===null)}y.isResponseMessage=Os}),yt=k(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.Emitter=at.Event=void 0;var js=Ie(),Ms;(function(e){let t={dispose(){}};e.None=function(){return t}})(Ms=at.Event||(at.Event={}));var Bi=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)})}remove(t,r=null){if(!!this._callbacks){let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===t)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...t){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,c=n.length;s<c;s++)try{r.push(n[s].apply(i[s],t))}catch(g){js.default().console.error(g)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},At=class{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new Bi),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(t,r),i.dispose=At._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};at.Emitter=At;At._noop=function(){}}),zn=k(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.CancellationTokenSource=ct.CancellationToken=void 0;var Hi=Ie(),Ls=mt(),In=yt(),Wn;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:In.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:In.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||Ls.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t})(Wn=ct.CancellationToken||(ct.CancellationToken={}));var Fs=Object.freeze(function(e,t){let r=Hi.default().timer.setTimeout(e.bind(t),0);return{dispose(){Hi.default().timer.clearTimeout(r)}}}),$n=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Fs:(this._emitter||(this._emitter=new In.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ui=class{get token(){return this._token||(this._token=new $n),this._token}cancel(){this._token?this._token.cancel():this._token=Wn.Cancelled}dispose(){this._token?this._token instanceof $n&&this._token.dispose():this._token=Wn.None}};ct.CancellationTokenSource=Ui}),Ji=k(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.ReadableStreamMessageReader=We.AbstractMessageReader=We.MessageReader=void 0;var hn=Ie(),vt=mt(),Bn=yt(),As;(function(e){function t(r){let n=r;return n&&vt.func(n.listen)&&vt.func(n.dispose)&&vt.func(n.onError)&&vt.func(n.onClose)&&vt.func(n.onPartialMessage)}e.is=t})(As=We.MessageReader||(We.MessageReader={}));var Hn=class{constructor(){this.errorEmitter=new Bn.Emitter,this.closeEmitter=new Bn.Emitter,this.partialMessageEmitter=new Bn.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${vt.string(t.message)?t.message:"unknown"}`)}};We.AbstractMessageReader=Hn;var Un;(function(e){function t(r){var n;let i,s,c,g=new Map,v,x=new Map;if(r===void 0||typeof r=="string")i=r!=null?r:"utf-8";else{if(i=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(c=r.contentDecoder,g.set(c.name,c)),r.contentDecoders!==void 0)for(let O of r.contentDecoders)g.set(O.name,O);if(r.contentTypeDecoder!==void 0&&(v=r.contentTypeDecoder,x.set(v.name,v)),r.contentTypeDecoders!==void 0)for(let O of r.contentTypeDecoders)x.set(O.name,O)}return v===void 0&&(v=hn.default().applicationJson.decoder,x.set(v.name,v)),{charset:i,contentDecoder:c,contentDecoders:g,contentTypeDecoder:v,contentTypeDecoders:x}}e.fromOptions=t})(Un||(Un={}));var Vi=class extends Hn{constructor(t,r){super();this.readable=t,this.options=Un.fromOptions(r),this.buffer=hn.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let c=parseInt(s);if(isNaN(c))throw new Error("Content-Length value must be a number.");this.nextMessageLength=c}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(hn.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){(this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0))&&(this.partialMessageTimer=hn.default().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};We.ReadableStreamMessageReader=Vi}),Xi=k(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.Semaphore=void 0;var Is=Ie(),Qi=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||Is.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(!(this._waiting.length===0||this._active===this._capacity)){let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext()},n=>{this._active--,t.reject(n),this.runNext()}):(this._active--,t.resolve(r),this.runNext())}catch(r){this._active--,t.reject(r),this.runNext()}}}};gn.Semaphore=Qi}),eo=k($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.WriteableStreamMessageWriter=$e.AbstractMessageWriter=$e.MessageWriter=void 0;var Gi=Ie(),It=mt(),Ws=Xi(),Yi=yt(),$s="Content-Length: ",Zi=`\r
`,zs;(function(e){function t(r){let n=r;return n&&It.func(n.dispose)&&It.func(n.onClose)&&It.func(n.onError)&&It.func(n.write)}e.is=t})(zs=$e.MessageWriter||($e.MessageWriter={}));var Vn=class{constructor(){this.errorEmitter=new Yi.Emitter,this.closeEmitter=new Yi.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${It.string(t.message)?t.message:"unknown"}`)}};$e.AbstractMessageWriter=Vn;var Jn;(function(e){function t(r){var n,i;return r===void 0||typeof r=="string"?{charset:r!=null?r:"utf-8",contentTypeEncoder:Gi.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(i=r.contentTypeEncoder)!==null&&i!==void 0?i:Gi.default().applicationJson.encoder}}e.fromOptions=t})(Jn||(Jn={}));var Ki=class extends Vn{constructor(t,r){super();this.writable=t,this.options=Jn.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Ws.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push($s,n.byteLength.toString(),Zi),i.push(Zi),this.doWrite(t,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){this.writable.end()}};$e.WriteableStreamMessageWriter=Ki}),no=k(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.LRUCache=ze.LinkedMap=ze.Touch=void 0;var ge;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(ge=ze.Touch||(ze.Touch={}));var Qn=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)===null||t===void 0?void 0:t.value}get last(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value}has(t){return this._map.has(t)}get(t,r=ge.None){let n=this._map.get(t);if(!!n)return r!==ge.None&&this.touch(n,r),n.value}set(t,r,n=ge.None){let i=this._map.get(t);if(i)i.value=r,n!==ge.None&&this.touch(i,n);else{i={key:t,value:r,next:void 0,previous:void 0};switch(n){case ge.None:this.addItemLast(i);break;case ge.First:this.addItemFirst(i);break;case ge.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let r=this._map.get(t);if(!!r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!(!this._head&&!this._tail)){if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}}forEach(t,r){let n=this._state,i=this._head;for(;i;){if(r?t.bind(r)(i.value,i.key,this):t(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}values(){let t=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}entries(){let t=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(t){if(!(t>=this.size)){if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}t.next=void 0,t.previous=void 0,this._state++}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==ge.First&&r!==ge.Last)){if(r===ge.First){if(t===this._head)return;let n=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(r===ge.Last){if(t===this._tail)return;let n=t.next,i=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r])}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n)}};ze.LinkedMap=Qn;var to=class extends Qn{constructor(t,r=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,r=ge.AsNew){return super.get(t,r)}peek(t){return super.get(t,ge.None)}set(t,r){return super.set(t,r,ge.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};ze.LRUCache=to}),co=k(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.createMessageConnection=_.ConnectionOptions=_.CancellationStrategy=_.CancellationSenderStrategy=_.CancellationReceiverStrategy=_.ConnectionStrategy=_.ConnectionError=_.ConnectionErrors=_.LogTraceNotification=_.SetTraceNotification=_.TraceFormat=_.Trace=_.NullLogger=_.ProgressType=void 0;var ro=Ie(),K=mt(),R=An(),io=no(),Wt=yt(),Xn=zn(),$t;(function(e){e.type=new R.NotificationType("$/cancelRequest")})($t||($t={}));var mn;(function(e){e.type=new R.NotificationType("$/progress")})(mn||(mn={}));var oo=class{constructor(){}};_.ProgressType=oo;var Gn;(function(e){function t(r){return K.func(r)}e.is=t})(Gn||(Gn={}));_.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var H;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"})(H=_.Trace||(_.Trace={}));(function(e){function t(n){if(!K.string(n))return e.Off;n=n.toLowerCase();switch(n){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}e.toString=r})(H=_.Trace||(_.Trace={}));var Ce;(function(e){e.Text="text",e.JSON="json"})(Ce=_.TraceFormat||(_.TraceFormat={}));(function(e){function t(r){return r=r.toLowerCase(),r==="json"?e.JSON:e.Text}e.fromString=t})(Ce=_.TraceFormat||(_.TraceFormat={}));var so;(function(e){e.type=new R.NotificationType("$/setTrace")})(so=_.SetTraceNotification||(_.SetTraceNotification={}));var Yn;(function(e){e.type=new R.NotificationType("$/logTrace")})(Yn=_.LogTraceNotification||(_.LogTraceNotification={}));var yn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(yn=_.ConnectionErrors||(_.ConnectionErrors={}));var ut=class extends Error{constructor(t,r){super(r);this.code=t,Object.setPrototypeOf(this,ut.prototype)}};_.ConnectionError=ut;var ao;(function(e){function t(r){let n=r;return n&&K.func(n.cancelUndispatched)}e.is=t})(ao=_.ConnectionStrategy||(_.ConnectionStrategy={}));var Zn;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new Xn.CancellationTokenSource}});function t(r){let n=r;return n&&K.func(n.createCancellationTokenSource)}e.is=t})(Zn=_.CancellationReceiverStrategy||(_.CancellationReceiverStrategy={}));var Kn;(function(e){e.Message=Object.freeze({sendCancellation(r,n){r.sendNotification($t.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&K.func(n.sendCancellation)&&K.func(n.cleanup)}e.is=t})(Kn=_.CancellationSenderStrategy||(_.CancellationSenderStrategy={}));var er;(function(e){e.Message=Object.freeze({receiver:Zn.Message,sender:Kn.Message});function t(r){let n=r;return n&&Zn.is(n.receiver)&&Kn.is(n.sender)}e.is=t})(er=_.CancellationStrategy||(_.CancellationStrategy={}));var Bs;(function(e){function t(r){let n=r;return n&&(er.is(n.cancellationStrategy)||ao.is(n.connectionStrategy))}e.is=t})(Bs=_.ConnectionOptions||(_.ConnectionOptions={}));var ke;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(ke||(ke={}));function Hs(e,t,r,n){let i=r!==void 0?r:_.NullLogger,s=0,c=0,g=0,v="2.0",x,O=Object.create(null),F,G=Object.create(null),P=new Map,ye,le=new io.LinkedMap,V=Object.create(null),Pe=Object.create(null),J=H.Off,xe=Ce.Text,W,Ne=ke.New,Nt=new Wt.Emitter,ve=new Wt.Emitter,rn=new Wt.Emitter,on=new Wt.Emitter,C=new Wt.Emitter,nt=n&&n.cancellationStrategy?n.cancellationStrategy:er.Message;function Ot(a){if(a===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+a.toString()}function sn(a){return a===null?"res-unknown-"+(++g).toString():"res-"+a.toString()}function an(){return"not-"+(++c).toString()}function cn(a,d){R.isRequestMessage(d)?a.set(Ot(d.id),d):R.isResponseMessage(d)?a.set(sn(d.id),d):a.set(an(),d)}function f(a){}function m(){return Ne===ke.Listening}function w(){return Ne===ke.Closed}function q(){return Ne===ke.Disposed}function B(){(Ne===ke.New||Ne===ke.Listening)&&(Ne=ke.Closed,ve.fire(void 0))}function fe(a){Nt.fire([a,void 0,void 0])}function Ae(a){Nt.fire(a)}e.onClose(B),e.onError(fe),t.onClose(B),t.onError(Ae);function M(){ye||le.size===0||(ye=ro.default().timer.setImmediate(()=>{ye=void 0,Te()}))}function Te(){if(le.size!==0){let a=le.shift();try{R.isRequestMessage(a)?he(a):R.isNotificationMessage(a)?Oe(a):R.isResponseMessage(a)?un(a):ht(a)}finally{M()}}}let pe=a=>{try{if(R.isNotificationMessage(a)&&a.method===$t.type.method){let d=Ot(a.params.id),h=le.get(d);if(R.isRequestMessage(h)){let b=n==null?void 0:n.connectionStrategy,S=b&&b.cancelUndispatched?b.cancelUndispatched(h,f):f(h);if(S&&(S.error!==void 0||S.result!==void 0)){le.delete(d),S.id=h.id,oe(S,a.method,Date.now()),t.write(S);return}}}cn(le,a)}finally{M()}};function he(a){if(!q()){function d(D,z,N){let X={jsonrpc:v,id:a.id};D instanceof R.ResponseError?X.error=D.toJson():X.result=D===void 0?null:D,oe(X,z,N),t.write(X)}function h(D,z,N){let X={jsonrpc:v,id:a.id,error:D.toJson()};oe(X,z,N),t.write(X)}function b(D,z,N){D===void 0&&(D=null);let X={jsonrpc:v,id:a.id,result:D};oe(X,z,N),t.write(X)}rt(a);let S=O[a.method],$,Q;S&&($=S.type,Q=S.handler);let Z=Date.now();if(Q||x){let D=String(a.id),z=nt.receiver.createCancellationTokenSource(D);Pe[D]=z;try{let N;if(Q)if(a.params===void 0){if($!==void 0&&$.numberOfParams!==0){h(new R.ResponseError(R.ErrorCodes.InvalidParams,`Request ${a.method} defines ${$.numberOfParams} params but recevied none.`),a.method,Z);return}N=Q(z.token)}else if(Array.isArray(a.params)){if($!==void 0&&$.parameterStructures===R.ParameterStructures.byName){h(new R.ResponseError(R.ErrorCodes.InvalidParams,`Request ${a.method} defines parameters by name but received parameters by position`),a.method,Z);return}N=Q(...a.params,z.token)}else{if($!==void 0&&$.parameterStructures===R.ParameterStructures.byPosition){h(new R.ResponseError(R.ErrorCodes.InvalidParams,`Request ${a.method} defines parameters by position but received parameters by name`),a.method,Z);return}N=Q(a.params,z.token)}else x&&(N=x(a.method,a.params,z.token));let X=N;N?X.then?X.then(be=>{delete Pe[D],d(be,a.method,Z)},be=>{delete Pe[D],be instanceof R.ResponseError?h(be,a.method,Z):be&&K.string(be.message)?h(new R.ResponseError(R.ErrorCodes.InternalError,`Request ${a.method} failed with message: ${be.message}`),a.method,Z):h(new R.ResponseError(R.ErrorCodes.InternalError,`Request ${a.method} failed unexpectedly without providing any details.`),a.method,Z)}):(delete Pe[D],d(N,a.method,Z)):(delete Pe[D],b(N,a.method,Z))}catch(N){delete Pe[D],N instanceof R.ResponseError?d(N,a.method,Z):N&&K.string(N.message)?h(new R.ResponseError(R.ErrorCodes.InternalError,`Request ${a.method} failed with message: ${N.message}`),a.method,Z):h(new R.ResponseError(R.ErrorCodes.InternalError,`Request ${a.method} failed unexpectedly without providing any details.`),a.method,Z)}}else h(new R.ResponseError(R.ErrorCodes.MethodNotFound,`Unhandled method ${a.method}`),a.method,Z)}}function un(a){if(!q())if(a.id===null)a.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(a.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let d=String(a.id),h=V[d];if(dn(a,h),h){delete V[d];try{if(a.error){let b=a.error;h.reject(new R.ResponseError(b.code,b.message,b.data))}else if(a.result!==void 0)h.resolve(a.result);else throw new Error("Should never happen.")}catch(b){b.message?i.error(`Response handler '${h.method}' failed with message: ${b.message}`):i.error(`Response handler '${h.method}' failed unexpectedly.`)}}}}function Oe(a){if(!q()){let d,h;if(a.method===$t.type.method)h=b=>{let S=b.id,$=Pe[String(S)];$&&$.cancel()};else{let b=G[a.method];b&&(h=b.handler,d=b.type)}if(h||F)try{Je(a),h?a.params===void 0?(d!==void 0&&(d.numberOfParams!==0&&d.parameterStructures!==R.ParameterStructures.byName&&i.error(`Notification ${a.method} defines ${d.numberOfParams} params but recevied none.`)),h()):Array.isArray(a.params)?(d!==void 0&&(d.parameterStructures===R.ParameterStructures.byName&&i.error(`Notification ${a.method} defines parameters by name but received parameters by position`),d.numberOfParams!==a.params.length&&i.error(`Notification ${a.method} defines ${d.numberOfParams} params but received ${a.params.length} argumennts`)),h(...a.params)):(d!==void 0&&d.parameterStructures===R.ParameterStructures.byPosition&&i.error(`Notification ${a.method} defines parameters by position but received parameters by name`),h(a.params)):F&&F(a.method,a.params)}catch(b){b.message?i.error(`Notification handler '${a.method}' failed with message: ${b.message}`):i.error(`Notification handler '${a.method}' failed unexpectedly.`)}else rn.fire(a)}}function ht(a){if(!a){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(a,null,4)}`);let d=a;if(K.string(d.id)||K.number(d.id)){let h=String(d.id),b=V[h];b&&b.reject(new Error("The received response has neither a result nor an error property."))}}function ie(a){if(!(J===H.Off||!W))if(xe===Ce.Text){let d;J===H.Verbose&&a.params&&(d=`Params: ${JSON.stringify(a.params,null,4)}

`),W.log(`Sending request '${a.method} - (${a.id})'.`,d)}else je("send-request",a)}function Y(a){if(!(J===H.Off||!W))if(xe===Ce.Text){let d;J===H.Verbose&&(a.params?d=`Params: ${JSON.stringify(a.params,null,4)}

`:d=`No parameters provided.

`),W.log(`Sending notification '${a.method}'.`,d)}else je("send-notification",a)}function oe(a,d,h){if(!(J===H.Off||!W))if(xe===Ce.Text){let b;J===H.Verbose&&(a.error&&a.error.data?b=`Error data: ${JSON.stringify(a.error.data,null,4)}

`:a.result?b=`Result: ${JSON.stringify(a.result,null,4)}

`:a.error===void 0&&(b=`No result returned.

`)),W.log(`Sending response '${d} - (${a.id})'. Processing request took ${Date.now()-h}ms`,b)}else je("send-response",a)}function rt(a){if(!(J===H.Off||!W))if(xe===Ce.Text){let d;J===H.Verbose&&a.params&&(d=`Params: ${JSON.stringify(a.params,null,4)}

`),W.log(`Received request '${a.method} - (${a.id})'.`,d)}else je("receive-request",a)}function Je(a){if(!(J===H.Off||!W||a.method===Yn.type.method))if(xe===Ce.Text){let d;J===H.Verbose&&(a.params?d=`Params: ${JSON.stringify(a.params,null,4)}

`:d=`No parameters provided.

`),W.log(`Received notification '${a.method}'.`,d)}else je("receive-notification",a)}function dn(a,d){if(!(J===H.Off||!W))if(xe===Ce.Text){let h;if(J===H.Verbose&&(a.error&&a.error.data?h=`Error data: ${JSON.stringify(a.error.data,null,4)}

`:a.result?h=`Result: ${JSON.stringify(a.result,null,4)}

`:a.error===void 0&&(h=`No result returned.

`)),d){let b=a.error?` Request failed: ${a.error.message} (${a.error.code}).`:"";W.log(`Received response '${d.method} - (${a.id})' in ${Date.now()-d.timerStart}ms.${b}`,h)}else W.log(`Received response ${a.id} without active response promise.`,h)}else je("receive-response",a)}function je(a,d){if(!(!W||J===H.Off)){let h={isLSPMessage:!0,type:a,message:d,timestamp:Date.now()};W.log(h)}}function Qe(){if(w())throw new ut(yn.Closed,"Connection is closed.");if(q())throw new ut(yn.Disposed,"Connection is disposed.")}function jt(){if(m())throw new ut(yn.AlreadyListening,"Connection is already listening")}function ps(){if(!m())throw new Error("Call listen() first.")}function Mt(a){return a===void 0?null:a}function si(a){if(a!==null)return a}function ai(a){return a!=null&&!Array.isArray(a)&&typeof a=="object"}function Dn(a,d){switch(a){case R.ParameterStructures.auto:if(ai(d))return si(d);return[Mt(d)];break;case R.ParameterStructures.byName:if(!ai(d))throw new Error("Recevied parameters by name but param is not an object literal.");return si(d);case R.ParameterStructures.byPosition:return[Mt(d)];default:throw new Error(`Unknown parameter structure ${a.toString()}`)}}function ci(a,d){let h,b=a.numberOfParams;switch(b){case 0:h=void 0;break;case 1:h=Dn(a.parameterStructures,d[0]);break;default:h=[];for(let S=0;S<d.length&&S<b;S++)h.push(Mt(d[S]));if(d.length<b)for(let S=d.length;S<b;S++)h.push(null);break}return h}let gt={sendNotification:(a,...d)=>{Qe();let h,b;if(K.string(a)){h=a;let $=d[0],Q=0,Z=R.ParameterStructures.auto;R.ParameterStructures.is($)&&(Q=1,Z=$);let D=d.length,z=D-Q;switch(z){case 0:b=void 0;break;case 1:b=Dn(Z,d[Q]);break;default:if(Z===R.ParameterStructures.byName)throw new Error(`Recevied ${z} parameters for 'by Name' notification parameter structure.`);b=d.slice(Q,D).map(N=>Mt(N));break}}else{let $=d;h=a.method,b=ci(a,$)}let S={jsonrpc:v,method:h,params:b};Y(S),t.write(S)},onNotification:(a,d)=>{Qe();let h;return K.func(a)?F=a:d&&(K.string(a)?(h=a,G[a]={type:void 0,handler:d}):(h=a.method,G[a.method]={type:a,handler:d})),{dispose:()=>{h!==void 0?delete G[h]:F=void 0}}},onProgress:(a,d,h)=>{if(P.has(d))throw new Error(`Progress handler for token ${d} already registered`);return P.set(d,h),{dispose:()=>{P.delete(d)}}},sendProgress:(a,d,h)=>{gt.sendNotification(mn.type,{token:d,value:h})},onUnhandledProgress:on.event,sendRequest:(a,...d)=>{Qe(),ps();let h,b,S;if(K.string(a)){h=a;let D=d[0],z=d[d.length-1],N=0,X=R.ParameterStructures.auto;R.ParameterStructures.is(D)&&(N=1,X=D);let be=d.length;Xn.CancellationToken.is(z)&&(be=be-1,S=z);let it=be-N;switch(it){case 0:b=void 0;break;case 1:b=Dn(X,d[N]);break;default:if(X===R.ParameterStructures.byName)throw new Error(`Recevied ${it} parameters for 'by Name' request parameter structure.`);b=d.slice(N,be).map(Xe=>Mt(Xe));break}}else{let D=d;h=a.method,b=ci(a,D);let z=a.numberOfParams;S=Xn.CancellationToken.is(D[z])?D[z]:void 0}let $=s++,Q;return S&&(Q=S.onCancellationRequested(()=>{nt.sender.sendCancellation(gt,$)})),new Promise((D,z)=>{let N={jsonrpc:v,id:$,method:h,params:b},X=Xe=>{D(Xe),nt.sender.cleanup($),Q==null||Q.dispose()},be=Xe=>{z(Xe),nt.sender.cleanup($),Q==null||Q.dispose()},it={method:h,timerStart:Date.now(),resolve:X,reject:be};ie(N);try{t.write(N)}catch(Xe){it.reject(new R.ResponseError(R.ErrorCodes.MessageWriteError,Xe.message?Xe.message:"Unknown reason")),it=null}it&&(V[String($)]=it)})},onRequest:(a,d)=>{Qe();let h=null;return Gn.is(a)?(h=void 0,x=a):K.string(a)?(h=null,d!==void 0&&(h=a,O[a]={handler:d,type:void 0})):d!==void 0&&(h=a.method,O[a.method]={type:a,handler:d}),{dispose:()=>{h!==null&&(h!==void 0?delete O[h]:x=void 0)}}},trace:(a,d,h)=>{let b=!1,S=Ce.Text;h!==void 0&&(K.boolean(h)?b=h:(b=h.sendNotification||!1,S=h.traceFormat||Ce.Text)),J=a,xe=S,J===H.Off?W=void 0:W=d,b&&!w()&&!q()&&gt.sendNotification(so.type,{value:H.toString(a)})},onError:Nt.event,onClose:ve.event,onUnhandledNotification:rn.event,onDispose:C.event,end:()=>{t.end()},dispose:()=>{if(!q()){Ne=ke.Disposed,C.fire(void 0);let a=new Error("Connection got disposed.");Object.keys(V).forEach(d=>{V[d].reject(a)}),V=Object.create(null),Pe=Object.create(null),le=new io.LinkedMap,K.func(t.dispose)&&t.dispose(),K.func(e.dispose)&&e.dispose()}},listen:()=>{Qe(),jt(),Ne=ke.Listening,e.listen(pe)},inspect:()=>{ro.default().console.log("inspect")}};return gt.onNotification(Yn.type,a=>{J===H.Off||!W||W.log(a.message,J===H.Verbose?a.verbose:void 0)}),gt.onNotification(mn.type,a=>{let d=P.get(a.token);d?d(a.value):on.fire(a)}),gt}_.createMessageConnection=Hs}),rr=k(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.CancellationSenderStrategy=l.CancellationReceiverStrategy=l.ConnectionError=l.ConnectionErrors=l.LogTraceNotification=l.SetTraceNotification=l.TraceFormat=l.Trace=l.ProgressType=l.createMessageConnection=l.NullLogger=l.ConnectionOptions=l.ConnectionStrategy=l.WriteableStreamMessageWriter=l.AbstractMessageWriter=l.MessageWriter=l.ReadableStreamMessageReader=l.AbstractMessageReader=l.MessageReader=l.CancellationToken=l.CancellationTokenSource=l.Emitter=l.Event=l.Disposable=l.ParameterStructures=l.NotificationType9=l.NotificationType8=l.NotificationType7=l.NotificationType6=l.NotificationType5=l.NotificationType4=l.NotificationType3=l.NotificationType2=l.NotificationType1=l.NotificationType0=l.NotificationType=l.ErrorCodes=l.ResponseError=l.RequestType9=l.RequestType8=l.RequestType7=l.RequestType6=l.RequestType5=l.RequestType4=l.RequestType3=l.RequestType2=l.RequestType1=l.RequestType0=l.RequestType=l.RAL=void 0;l.CancellationStrategy=void 0;var L=An();Object.defineProperty(l,"RequestType",{enumerable:!0,get:function(){return L.RequestType}});Object.defineProperty(l,"RequestType0",{enumerable:!0,get:function(){return L.RequestType0}});Object.defineProperty(l,"RequestType1",{enumerable:!0,get:function(){return L.RequestType1}});Object.defineProperty(l,"RequestType2",{enumerable:!0,get:function(){return L.RequestType2}});Object.defineProperty(l,"RequestType3",{enumerable:!0,get:function(){return L.RequestType3}});Object.defineProperty(l,"RequestType4",{enumerable:!0,get:function(){return L.RequestType4}});Object.defineProperty(l,"RequestType5",{enumerable:!0,get:function(){return L.RequestType5}});Object.defineProperty(l,"RequestType6",{enumerable:!0,get:function(){return L.RequestType6}});Object.defineProperty(l,"RequestType7",{enumerable:!0,get:function(){return L.RequestType7}});Object.defineProperty(l,"RequestType8",{enumerable:!0,get:function(){return L.RequestType8}});Object.defineProperty(l,"RequestType9",{enumerable:!0,get:function(){return L.RequestType9}});Object.defineProperty(l,"ResponseError",{enumerable:!0,get:function(){return L.ResponseError}});Object.defineProperty(l,"ErrorCodes",{enumerable:!0,get:function(){return L.ErrorCodes}});Object.defineProperty(l,"NotificationType",{enumerable:!0,get:function(){return L.NotificationType}});Object.defineProperty(l,"NotificationType0",{enumerable:!0,get:function(){return L.NotificationType0}});Object.defineProperty(l,"NotificationType1",{enumerable:!0,get:function(){return L.NotificationType1}});Object.defineProperty(l,"NotificationType2",{enumerable:!0,get:function(){return L.NotificationType2}});Object.defineProperty(l,"NotificationType3",{enumerable:!0,get:function(){return L.NotificationType3}});Object.defineProperty(l,"NotificationType4",{enumerable:!0,get:function(){return L.NotificationType4}});Object.defineProperty(l,"NotificationType5",{enumerable:!0,get:function(){return L.NotificationType5}});Object.defineProperty(l,"NotificationType6",{enumerable:!0,get:function(){return L.NotificationType6}});Object.defineProperty(l,"NotificationType7",{enumerable:!0,get:function(){return L.NotificationType7}});Object.defineProperty(l,"NotificationType8",{enumerable:!0,get:function(){return L.NotificationType8}});Object.defineProperty(l,"NotificationType9",{enumerable:!0,get:function(){return L.NotificationType9}});Object.defineProperty(l,"ParameterStructures",{enumerable:!0,get:function(){return L.ParameterStructures}});var Us=Mn();Object.defineProperty(l,"Disposable",{enumerable:!0,get:function(){return Us.Disposable}});var uo=yt();Object.defineProperty(l,"Event",{enumerable:!0,get:function(){return uo.Event}});Object.defineProperty(l,"Emitter",{enumerable:!0,get:function(){return uo.Emitter}});var lo=zn();Object.defineProperty(l,"CancellationTokenSource",{enumerable:!0,get:function(){return lo.CancellationTokenSource}});Object.defineProperty(l,"CancellationToken",{enumerable:!0,get:function(){return lo.CancellationToken}});var tr=Ji();Object.defineProperty(l,"MessageReader",{enumerable:!0,get:function(){return tr.MessageReader}});Object.defineProperty(l,"AbstractMessageReader",{enumerable:!0,get:function(){return tr.AbstractMessageReader}});Object.defineProperty(l,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return tr.ReadableStreamMessageReader}});var nr=eo();Object.defineProperty(l,"MessageWriter",{enumerable:!0,get:function(){return nr.MessageWriter}});Object.defineProperty(l,"AbstractMessageWriter",{enumerable:!0,get:function(){return nr.AbstractMessageWriter}});Object.defineProperty(l,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return nr.WriteableStreamMessageWriter}});var Re=co();Object.defineProperty(l,"ConnectionStrategy",{enumerable:!0,get:function(){return Re.ConnectionStrategy}});Object.defineProperty(l,"ConnectionOptions",{enumerable:!0,get:function(){return Re.ConnectionOptions}});Object.defineProperty(l,"NullLogger",{enumerable:!0,get:function(){return Re.NullLogger}});Object.defineProperty(l,"createMessageConnection",{enumerable:!0,get:function(){return Re.createMessageConnection}});Object.defineProperty(l,"ProgressType",{enumerable:!0,get:function(){return Re.ProgressType}});Object.defineProperty(l,"Trace",{enumerable:!0,get:function(){return Re.Trace}});Object.defineProperty(l,"TraceFormat",{enumerable:!0,get:function(){return Re.TraceFormat}});Object.defineProperty(l,"SetTraceNotification",{enumerable:!0,get:function(){return Re.SetTraceNotification}});Object.defineProperty(l,"LogTraceNotification",{enumerable:!0,get:function(){return Re.LogTraceNotification}});Object.defineProperty(l,"ConnectionErrors",{enumerable:!0,get:function(){return Re.ConnectionErrors}});Object.defineProperty(l,"ConnectionError",{enumerable:!0,get:function(){return Re.ConnectionError}});Object.defineProperty(l,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Re.CancellationReceiverStrategy}});Object.defineProperty(l,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Re.CancellationSenderStrategy}});Object.defineProperty(l,"CancellationStrategy",{enumerable:!0,get:function(){return Re.CancellationStrategy}});var Vs=Ie();l.RAL=Vs.default}),_t=k(E=>{"use strict";var Js=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Qs=E&&E.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Js(t,e,r)};Object.defineProperty(E,"__esModule",{value:!0});E.createMessageConnection=E.createServerSocketTransport=E.createClientSocketTransport=E.createServerPipeTransport=E.createClientPipeTransport=E.generateRandomPipeName=E.StreamMessageWriter=E.StreamMessageReader=E.SocketMessageWriter=E.SocketMessageReader=E.IPCMessageWriter=E.IPCMessageReader=void 0;var bt=yi();bt.default.install();var Me=rr(),fo=require("path"),Xs=require("os"),Gs=require("crypto"),vn=require("net");Qs(rr(),E);var po=class extends Me.AbstractMessageReader{constructor(t){super();this.process=t;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Me.Disposable.create(()=>this.process.off("message",t))}};E.IPCMessageReader=po;var ho=class extends Me.AbstractMessageWriter{constructor(t){super();this.process=t,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,t)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){}};E.IPCMessageWriter=ho;var Rt=class extends Me.ReadableStreamMessageReader{constructor(t,r="utf-8"){super(bt.default().stream.asReadableStream(t),r)}};E.SocketMessageReader=Rt;var wt=class extends Me.WriteableStreamMessageWriter{constructor(t,r){super(bt.default().stream.asWritableStream(t),r);this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};E.SocketMessageWriter=wt;var ir=class extends Me.ReadableStreamMessageReader{constructor(t,r){super(bt.default().stream.asReadableStream(t),r)}};E.StreamMessageReader=ir;var or=class extends Me.WriteableStreamMessageWriter{constructor(t,r){super(bt.default().stream.asWritableStream(t),r)}};E.StreamMessageWriter=or;var go=process.env.XDG_RUNTIME_DIR,Ys=new Map([["linux",107],["darwin",103]]);function Zs(){let e=Gs.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;go?t=fo.join(go,`vscode-ipc-${e}.sock`):t=fo.join(Xs.tmpdir(),`vscode-${e}.sock`);let r=Ys.get(process.platform);return r!==void 0&&t.length>=r&&bt.default().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t}E.generateRandomPipeName=Zs;function Ks(e,t="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let c=vn.createServer(g=>{c.close(),r([new Rt(g,t),new wt(g,t)])});c.on("error",s),c.listen(e,()=>{c.removeListener("error",s),i({onConnected:()=>n})})})}E.createClientPipeTransport=Ks;function ea(e,t="utf-8"){let r=vn.createConnection(e);return[new Rt(r,t),new wt(r,t)]}E.createServerPipeTransport=ea;function ta(e,t="utf-8"){let r,n=new Promise((i,s)=>{r=i});return new Promise((i,s)=>{let c=vn.createServer(g=>{c.close(),r([new Rt(g,t),new wt(g,t)])});c.on("error",s),c.listen(e,"127.0.0.1",()=>{c.removeListener("error",s),i({onConnected:()=>n})})})}E.createClientSocketTransport=ta;function na(e,t="utf-8"){let r=vn.createConnection(e,"127.0.0.1");return[new Rt(r,t),new wt(r,t)]}E.createServerSocketTransport=na;function ra(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function ia(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function oa(e,t,r,n){r||(r=Me.NullLogger);let i=ra(e)?new ir(e):e,s=ia(t)?new or(t):t;return Me.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Me.createMessageConnection(i,s,r,n)}E.createMessageConnection=oa}),sr=k((Yu,mo)=>{"use strict";mo.exports=_t()}),vo=k(sa=>{di(sa,{AnnotatedTextEdit:()=>He,ChangeAnnotation:()=>dt,ChangeAnnotationIdentifier:()=>ae,CodeAction:()=>Fr,CodeActionContext:()=>Lr,CodeActionKind:()=>Mr,CodeDescription:()=>gr,CodeLens:()=>Ar,Color:()=>Rn,ColorInformation:()=>ur,ColorPresentation:()=>dr,Command:()=>Pt,CompletionItem:()=>xr,CompletionItemKind:()=>br,CompletionItemTag:()=>wr,CompletionList:()=>Tr,CreateFile:()=>xt,DeleteFile:()=>Ct,Diagnostic:()=>Bt,DiagnosticRelatedInformation:()=>wn,DiagnosticSeverity:()=>pr,DiagnosticTag:()=>hr,DocumentHighlight:()=>Er,DocumentHighlightKind:()=>Sr,DocumentLink:()=>Wr,DocumentSymbol:()=>jr,EOL:()=>ca,FoldingRange:()=>fr,FoldingRangeKind:()=>lr,FormattingOptions:()=>Ir,Hover:()=>Cr,InsertReplaceEdit:()=>_r,InsertTextFormat:()=>Rr,InsertTextMode:()=>Pr,Location:()=>bn,LocationLink:()=>cr,MarkedString:()=>Vt,MarkupContent:()=>xn,MarkupKind:()=>kt,OptionalVersionedTextDocumentIdentifier:()=>Ut,ParameterInformation:()=>kr,Position:()=>qe,Range:()=>ee,RenameFile:()=>Tt,SelectionRange:()=>$r,SignatureInformation:()=>qr,SymbolInformation:()=>Or,SymbolKind:()=>Dr,SymbolTag:()=>Nr,TextDocument:()=>zr,TextDocumentEdit:()=>Ht,TextDocumentIdentifier:()=>mr,TextDocumentItem:()=>vr,TextEdit:()=>Be,VersionedTextDocumentIdentifier:()=>yr,WorkspaceChange:()=>aa,WorkspaceEdit:()=>_n,integer:()=>ar,uinteger:()=>zt});"use strict";var ar;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647})(ar||(ar={}));var zt;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647})(zt||(zt={}));var qe;(function(e){function t(n,i){return n===Number.MAX_VALUE&&(n=zt.MAX_VALUE),i===Number.MAX_VALUE&&(i=zt.MAX_VALUE),{line:n,character:i}}e.create=t;function r(n){var i=n;return u.objectLiteral(i)&&u.uinteger(i.line)&&u.uinteger(i.character)}e.is=r})(qe||(qe={}));var ee;(function(e){function t(n,i,s,c){if(u.uinteger(n)&&u.uinteger(i)&&u.uinteger(s)&&u.uinteger(c))return{start:qe.create(n,i),end:qe.create(s,c)};if(qe.is(n)&&qe.is(i))return{start:n,end:i};throw new Error("Range#create called with invalid arguments["+n+", "+i+", "+s+", "+c+"]")}e.create=t;function r(n){var i=n;return u.objectLiteral(i)&&qe.is(i.start)&&qe.is(i.end)}e.is=r})(ee||(ee={}));var bn;(function(e){function t(n,i){return{uri:n,range:i}}e.create=t;function r(n){var i=n;return u.defined(i)&&ee.is(i.range)&&(u.string(i.uri)||u.undefined(i.uri))}e.is=r})(bn||(bn={}));var cr;(function(e){function t(n,i,s,c){return{targetUri:n,targetRange:i,targetSelectionRange:s,originSelectionRange:c}}e.create=t;function r(n){var i=n;return u.defined(i)&&ee.is(i.targetRange)&&u.string(i.targetUri)&&(ee.is(i.targetSelectionRange)||u.undefined(i.targetSelectionRange))&&(ee.is(i.originSelectionRange)||u.undefined(i.originSelectionRange))}e.is=r})(cr||(cr={}));var Rn;(function(e){function t(n,i,s,c){return{red:n,green:i,blue:s,alpha:c}}e.create=t;function r(n){var i=n;return u.numberRange(i.red,0,1)&&u.numberRange(i.green,0,1)&&u.numberRange(i.blue,0,1)&&u.numberRange(i.alpha,0,1)}e.is=r})(Rn||(Rn={}));var ur;(function(e){function t(n,i){return{range:n,color:i}}e.create=t;function r(n){var i=n;return ee.is(i.range)&&Rn.is(i.color)}e.is=r})(ur||(ur={}));var dr;(function(e){function t(n,i,s){return{label:n,textEdit:i,additionalTextEdits:s}}e.create=t;function r(n){var i=n;return u.string(i.label)&&(u.undefined(i.textEdit)||Be.is(i))&&(u.undefined(i.additionalTextEdits)||u.typedArray(i.additionalTextEdits,Be.is))}e.is=r})(dr||(dr={}));var lr;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(lr||(lr={}));var fr;(function(e){function t(n,i,s,c,g){var v={startLine:n,endLine:i};return u.defined(s)&&(v.startCharacter=s),u.defined(c)&&(v.endCharacter=c),u.defined(g)&&(v.kind=g),v}e.create=t;function r(n){var i=n;return u.uinteger(i.startLine)&&u.uinteger(i.startLine)&&(u.undefined(i.startCharacter)||u.uinteger(i.startCharacter))&&(u.undefined(i.endCharacter)||u.uinteger(i.endCharacter))&&(u.undefined(i.kind)||u.string(i.kind))}e.is=r})(fr||(fr={}));var wn;(function(e){function t(n,i){return{location:n,message:i}}e.create=t;function r(n){var i=n;return u.defined(i)&&bn.is(i.location)&&u.string(i.message)}e.is=r})(wn||(wn={}));var pr;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(pr||(pr={}));var hr;(function(e){e.Unnecessary=1,e.Deprecated=2})(hr||(hr={}));var gr;(function(e){function t(r){var n=r;return n!=null&&u.string(n.href)}e.is=t})(gr||(gr={}));var Bt;(function(e){function t(n,i,s,c,g,v){var x={range:n,message:i};return u.defined(s)&&(x.severity=s),u.defined(c)&&(x.code=c),u.defined(g)&&(x.source=g),u.defined(v)&&(x.relatedInformation=v),x}e.create=t;function r(n){var i,s=n;return u.defined(s)&&ee.is(s.range)&&u.string(s.message)&&(u.number(s.severity)||u.undefined(s.severity))&&(u.integer(s.code)||u.string(s.code)||u.undefined(s.code))&&(u.undefined(s.codeDescription)||u.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(u.string(s.source)||u.undefined(s.source))&&(u.undefined(s.relatedInformation)||u.typedArray(s.relatedInformation,wn.is))}e.is=r})(Bt||(Bt={}));var Pt;(function(e){function t(n,i){for(var s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];var g={title:n,command:i};return u.defined(s)&&s.length>0&&(g.arguments=s),g}e.create=t;function r(n){var i=n;return u.defined(i)&&u.string(i.title)&&u.string(i.command)}e.is=r})(Pt||(Pt={}));var Be;(function(e){function t(s,c){return{range:s,newText:c}}e.replace=t;function r(s,c){return{range:{start:s,end:s},newText:c}}e.insert=r;function n(s){return{range:s,newText:""}}e.del=n;function i(s){var c=s;return u.objectLiteral(c)&&u.string(c.newText)&&ee.is(c.range)}e.is=i})(Be||(Be={}));var dt;(function(e){function t(n,i,s){var c={label:n};return i!==void 0&&(c.needsConfirmation=i),s!==void 0&&(c.description=s),c}e.create=t;function r(n){var i=n;return i!==void 0&&u.objectLiteral(i)&&u.string(i.label)&&(u.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(u.string(i.description)||i.description===void 0)}e.is=r})(dt||(dt={}));var ae;(function(e){function t(r){var n=r;return typeof n=="string"}e.is=t})(ae||(ae={}));var He;(function(e){function t(s,c,g){return{range:s,newText:c,annotationId:g}}e.replace=t;function r(s,c,g){return{range:{start:s,end:s},newText:c,annotationId:g}}e.insert=r;function n(s,c){return{range:s,newText:"",annotationId:c}}e.del=n;function i(s){var c=s;return Be.is(c)&&(dt.is(c.annotationId)||ae.is(c.annotationId))}e.is=i})(He||(He={}));var Ht;(function(e){function t(n,i){return{textDocument:n,edits:i}}e.create=t;function r(n){var i=n;return u.defined(i)&&Ut.is(i.textDocument)&&Array.isArray(i.edits)}e.is=r})(Ht||(Ht={}));var xt;(function(e){function t(n,i,s){var c={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(c.options=i),s!==void 0&&(c.annotationId=s),c}e.create=t;function r(n){var i=n;return i&&i.kind==="create"&&u.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||u.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||u.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ae.is(i.annotationId))}e.is=r})(xt||(xt={}));var Tt;(function(e){function t(n,i,s,c){var g={kind:"rename",oldUri:n,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(g.options=s),c!==void 0&&(g.annotationId=c),g}e.create=t;function r(n){var i=n;return i&&i.kind==="rename"&&u.string(i.oldUri)&&u.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||u.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||u.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ae.is(i.annotationId))}e.is=r})(Tt||(Tt={}));var Ct;(function(e){function t(n,i,s){var c={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(c.options=i),s!==void 0&&(c.annotationId=s),c}e.create=t;function r(n){var i=n;return i&&i.kind==="delete"&&u.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||u.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||u.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ae.is(i.annotationId))}e.is=r})(Ct||(Ct={}));var _n;(function(e){function t(r){var n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(i){return u.string(i.kind)?xt.is(i)||Tt.is(i)||Ct.is(i):Ht.is(i)}))}e.is=t})(_n||(_n={}));var Pn=function(){function e(t,r){this.edits=t,this.changeAnnotations=r}return e.prototype.insert=function(t,r,n){var i,s;if(n===void 0?i=Be.insert(t,r):ae.is(n)?(s=n,i=He.insert(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=He.insert(t,r,s)),this.edits.push(i),s!==void 0)return s},e.prototype.replace=function(t,r,n){var i,s;if(n===void 0?i=Be.replace(t,r):ae.is(n)?(s=n,i=He.replace(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(n),i=He.replace(t,r,s)),this.edits.push(i),s!==void 0)return s},e.prototype.delete=function(t,r){var n,i;if(r===void 0?n=Be.del(t):ae.is(r)?(i=r,n=He.del(t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=He.del(t,i)),this.edits.push(n),i!==void 0)return i},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),yo=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,r){var n;if(ae.is(t)?n=t:(n=this.nextId(),r=t),this._annotations[n]!==void 0)throw new Error("Id "+n+" is already in use.");if(r===void 0)throw new Error("No annotation provided for id "+n);return this._annotations[n]=r,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),aa=function(){function e(t){var r=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new yo(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(n){if(Ht.is(n)){var i=new Pn(n.edits,r._changeAnnotations);r._textEditChanges[n.textDocument.uri]=i}})):t.changes&&Object.keys(t.changes).forEach(function(n){var i=new Pn(t.changes[n]);r._textEditChanges[n]=i})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(Ut.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r={uri:t.uri,version:t.version},n=this._textEditChanges[r.uri];if(!n){var i=[],s={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(s),n=new Pn(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[t];if(!n){var i=[];this._workspaceEdit.changes[t]=i,n=new Pn(i),this._textEditChanges[t]=n}return n}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new yo,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;dt.is(r)||ae.is(r)?i=r:n=r;var s,c;if(i===void 0?s=xt.create(t,n):(c=ae.is(i)?i:this._changeAnnotations.manage(i),s=xt.create(t,n,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},e.prototype.renameFile=function(t,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var s;dt.is(n)||ae.is(n)?s=n:i=n;var c,g;if(s===void 0?c=Tt.create(t,r,i):(g=ae.is(s)?s:this._changeAnnotations.manage(s),c=Tt.create(t,r,i,g)),this._workspaceEdit.documentChanges.push(c),g!==void 0)return g},e.prototype.deleteFile=function(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;dt.is(r)||ae.is(r)?i=r:n=r;var s,c;if(i===void 0?s=Ct.create(t,n):(c=ae.is(i)?i:this._changeAnnotations.manage(i),s=Ct.create(t,n,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},e}(),mr;(function(e){function t(n){return{uri:n}}e.create=t;function r(n){var i=n;return u.defined(i)&&u.string(i.uri)}e.is=r})(mr||(mr={}));var yr;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){var i=n;return u.defined(i)&&u.string(i.uri)&&u.integer(i.version)}e.is=r})(yr||(yr={}));var Ut;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){var i=n;return u.defined(i)&&u.string(i.uri)&&(i.version===null||u.integer(i.version))}e.is=r})(Ut||(Ut={}));var vr;(function(e){function t(n,i,s,c){return{uri:n,languageId:i,version:s,text:c}}e.create=t;function r(n){var i=n;return u.defined(i)&&u.string(i.uri)&&u.string(i.languageId)&&u.integer(i.version)&&u.string(i.text)}e.is=r})(vr||(vr={}));var kt;(function(e){e.PlainText="plaintext",e.Markdown="markdown"})(kt||(kt={}));(function(e){function t(r){var n=r;return n===e.PlainText||n===e.Markdown}e.is=t})(kt||(kt={}));var xn;(function(e){function t(r){var n=r;return u.objectLiteral(r)&&kt.is(n.kind)&&u.string(n.value)}e.is=t})(xn||(xn={}));var br;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(br||(br={}));var Rr;(function(e){e.PlainText=1,e.Snippet=2})(Rr||(Rr={}));var wr;(function(e){e.Deprecated=1})(wr||(wr={}));var _r;(function(e){function t(n,i,s){return{newText:n,insert:i,replace:s}}e.create=t;function r(n){var i=n;return i&&u.string(i.newText)&&ee.is(i.insert)&&ee.is(i.replace)}e.is=r})(_r||(_r={}));var Pr;(function(e){e.asIs=1,e.adjustIndentation=2})(Pr||(Pr={}));var xr;(function(e){function t(r){return{label:r}}e.create=t})(xr||(xr={}));var Tr;(function(e){function t(r,n){return{items:r||[],isIncomplete:!!n}}e.create=t})(Tr||(Tr={}));var Vt;(function(e){function t(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(n){var i=n;return u.string(i)||u.objectLiteral(i)&&u.string(i.language)&&u.string(i.value)}e.is=r})(Vt||(Vt={}));var Cr;(function(e){function t(r){var n=r;return!!n&&u.objectLiteral(n)&&(xn.is(n.contents)||Vt.is(n.contents)||u.typedArray(n.contents,Vt.is))&&(r.range===void 0||ee.is(r.range))}e.is=t})(Cr||(Cr={}));var kr;(function(e){function t(r,n){return n?{label:r,documentation:n}:{label:r}}e.create=t})(kr||(kr={}));var qr;(function(e){function t(r,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var c={label:r};return u.defined(n)&&(c.documentation=n),u.defined(i)?c.parameters=i:c.parameters=[],c}e.create=t})(qr||(qr={}));var Sr;(function(e){e.Text=1,e.Read=2,e.Write=3})(Sr||(Sr={}));var Er;(function(e){function t(r,n){var i={range:r};return u.number(n)&&(i.kind=n),i}e.create=t})(Er||(Er={}));var Dr;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Dr||(Dr={}));var Nr;(function(e){e.Deprecated=1})(Nr||(Nr={}));var Or;(function(e){function t(r,n,i,s,c){var g={name:r,kind:n,location:{uri:s,range:i}};return c&&(g.containerName=c),g}e.create=t})(Or||(Or={}));var jr;(function(e){function t(n,i,s,c,g,v){var x={name:n,detail:i,kind:s,range:c,selectionRange:g};return v!==void 0&&(x.children=v),x}e.create=t;function r(n){var i=n;return i&&u.string(i.name)&&u.number(i.kind)&&ee.is(i.range)&&ee.is(i.selectionRange)&&(i.detail===void 0||u.string(i.detail))&&(i.deprecated===void 0||u.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=r})(jr||(jr={}));var Mr;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(Mr||(Mr={}));var Lr;(function(e){function t(n,i){var s={diagnostics:n};return i!=null&&(s.only=i),s}e.create=t;function r(n){var i=n;return u.defined(i)&&u.typedArray(i.diagnostics,Bt.is)&&(i.only===void 0||u.typedArray(i.only,u.string))}e.is=r})(Lr||(Lr={}));var Fr;(function(e){function t(n,i,s){var c={title:n},g=!0;return typeof i=="string"?(g=!1,c.kind=i):Pt.is(i)?c.command=i:c.edit=i,g&&s!==void 0&&(c.kind=s),c}e.create=t;function r(n){var i=n;return i&&u.string(i.title)&&(i.diagnostics===void 0||u.typedArray(i.diagnostics,Bt.is))&&(i.kind===void 0||u.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Pt.is(i.command))&&(i.isPreferred===void 0||u.boolean(i.isPreferred))&&(i.edit===void 0||_n.is(i.edit))}e.is=r})(Fr||(Fr={}));var Ar;(function(e){function t(n,i){var s={range:n};return u.defined(i)&&(s.data=i),s}e.create=t;function r(n){var i=n;return u.defined(i)&&ee.is(i.range)&&(u.undefined(i.command)||Pt.is(i.command))}e.is=r})(Ar||(Ar={}));var Ir;(function(e){function t(n,i){return{tabSize:n,insertSpaces:i}}e.create=t;function r(n){var i=n;return u.defined(i)&&u.uinteger(i.tabSize)&&u.boolean(i.insertSpaces)}e.is=r})(Ir||(Ir={}));var Wr;(function(e){function t(n,i,s){return{range:n,target:i,data:s}}e.create=t;function r(n){var i=n;return u.defined(i)&&ee.is(i.range)&&(u.undefined(i.target)||u.string(i.target))}e.is=r})(Wr||(Wr={}));var $r;(function(e){function t(n,i){return{range:n,parent:i}}e.create=t;function r(n){var i=n;return i!==void 0&&ee.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=r})($r||($r={}));var ca=[`
`,`\r
`,"\r"],zr;(function(e){function t(s,c,g,v){return new ua(s,c,g,v)}e.create=t;function r(s){var c=s;return!!(u.defined(c)&&u.string(c.uri)&&(u.undefined(c.languageId)||u.string(c.languageId))&&u.uinteger(c.lineCount)&&u.func(c.getText)&&u.func(c.positionAt)&&u.func(c.offsetAt))}e.is=r;function n(s,c){for(var g=s.getText(),v=i(c,function(ye,le){var V=ye.range.start.line-le.range.start.line;return V===0?ye.range.start.character-le.range.start.character:V}),x=g.length,O=v.length-1;O>=0;O--){var F=v[O],G=s.offsetAt(F.range.start),P=s.offsetAt(F.range.end);if(P<=x)g=g.substring(0,G)+F.newText+g.substring(P,g.length);else throw new Error("Overlapping edit");x=G}return g}e.applyEdits=n;function i(s,c){if(s.length<=1)return s;var g=s.length/2|0,v=s.slice(0,g),x=s.slice(g);i(v,c),i(x,c);for(var O=0,F=0,G=0;O<v.length&&F<x.length;){var P=c(v[O],x[F]);P<=0?s[G++]=v[O++]:s[G++]=x[F++]}for(;O<v.length;)s[G++]=v[O++];for(;F<x.length;)s[G++]=x[F++];return s}})(zr||(zr={}));var ua=function(){function e(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content},e.prototype.update=function(t,r){this._content=t.text,this._version=r,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],r=this._content,n=!0,i=0;i<r.length;i++){n&&(t.push(i),n=!1);var s=r.charAt(i);n=s==="\r"||s===`
`,s==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&t.push(r.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return qe.create(0,t);for(;n<i;){var s=Math.floor((n+i)/2);r[s]>t?i=s:n=s+1}var c=n-1;return qe.create(c,t-r[c])},e.prototype.offsetAt=function(t){var r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;var n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),u;(function(e){var t=Object.prototype.toString;function r(P){return typeof P!="undefined"}e.defined=r;function n(P){return typeof P=="undefined"}e.undefined=n;function i(P){return P===!0||P===!1}e.boolean=i;function s(P){return t.call(P)==="[object String]"}e.string=s;function c(P){return t.call(P)==="[object Number]"}e.number=c;function g(P,ye,le){return t.call(P)==="[object Number]"&&ye<=P&&P<=le}e.numberRange=g;function v(P){return t.call(P)==="[object Number]"&&-2147483648<=P&&P<=2147483647}e.integer=v;function x(P){return t.call(P)==="[object Number]"&&0<=P&&P<=2147483647}e.uinteger=x;function O(P){return t.call(P)==="[object Function]"}e.func=O;function F(P){return P!==null&&typeof P=="object"}e.objectLiteral=F;function G(P,ye){return Array.isArray(P)&&P.every(ye)}e.typedArray=G})(u||(u={}))}),te=k(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.ProtocolNotificationType=_e.ProtocolNotificationType0=_e.ProtocolRequestType=_e.ProtocolRequestType0=_e.RegistrationType=void 0;var qt=_t(),bo=class{constructor(t){this.method=t}};_e.RegistrationType=bo;var Ro=class extends qt.RequestType0{constructor(t){super(t)}};_e.ProtocolRequestType0=Ro;var wo=class extends qt.RequestType{constructor(t){super(t,qt.ParameterStructures.byName)}};_e.ProtocolRequestType=wo;var _o=class extends qt.NotificationType0{constructor(t){super(t)}};_e.ProtocolNotificationType0=_o;var Po=class extends qt.NotificationType{constructor(t){super(t,qt.ParameterStructures.byName)}};_e.ProtocolNotificationType=Po}),Co=k(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.objectLiteral=U.typedArray=U.stringArray=U.array=U.func=U.error=U.number=U.string=U.boolean=void 0;function da(e){return e===!0||e===!1}U.boolean=da;function xo(e){return typeof e=="string"||e instanceof String}U.string=xo;function la(e){return typeof e=="number"||e instanceof Number}U.number=la;function fa(e){return e instanceof Error}U.error=fa;function pa(e){return typeof e=="function"}U.func=pa;function To(e){return Array.isArray(e)}U.array=To;function ha(e){return To(e)&&e.every(t=>xo(t))}U.stringArray=ha;function ga(e,t){return Array.isArray(e)&&e.every(t)}U.typedArray=ga;function ma(e){return e!==null&&typeof e=="object"}U.objectLiteral=ma}),ko=k(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.ImplementationRequest=void 0;var ya=te(),va;(function(e){e.method="textDocument/implementation",e.type=new ya.ProtocolRequestType(e.method)})(va=Jt.ImplementationRequest||(Jt.ImplementationRequest={}))}),qo=k(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.TypeDefinitionRequest=void 0;var ba=te(),Ra;(function(e){e.method="textDocument/typeDefinition",e.type=new ba.ProtocolRequestType(e.method)})(Ra=Qt.TypeDefinitionRequest||(Qt.TypeDefinitionRequest={}))}),Eo=k(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.DidChangeWorkspaceFoldersNotification=Ye.WorkspaceFoldersRequest=void 0;var So=te(),wa;(function(e){e.type=new So.ProtocolRequestType0("workspace/workspaceFolders")})(wa=Ye.WorkspaceFoldersRequest||(Ye.WorkspaceFoldersRequest={}));var _a;(function(e){e.type=new So.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(_a=Ye.DidChangeWorkspaceFoldersNotification||(Ye.DidChangeWorkspaceFoldersNotification={}))}),Do=k(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.ConfigurationRequest=void 0;var Pa=te(),xa;(function(e){e.type=new Pa.ProtocolRequestType("workspace/configuration")})(xa=Xt.ConfigurationRequest||(Xt.ConfigurationRequest={}))}),Oo=k(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.ColorPresentationRequest=Ze.DocumentColorRequest=void 0;var No=te(),Ta;(function(e){e.method="textDocument/documentColor",e.type=new No.ProtocolRequestType(e.method)})(Ta=Ze.DocumentColorRequest||(Ze.DocumentColorRequest={}));var Ca;(function(e){e.type=new No.ProtocolRequestType("textDocument/colorPresentation")})(Ca=Ze.ColorPresentationRequest||(Ze.ColorPresentationRequest={}))}),jo=k(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.FoldingRangeRequest=Ke.FoldingRangeKind=void 0;var ka=te(),qa;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(qa=Ke.FoldingRangeKind||(Ke.FoldingRangeKind={}));var Sa;(function(e){e.method="textDocument/foldingRange",e.type=new ka.ProtocolRequestType(e.method)})(Sa=Ke.FoldingRangeRequest||(Ke.FoldingRangeRequest={}))}),Mo=k(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.DeclarationRequest=void 0;var Ea=te(),Da;(function(e){e.method="textDocument/declaration",e.type=new Ea.ProtocolRequestType(e.method)})(Da=Gt.DeclarationRequest||(Gt.DeclarationRequest={}))}),Lo=k(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.SelectionRangeRequest=void 0;var Na=te(),Oa;(function(e){e.method="textDocument/selectionRange",e.type=new Na.ProtocolRequestType(e.method)})(Oa=Yt.SelectionRangeRequest||(Yt.SelectionRangeRequest={}))}),Ao=k(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.WorkDoneProgressCancelNotification=Se.WorkDoneProgressCreateRequest=Se.WorkDoneProgress=void 0;var ja=_t(),Fo=te(),Ma;(function(e){e.type=new ja.ProgressType;function t(r){return r===e.type}e.is=t})(Ma=Se.WorkDoneProgress||(Se.WorkDoneProgress={}));var La;(function(e){e.type=new Fo.ProtocolRequestType("window/workDoneProgress/create")})(La=Se.WorkDoneProgressCreateRequest||(Se.WorkDoneProgressCreateRequest={}));var Fa;(function(e){e.type=new Fo.ProtocolNotificationType("window/workDoneProgress/cancel")})(Fa=Se.WorkDoneProgressCancelNotification||(Se.WorkDoneProgressCancelNotification={}))}),Io=k(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.CallHierarchyOutgoingCallsRequest=Ee.CallHierarchyIncomingCallsRequest=Ee.CallHierarchyPrepareRequest=void 0;var Br=te(),Aa;(function(e){e.method="textDocument/prepareCallHierarchy",e.type=new Br.ProtocolRequestType(e.method)})(Aa=Ee.CallHierarchyPrepareRequest||(Ee.CallHierarchyPrepareRequest={}));var Ia;(function(e){e.method="callHierarchy/incomingCalls",e.type=new Br.ProtocolRequestType(e.method)})(Ia=Ee.CallHierarchyIncomingCallsRequest||(Ee.CallHierarchyIncomingCallsRequest={}));var Wa;(function(e){e.method="callHierarchy/outgoingCalls",e.type=new Br.ProtocolRequestType(e.method)})(Wa=Ee.CallHierarchyOutgoingCallsRequest||(Ee.CallHierarchyOutgoingCallsRequest={}))}),Wo=k(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.SemanticTokensRefreshRequest=j.SemanticTokensRangeRequest=j.SemanticTokensDeltaRequest=j.SemanticTokensRequest=j.SemanticTokensRegistrationType=j.TokenFormat=j.SemanticTokens=j.SemanticTokenModifiers=j.SemanticTokenTypes=void 0;var Zt=te(),$a;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"})($a=j.SemanticTokenTypes||(j.SemanticTokenTypes={}));var za;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(za=j.SemanticTokenModifiers||(j.SemanticTokenModifiers={}));var Ba;(function(e){function t(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}e.is=t})(Ba=j.SemanticTokens||(j.SemanticTokens={}));var Ha;(function(e){e.Relative="relative"})(Ha=j.TokenFormat||(j.TokenFormat={}));var Ua;(function(e){e.method="textDocument/semanticTokens",e.type=new Zt.RegistrationType(e.method)})(Ua=j.SemanticTokensRegistrationType||(j.SemanticTokensRegistrationType={}));var Va;(function(e){e.method="textDocument/semanticTokens/full",e.type=new Zt.ProtocolRequestType(e.method)})(Va=j.SemanticTokensRequest||(j.SemanticTokensRequest={}));var Ja;(function(e){e.method="textDocument/semanticTokens/full/delta",e.type=new Zt.ProtocolRequestType(e.method)})(Ja=j.SemanticTokensDeltaRequest||(j.SemanticTokensDeltaRequest={}));var Qa;(function(e){e.method="textDocument/semanticTokens/range",e.type=new Zt.ProtocolRequestType(e.method)})(Qa=j.SemanticTokensRangeRequest||(j.SemanticTokensRangeRequest={}));var Xa;(function(e){e.method="workspace/semanticTokens/refresh",e.type=new Zt.ProtocolRequestType0(e.method)})(Xa=j.SemanticTokensRefreshRequest||(j.SemanticTokensRefreshRequest={}))}),$o=k(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ShowDocumentRequest=void 0;var Ga=te(),Ya;(function(e){e.method="window/showDocument",e.type=new Ga.ProtocolRequestType(e.method)})(Ya=Kt.ShowDocumentRequest||(Kt.ShowDocumentRequest={}))}),zo=k(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.LinkedEditingRangeRequest=void 0;var Za=te(),Ka;(function(e){e.method="textDocument/linkedEditingRange",e.type=new Za.ProtocolRequestType(e.method)})(Ka=en.LinkedEditingRangeRequest||(en.LinkedEditingRangeRequest={}))}),Bo=k(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.WillDeleteFilesRequest=I.DidDeleteFilesNotification=I.DidRenameFilesNotification=I.WillRenameFilesRequest=I.DidCreateFilesNotification=I.WillCreateFilesRequest=I.FileOperationPatternKind=void 0;var St=te(),ec;(function(e){e.file="file",e.folder="folder"})(ec=I.FileOperationPatternKind||(I.FileOperationPatternKind={}));var tc;(function(e){e.method="workspace/willCreateFiles",e.type=new St.ProtocolRequestType(e.method)})(tc=I.WillCreateFilesRequest||(I.WillCreateFilesRequest={}));var nc;(function(e){e.method="workspace/didCreateFiles",e.type=new St.ProtocolNotificationType(e.method)})(nc=I.DidCreateFilesNotification||(I.DidCreateFilesNotification={}));var rc;(function(e){e.method="workspace/willRenameFiles",e.type=new St.ProtocolRequestType(e.method)})(rc=I.WillRenameFilesRequest||(I.WillRenameFilesRequest={}));var ic;(function(e){e.method="workspace/didRenameFiles",e.type=new St.ProtocolNotificationType(e.method)})(ic=I.DidRenameFilesNotification||(I.DidRenameFilesNotification={}));var oc;(function(e){e.method="workspace/didDeleteFiles",e.type=new St.ProtocolNotificationType(e.method)})(oc=I.DidDeleteFilesNotification||(I.DidDeleteFilesNotification={}));var sc;(function(e){e.method="workspace/willDeleteFiles",e.type=new St.ProtocolRequestType(e.method)})(sc=I.WillDeleteFilesRequest||(I.WillDeleteFilesRequest={}))}),Ho=k(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.MonikerRequest=De.MonikerKind=De.UniquenessLevel=void 0;var ac=te(),cc;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(cc=De.UniquenessLevel||(De.UniquenessLevel={}));var uc;(function(e){e.import="import",e.export="export",e.local="local"})(uc=De.MonikerKind||(De.MonikerKind={}));var dc;(function(e){e.method="textDocument/moniker",e.type=new ac.ProtocolRequestType(e.method)})(dc=De.MonikerRequest||(De.MonikerRequest={}))}),Xo=k(o=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.DocumentLinkRequest=o.CodeLensRefreshRequest=o.CodeLensResolveRequest=o.CodeLensRequest=o.WorkspaceSymbolRequest=o.CodeActionResolveRequest=o.CodeActionRequest=o.DocumentSymbolRequest=o.DocumentHighlightRequest=o.ReferencesRequest=o.DefinitionRequest=o.SignatureHelpRequest=o.SignatureHelpTriggerKind=o.HoverRequest=o.CompletionResolveRequest=o.CompletionRequest=o.CompletionTriggerKind=o.PublishDiagnosticsNotification=o.WatchKind=o.FileChangeType=o.DidChangeWatchedFilesNotification=o.WillSaveTextDocumentWaitUntilRequest=o.WillSaveTextDocumentNotification=o.TextDocumentSaveReason=o.DidSaveTextDocumentNotification=o.DidCloseTextDocumentNotification=o.DidChangeTextDocumentNotification=o.TextDocumentContentChangeEvent=o.DidOpenTextDocumentNotification=o.TextDocumentSyncKind=o.TelemetryEventNotification=o.LogMessageNotification=o.ShowMessageRequest=o.ShowMessageNotification=o.MessageType=o.DidChangeConfigurationNotification=o.ExitNotification=o.ShutdownRequest=o.InitializedNotification=o.InitializeError=o.InitializeRequest=o.WorkDoneProgressOptions=o.TextDocumentRegistrationOptions=o.StaticRegistrationOptions=o.FailureHandlingKind=o.ResourceOperationKind=o.UnregistrationRequest=o.RegistrationRequest=o.DocumentSelector=o.DocumentFilter=void 0;o.MonikerRequest=o.MonikerKind=o.UniquenessLevel=o.WillDeleteFilesRequest=o.DidDeleteFilesNotification=o.WillRenameFilesRequest=o.DidRenameFilesNotification=o.WillCreateFilesRequest=o.DidCreateFilesNotification=o.FileOperationPatternKind=o.LinkedEditingRangeRequest=o.ShowDocumentRequest=o.SemanticTokensRegistrationType=o.SemanticTokensRefreshRequest=o.SemanticTokensRangeRequest=o.SemanticTokensDeltaRequest=o.SemanticTokensRequest=o.TokenFormat=o.SemanticTokens=o.SemanticTokenModifiers=o.SemanticTokenTypes=o.CallHierarchyPrepareRequest=o.CallHierarchyOutgoingCallsRequest=o.CallHierarchyIncomingCallsRequest=o.WorkDoneProgressCancelNotification=o.WorkDoneProgressCreateRequest=o.WorkDoneProgress=o.SelectionRangeRequest=o.DeclarationRequest=o.FoldingRangeRequest=o.ColorPresentationRequest=o.DocumentColorRequest=o.ConfigurationRequest=o.DidChangeWorkspaceFoldersNotification=o.WorkspaceFoldersRequest=o.TypeDefinitionRequest=o.ImplementationRequest=o.ApplyWorkspaceEditRequest=o.ExecuteCommandRequest=o.PrepareRenameRequest=o.RenameRequest=o.PrepareSupportDefaultBehavior=o.DocumentOnTypeFormattingRequest=o.DocumentRangeFormattingRequest=o.DocumentFormattingRequest=o.DocumentLinkResolveRequest=void 0;var et=Co(),T=te(),lc=ko();Object.defineProperty(o,"ImplementationRequest",{enumerable:!0,get:function(){return lc.ImplementationRequest}});var fc=qo();Object.defineProperty(o,"TypeDefinitionRequest",{enumerable:!0,get:function(){return fc.TypeDefinitionRequest}});var Uo=Eo();Object.defineProperty(o,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Uo.WorkspaceFoldersRequest}});Object.defineProperty(o,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Uo.DidChangeWorkspaceFoldersNotification}});var pc=Do();Object.defineProperty(o,"ConfigurationRequest",{enumerable:!0,get:function(){return pc.ConfigurationRequest}});var Vo=Oo();Object.defineProperty(o,"DocumentColorRequest",{enumerable:!0,get:function(){return Vo.DocumentColorRequest}});Object.defineProperty(o,"ColorPresentationRequest",{enumerable:!0,get:function(){return Vo.ColorPresentationRequest}});var hc=jo();Object.defineProperty(o,"FoldingRangeRequest",{enumerable:!0,get:function(){return hc.FoldingRangeRequest}});var gc=Mo();Object.defineProperty(o,"DeclarationRequest",{enumerable:!0,get:function(){return gc.DeclarationRequest}});var mc=Lo();Object.defineProperty(o,"SelectionRangeRequest",{enumerable:!0,get:function(){return mc.SelectionRangeRequest}});var Hr=Ao();Object.defineProperty(o,"WorkDoneProgress",{enumerable:!0,get:function(){return Hr.WorkDoneProgress}});Object.defineProperty(o,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Hr.WorkDoneProgressCreateRequest}});Object.defineProperty(o,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Hr.WorkDoneProgressCancelNotification}});var Ur=Io();Object.defineProperty(o,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ur.CallHierarchyIncomingCallsRequest}});Object.defineProperty(o,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ur.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(o,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ur.CallHierarchyPrepareRequest}});var Ue=Wo();Object.defineProperty(o,"SemanticTokenTypes",{enumerable:!0,get:function(){return Ue.SemanticTokenTypes}});Object.defineProperty(o,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Ue.SemanticTokenModifiers}});Object.defineProperty(o,"SemanticTokens",{enumerable:!0,get:function(){return Ue.SemanticTokens}});Object.defineProperty(o,"TokenFormat",{enumerable:!0,get:function(){return Ue.TokenFormat}});Object.defineProperty(o,"SemanticTokensRequest",{enumerable:!0,get:function(){return Ue.SemanticTokensRequest}});Object.defineProperty(o,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Ue.SemanticTokensDeltaRequest}});Object.defineProperty(o,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Ue.SemanticTokensRangeRequest}});Object.defineProperty(o,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Ue.SemanticTokensRefreshRequest}});Object.defineProperty(o,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Ue.SemanticTokensRegistrationType}});var yc=$o();Object.defineProperty(o,"ShowDocumentRequest",{enumerable:!0,get:function(){return yc.ShowDocumentRequest}});var vc=zo();Object.defineProperty(o,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return vc.LinkedEditingRangeRequest}});var lt=Bo();Object.defineProperty(o,"FileOperationPatternKind",{enumerable:!0,get:function(){return lt.FileOperationPatternKind}});Object.defineProperty(o,"DidCreateFilesNotification",{enumerable:!0,get:function(){return lt.DidCreateFilesNotification}});Object.defineProperty(o,"WillCreateFilesRequest",{enumerable:!0,get:function(){return lt.WillCreateFilesRequest}});Object.defineProperty(o,"DidRenameFilesNotification",{enumerable:!0,get:function(){return lt.DidRenameFilesNotification}});Object.defineProperty(o,"WillRenameFilesRequest",{enumerable:!0,get:function(){return lt.WillRenameFilesRequest}});Object.defineProperty(o,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return lt.DidDeleteFilesNotification}});Object.defineProperty(o,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return lt.WillDeleteFilesRequest}});var Vr=Ho();Object.defineProperty(o,"UniquenessLevel",{enumerable:!0,get:function(){return Vr.UniquenessLevel}});Object.defineProperty(o,"MonikerKind",{enumerable:!0,get:function(){return Vr.MonikerKind}});Object.defineProperty(o,"MonikerRequest",{enumerable:!0,get:function(){return Vr.MonikerRequest}});var Jo;(function(e){function t(r){let n=r;return et.string(n.language)||et.string(n.scheme)||et.string(n.pattern)}e.is=t})(Jo=o.DocumentFilter||(o.DocumentFilter={}));var Qo;(function(e){function t(r){if(!Array.isArray(r))return!1;for(let n of r)if(!et.string(n)&&!Jo.is(n))return!1;return!0}e.is=t})(Qo=o.DocumentSelector||(o.DocumentSelector={}));var bc;(function(e){e.type=new T.ProtocolRequestType("client/registerCapability")})(bc=o.RegistrationRequest||(o.RegistrationRequest={}));var Rc;(function(e){e.type=new T.ProtocolRequestType("client/unregisterCapability")})(Rc=o.UnregistrationRequest||(o.UnregistrationRequest={}));var wc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(wc=o.ResourceOperationKind||(o.ResourceOperationKind={}));var _c;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(_c=o.FailureHandlingKind||(o.FailureHandlingKind={}));var Pc;(function(e){function t(r){let n=r;return n&&et.string(n.id)&&n.id.length>0}e.hasId=t})(Pc=o.StaticRegistrationOptions||(o.StaticRegistrationOptions={}));var xc;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||Qo.is(n.documentSelector))}e.is=t})(xc=o.TextDocumentRegistrationOptions||(o.TextDocumentRegistrationOptions={}));var Tc;(function(e){function t(n){let i=n;return et.objectLiteral(i)&&(i.workDoneProgress===void 0||et.boolean(i.workDoneProgress))}e.is=t;function r(n){let i=n;return i&&et.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=r})(Tc=o.WorkDoneProgressOptions||(o.WorkDoneProgressOptions={}));var Cc;(function(e){e.type=new T.ProtocolRequestType("initialize")})(Cc=o.InitializeRequest||(o.InitializeRequest={}));var kc;(function(e){e.unknownProtocolVersion=1})(kc=o.InitializeError||(o.InitializeError={}));var qc;(function(e){e.type=new T.ProtocolNotificationType("initialized")})(qc=o.InitializedNotification||(o.InitializedNotification={}));var Sc;(function(e){e.type=new T.ProtocolRequestType0("shutdown")})(Sc=o.ShutdownRequest||(o.ShutdownRequest={}));var Ec;(function(e){e.type=new T.ProtocolNotificationType0("exit")})(Ec=o.ExitNotification||(o.ExitNotification={}));var Dc;(function(e){e.type=new T.ProtocolNotificationType("workspace/didChangeConfiguration")})(Dc=o.DidChangeConfigurationNotification||(o.DidChangeConfigurationNotification={}));var Nc;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4})(Nc=o.MessageType||(o.MessageType={}));var Oc;(function(e){e.type=new T.ProtocolNotificationType("window/showMessage")})(Oc=o.ShowMessageNotification||(o.ShowMessageNotification={}));var jc;(function(e){e.type=new T.ProtocolRequestType("window/showMessageRequest")})(jc=o.ShowMessageRequest||(o.ShowMessageRequest={}));var Mc;(function(e){e.type=new T.ProtocolNotificationType("window/logMessage")})(Mc=o.LogMessageNotification||(o.LogMessageNotification={}));var Lc;(function(e){e.type=new T.ProtocolNotificationType("telemetry/event")})(Lc=o.TelemetryEventNotification||(o.TelemetryEventNotification={}));var Fc;(function(e){e.None=0,e.Full=1,e.Incremental=2})(Fc=o.TextDocumentSyncKind||(o.TextDocumentSyncKind={}));var Ac;(function(e){e.method="textDocument/didOpen",e.type=new T.ProtocolNotificationType(e.method)})(Ac=o.DidOpenTextDocumentNotification||(o.DidOpenTextDocumentNotification={}));var Ic;(function(e){function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=r})(Ic=o.TextDocumentContentChangeEvent||(o.TextDocumentContentChangeEvent={}));var Wc;(function(e){e.method="textDocument/didChange",e.type=new T.ProtocolNotificationType(e.method)})(Wc=o.DidChangeTextDocumentNotification||(o.DidChangeTextDocumentNotification={}));var $c;(function(e){e.method="textDocument/didClose",e.type=new T.ProtocolNotificationType(e.method)})($c=o.DidCloseTextDocumentNotification||(o.DidCloseTextDocumentNotification={}));var zc;(function(e){e.method="textDocument/didSave",e.type=new T.ProtocolNotificationType(e.method)})(zc=o.DidSaveTextDocumentNotification||(o.DidSaveTextDocumentNotification={}));var Bc;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(Bc=o.TextDocumentSaveReason||(o.TextDocumentSaveReason={}));var Hc;(function(e){e.method="textDocument/willSave",e.type=new T.ProtocolNotificationType(e.method)})(Hc=o.WillSaveTextDocumentNotification||(o.WillSaveTextDocumentNotification={}));var Uc;(function(e){e.method="textDocument/willSaveWaitUntil",e.type=new T.ProtocolRequestType(e.method)})(Uc=o.WillSaveTextDocumentWaitUntilRequest||(o.WillSaveTextDocumentWaitUntilRequest={}));var Vc;(function(e){e.type=new T.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(Vc=o.DidChangeWatchedFilesNotification||(o.DidChangeWatchedFilesNotification={}));var Jc;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(Jc=o.FileChangeType||(o.FileChangeType={}));var Qc;(function(e){e.Create=1,e.Change=2,e.Delete=4})(Qc=o.WatchKind||(o.WatchKind={}));var Xc;(function(e){e.type=new T.ProtocolNotificationType("textDocument/publishDiagnostics")})(Xc=o.PublishDiagnosticsNotification||(o.PublishDiagnosticsNotification={}));var Gc;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(Gc=o.CompletionTriggerKind||(o.CompletionTriggerKind={}));var Yc;(function(e){e.method="textDocument/completion",e.type=new T.ProtocolRequestType(e.method)})(Yc=o.CompletionRequest||(o.CompletionRequest={}));var Zc;(function(e){e.method="completionItem/resolve",e.type=new T.ProtocolRequestType(e.method)})(Zc=o.CompletionResolveRequest||(o.CompletionResolveRequest={}));var Kc;(function(e){e.method="textDocument/hover",e.type=new T.ProtocolRequestType(e.method)})(Kc=o.HoverRequest||(o.HoverRequest={}));var eu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(eu=o.SignatureHelpTriggerKind||(o.SignatureHelpTriggerKind={}));var tu;(function(e){e.method="textDocument/signatureHelp",e.type=new T.ProtocolRequestType(e.method)})(tu=o.SignatureHelpRequest||(o.SignatureHelpRequest={}));var nu;(function(e){e.method="textDocument/definition",e.type=new T.ProtocolRequestType(e.method)})(nu=o.DefinitionRequest||(o.DefinitionRequest={}));var ru;(function(e){e.method="textDocument/references",e.type=new T.ProtocolRequestType(e.method)})(ru=o.ReferencesRequest||(o.ReferencesRequest={}));var iu;(function(e){e.method="textDocument/documentHighlight",e.type=new T.ProtocolRequestType(e.method)})(iu=o.DocumentHighlightRequest||(o.DocumentHighlightRequest={}));var ou;(function(e){e.method="textDocument/documentSymbol",e.type=new T.ProtocolRequestType(e.method)})(ou=o.DocumentSymbolRequest||(o.DocumentSymbolRequest={}));var su;(function(e){e.method="textDocument/codeAction",e.type=new T.ProtocolRequestType(e.method)})(su=o.CodeActionRequest||(o.CodeActionRequest={}));var au;(function(e){e.method="codeAction/resolve",e.type=new T.ProtocolRequestType(e.method)})(au=o.CodeActionResolveRequest||(o.CodeActionResolveRequest={}));var cu;(function(e){e.method="workspace/symbol",e.type=new T.ProtocolRequestType(e.method)})(cu=o.WorkspaceSymbolRequest||(o.WorkspaceSymbolRequest={}));var uu;(function(e){e.method="textDocument/codeLens",e.type=new T.ProtocolRequestType(e.method)})(uu=o.CodeLensRequest||(o.CodeLensRequest={}));var du;(function(e){e.method="codeLens/resolve",e.type=new T.ProtocolRequestType(e.method)})(du=o.CodeLensResolveRequest||(o.CodeLensResolveRequest={}));var lu;(function(e){e.method="workspace/codeLens/refresh",e.type=new T.ProtocolRequestType0(e.method)})(lu=o.CodeLensRefreshRequest||(o.CodeLensRefreshRequest={}));var fu;(function(e){e.method="textDocument/documentLink",e.type=new T.ProtocolRequestType(e.method)})(fu=o.DocumentLinkRequest||(o.DocumentLinkRequest={}));var pu;(function(e){e.method="documentLink/resolve",e.type=new T.ProtocolRequestType(e.method)})(pu=o.DocumentLinkResolveRequest||(o.DocumentLinkResolveRequest={}));var hu;(function(e){e.method="textDocument/formatting",e.type=new T.ProtocolRequestType(e.method)})(hu=o.DocumentFormattingRequest||(o.DocumentFormattingRequest={}));var gu;(function(e){e.method="textDocument/rangeFormatting",e.type=new T.ProtocolRequestType(e.method)})(gu=o.DocumentRangeFormattingRequest||(o.DocumentRangeFormattingRequest={}));var mu;(function(e){e.method="textDocument/onTypeFormatting",e.type=new T.ProtocolRequestType(e.method)})(mu=o.DocumentOnTypeFormattingRequest||(o.DocumentOnTypeFormattingRequest={}));var yu;(function(e){e.Identifier=1})(yu=o.PrepareSupportDefaultBehavior||(o.PrepareSupportDefaultBehavior={}));var vu;(function(e){e.method="textDocument/rename",e.type=new T.ProtocolRequestType(e.method)})(vu=o.RenameRequest||(o.RenameRequest={}));var bu;(function(e){e.method="textDocument/prepareRename",e.type=new T.ProtocolRequestType(e.method)})(bu=o.PrepareRenameRequest||(o.PrepareRenameRequest={}));var Ru;(function(e){e.type=new T.ProtocolRequestType("workspace/executeCommand")})(Ru=o.ExecuteCommandRequest||(o.ExecuteCommandRequest={}));var wu;(function(e){e.type=new T.ProtocolRequestType("workspace/applyEdit")})(wu=o.ApplyWorkspaceEditRequest||(o.ApplyWorkspaceEditRequest={}))}),Yo=k(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.createProtocolConnection=void 0;var Go=_t();function _u(e,t,r,n){return Go.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Go.createMessageConnection(e,t,r,n)}Tn.createProtocolConnection=_u}),Zo=k(me=>{"use strict";var Pu=me&&me.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Cn=me&&me.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pu(t,e,r)};Object.defineProperty(me,"__esModule",{value:!0});me.LSPErrorCodes=me.createProtocolConnection=void 0;Cn(_t(),me);Cn(vo(),me);Cn(te(),me);Cn(Xo(),me);var xu=Yo();Object.defineProperty(me,"createProtocolConnection",{enumerable:!0,get:function(){return xu.createProtocolConnection}});var Tu;(function(e){e.lspReservedErrorRangeStart=-32899,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(Tu=me.LSPErrorCodes||(me.LSPErrorCodes={}))}),es=k(Le=>{"use strict";var Cu=Le&&Le.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ko=Le&&Le.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Cu(t,e,r)};Object.defineProperty(Le,"__esModule",{value:!0});Le.createProtocolConnection=void 0;var ku=sr();Ko(sr(),Le);Ko(Zo(),Le);function qu(e,t,r,n){return ku.createMessageConnection(e,t,r,n)}Le.createProtocolConnection=qu});di(exports,{activate:()=>ls,deactivate:()=>fs});var Fe=Ge(require("path")),cs=Ge(require("fs")),p=Ge(require("coc.nvim")),ce=Ge(es()),ts=Ge(require("fs")),tn=Ge(require("path"));"use strict";function ns(e){return new Promise((t,r)=>{ts.default.exists(e,n=>{t(n)})})}async function kn(e){let t=process.platform;return t==="win32"&&await ns(tn.default.join(e,"node_modules",".bin","eslint.cmd"))?tn.default.join(".","node_modules",".bin","eslint.cmd"):(t==="linux"||t==="darwin")&&await ns(tn.default.join(e,"node_modules",".bin","eslint"))?tn.default.join(".","node_modules",".bin","eslint"):"eslint"}var ne;(function(e){e.text="text",e.separator="separator",e.brace="brace",e.bracket="bracket",e.questionMark="questionMark",e.star="star",e.globStar="globStar"})(ne||(ne={}));function Jr(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}var qn=class{constructor(t,r="pattern"){this.value=t,this.index=0,this.mode=r,this.stopChar=r==="pattern"?void 0:"}"}makeTextNode(t){return{type:ne.text,value:Jr(this.value.substring(t,this.index))}}next(){let t=this.index,r;for(;(r=this.value[this.index])!==this.stopChar;)switch(r){case"/":return t<this.index?this.makeTextNode(t):(this.index++,{type:ne.separator});case"?":return this.index++,{type:ne.questionMark};case"*":return this.value[this.index+1]==="*"?(this.index+=2,{type:ne.globStar}):(this.index++,{type:ne.star});case"{":if(t<this.index)return this.makeTextNode(t);{let s=new qn(this.value.substring(this.index+1),"brace"),c=[],g;for(;(g=s.next())!==void 0;){if(g.type===ne.globStar||g.type===ne.separator)throw new Error(`Invalid glob pattern ${this.index}. Stopped at ${this.index}`);c.push(g)}return this.index=this.index+s.index+2,{type:ne.brace,alternatives:c}}case",":if(this.mode==="brace"&&t<this.index){let s=this.makeTextNode(t);return this.index++,s}this.index++;break;case"[":let n=[];this.index++;let i=this.index;for(;this.index<this.value.length;){let s=this.value[this.index];if(this.index===i)switch(s){case"]":n.push(s);break;case"!":case"^":n.push("^");break;default:n.push(Jr(s));break}else if(s==="-")n.push(s);else{if(s==="]")return this.index++,{type:ne.bracket,value:n.join("")};n.push(Jr(s))}this.index++}throw new Error(`Invalid glob pattern ${this.index}. Stopped at ${this.index}`);default:this.index++}return t===this.index?void 0:this.makeTextNode(t)}};function rs(e){let t=process.platform==="win32"?"\\\\":"\\/",r=`[^${t}]`;function n(i){switch(i.type){case ne.separator:return t;case ne.text:return i.value;case ne.questionMark:return r;case ne.star:return`${r}*?`;case ne.globStar:return`(?:${r}|(?:(?:${r}${t})+${r}))*?`;case ne.bracket:return`[${i.value}]`;case ne.brace:{let s=[];for(let c of i.alternatives)s.push(n(c));return`(?:${s.join("|")})`}}}try{let i=["^"],s=new qn(e),c;for(;(c=s.next())!==void 0;)i.push(n(c));return i.length>0?new RegExp(i.join("")):void 0}catch(i){console.error(i);return}}function is(e){return process.platform==="win32"?(e=e.replace(/^\/(\w)\//,"$1:\\"),e.replace(/\//g,"\\")):e}function os(e){return process.platform!=="win32"?e:e.replace(/\\/g,"/")}var re=Ge(require("coc.nvim")),ss=Ge(require("coc.nvim")),Su=/^(.+):(\d+):(\d+):\s*(.+?)\s\[(\w+)\/(.*)\]/,Qr=class{constructor(){this.disposables=[];this.statusItem=re.window.createStatusBarItem(1,{progress:!0});let t=this.task=re.workspace.createTask("ESLINT");this.disposables.push(re.commands.registerCommand(Qr.id,async()=>{let r=await this.getOptions();await this.start(r)&&(this.statusItem.text="compiling",this.statusItem.isProgress=!0,this.statusItem.show(),re.workspace.nvim.call("setqflist",[[]],!0))})),t.onExit(r=>{r!=0&&re.window.showMessage("Eslint found issues","warning"),this.onStop()}),t.onStdout(r=>{for(let n of r)this.onLine(n)}),t.onStderr(r=>{re.window.showMessage("TSC error: "+r.join(`
`),"error")}),this.disposables.push(ss.Disposable.create(()=>{t.dispose()}))}async start(t){return await this.task.start(t)}onStop(){this.statusItem.hide()}onLine(t){let r=t.match(Su);if(!!r){let n=r[1],i=re.Uri.file(n).toString(),s=re.workspace.getDocument(i),c=s?s.bufnr:null,g={filename:n,lnum:Number(r[2]),col:Number(r[3]),text:`${r[4]} [${r[6]}]`,type:/error/i.test(r[5])?"E":"W"};c&&(g.bufnr=c),re.workspace.nvim.call("setqflist",[[g],"a"])}}async getOptions(){let t=re.Uri.parse(re.workspace.workspaceFolder.uri).fsPath,r=await kn(t),i=re.workspace.getConfiguration("eslint").get("lintTask.options",["."]);return{cmd:r,args:i.concat(["-f","unix","--no-color"]),cwd:t}}dispose(){re.disposeAll(this.disposables)}},nn=Qr;nn.id="eslint.lintProject",nn.startTexts=["Starting compilation in watch mode","Starting incremental compilation"];var as=nn;"use strict";var we;(function(i){let e=Object.prototype.toString;function t(s){return s===!0||s===!1}i.boolean=t;function r(s){return e.call(s)==="[object String]"}i.string=r;function n(s){return s!=null&&!Array.isArray(s)&&typeof s=="object"}i.objectLiteral=n})(we||(we={}));var Xr;(function(t){function e(r){let n=r;return n&&we.string(n.language)&&(we.boolean(n.autoFix)||n.autoFix===void 0)}t.is=e})(Xr||(Xr={}));var Gr;(function(t){function e(r){let n=r;return n&&we.string(n.directory)&&we.boolean(n.changeProcessCWD)}t.is=e})(Gr||(Gr={}));var Et;(function(e){e.auto="auto",e.location="location"})(Et||(Et={}));(function(t){function e(r){return r===t.auto||r===t.location}t.is=e})(Et||(Et={}));var Sn;(function(t){function e(r){let n=r;return n&&Et.is(n.mode)}t.is=e})(Sn||(Sn={}));var Yr;(function(t){function e(r){let n=r;return n&&we.string(n.directory)&&(we.boolean(n["!cwd"])||n["!cwd"]===void 0)}t.is=e})(Yr||(Yr={}));var Zr;(function(t){function e(r){let n=r;return n&&we.string(n.pattern)&&(we.boolean(n["!cwd"])||n["!cwd"]===void 0)}t.is=e})(Zr||(Zr={}));var tt;(function(e){e.all="all",e.problems="problems"})(tt||(tt={}));(function(t){function e(r){if(r==null||!we.string(r))return t.all;switch(r.toLowerCase()){case t.problems:return t.problems;default:return t.all}}t.from=e})(tt||(tt={}));var Kr;(function(t){function e(r){if(!(r==null||!Array.isArray(r)))return r.filter(n=>we.string(n))}t.from=e})(Kr||(Kr={}));var de;(function(e){e.on="on",e.off="off",e.probe="probe"})(de||(de={}));var ft;(function(e){e.off="off",e.warn="warn",e.error="error"})(ft||(ft={}));(function(t){function e(r){if(r==null)return t.off;switch(r.toLowerCase()){case t.off:return t.off;case t.warn:return t.warn;case t.error:return t.error;default:return t.off}}t.from=e})(ft||(ft={}));var us;(function(e){e.info="info",e.warn="warn",e.error="error",e.off="off",e.default="default",e.downgrade="downgrade",e.upgrade="upgrade"})(us||(us={}));var Ve;(function(e){e[e.ok=1]="ok",e[e.warn=2]="warn",e[e.error=3]="error"})(Ve||(Ve={}));var ei;(function(t){t.type=new p.NotificationType("eslint/status")})(ei||(ei={}));var ti;(function(t){t.type=new p.RequestType("eslint/noConfig")})(ti||(ti={}));var ni;(function(t){t.type=new p.RequestType("eslint/noLibrary")})(ni||(ni={}));var ri;(function(t){t.type=new p.RequestType("eslint/openDoc")})(ri||(ri={}));var ii;(function(t){t.type=new p.RequestType("eslint/probeFailed")})(ii||(ii={}));var oi;(function(t){t.type=new p.NotificationType0("eslint/showOutputChannel")})(oi||(oi={}));var Eu=new p.NotificationType("eslint/exitCalled");async function Du(e,t){if(e.length===1)return Promise.resolve(e[0]);let r=await p.window.showQuickpick(e.map(n=>n.name),t);if(r!==-1)return e[r]}function Nu(){let e=p.workspace.workspaceFolders;if(!e){void p.window.showErrorMessage("An ESLint configuration can only be generated if VS Code is opened on a workspace folder.");return}let t=e.filter(r=>{let n=[".eslintrc.js",".eslintrc.yaml",".eslintrc.yml",".eslintrc",".eslintrc.json"];for(let i of n)if(cs.default.existsSync(Fe.default.join(p.Uri.parse(r.uri).fsPath,i)))return!1;return!0});if(t.length===0){e.length===1?void p.window.showInformationMessage("The workspace already contains an ESLint configuration file."):void p.window.showInformationMessage("All workspace folders already contain an ESLint configuration file.");return}void Du(t,"Select a workspace folder to generate a ESLint configuration for").then(async r=>{if(!!r){let n=p.Uri.parse(r.uri).fsPath,i=await p.workspace.createTerminal({name:"ESLint init",cwd:n}),s=await kn(n);i.sendText(`${s} --init`),i.show()}})}var Dt,En=new Set;function pt(e){let t=p.workspace.getConfiguration("eslint",e.uri);if(!t.get("enable",!0))return de.off;let r=e.languageId,n=t.get("validate");if(Array.isArray(n))for(let c of n){if(we.string(c)&&c===r)return de.on;if(Xr.is(c)&&c.language===r)return de.on}let i=e.uri.toString();if(En.has(i))return de.off;let s=t.get("probe");if(Array.isArray(s)){for(let c of s)if(c===r)return de.probe}return de.off}function Ou(e){return!e||!Array.isArray(e)?[]:e.map(t=>{if(typeof t.severity=="string"&&typeof t.rule=="string")return{severity:t.severity,rule:t.rule}}).filter(t=>!!t)}function ju(){let e=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],t=["--debug","--debug-brk","--inspect","--inspect-brk"],r=process.execArgv;return r?r.some(n=>e.some(i=>n.startsWith(i))||t.some(i=>n===i)):!1}function ls(e){function t(g){n||pt(g)!==de.off&&(i.dispose(),s.dispose(),n=!0,ds(e))}function r(){if(!n){for(let g of p.workspace.textDocuments)if(pt(g)!==de.off){i.dispose(),s.dispose(),n=!0,ds(e);return}}}let n=!1,i=p.workspace.onDidOpenTextDocument(t),s=p.workspace.onDidChangeConfiguration(r),c=async()=>{let g=await p.workspace.nvim.call("bufnr",["%"]),v=p.workspace.getDocument(g);p.workspace.getConfiguration("eslint",v?v.uri:void 0).get("enable",!0)?void p.window.showInformationMessage("ESLint is not running. By default only TypeScript and JavaScript files are validated. If you want to validate other file types please specify them in the 'eslint.probe' setting."):void p.window.showInformationMessage("ESLint is not running because the deprecated setting 'eslint.enable' is set to false. Remove the setting and use the extension disablement feature.")};Dt=[p.commands.registerCommand("eslint.executeAutofix",c),p.commands.registerCommand("eslint.showOutputChannel",c),p.commands.registerCommand("eslint.restart",c)],e.subscriptions.push(p.commands.registerCommand("eslint.createConfig",Nu)),e.subscriptions.push(new as),r()}function ds(e){var Ot,sn,an,cn;let t=p.window.createStatusBarItem(0);e.subscriptions.push(t);let r,n="ESLint server is starting.",i="ESLint server is running.",s="ESLint server stopped.";t.text="ESLint";let c=new Map;function g(f){c.set(f.uri,f.state),v(f.uri)}function v(f){let m=function(){var B;return r===!1?3:(B=f!==void 0?c.get(f):void 0)!=null?B:1}(),w="ESLint";switch(m){case 1:w="";break;case 2:w="Eslint warning";break;case 3:w="Eslint error";break;default:w=""}t.text=r===void 0?n:w,p.workspace.getConfiguration("eslint").get("alwaysShowStatus",!1)||m!==1?t.show():t.hide()}function x(f,m,w){return Array.isArray(f)?f.filter(q=>typeof q===m):typeof f!==m?w:f}let O=e.asAbsolutePath("lib/server.js"),F=p.workspace.getConfiguration("eslint"),G=x((Ot=F.get("debug",!1))!=null?Ot:!1,"boolean",!1),P=x((sn=F.get("runtime",null))!=null?sn:void 0,"string",void 0),ye=x((an=F.get("execArgv",null))!=null?an:void 0,"string",void 0),le=x((cn=F.get("nodeEnv",null))!=null?cn:void 0,"string",void 0),V;G&&(V=V||{},V.DEBUG="eslint:*,-eslint:code-path"),le!==void 0&&(V=V||{},V.NODE_ENV=le);let Pe=["--nolazy","--inspect=6011"],J={run:{module:O,transport:p.TransportKind.ipc,runtime:P,options:{execArgv:ye,cwd:process.cwd(),env:V}},debug:{module:O,transport:p.TransportKind.ipc,runtime:P,options:{execArgv:ye!==void 0?ye.concat(Pe):Pe,cwd:process.cwd(),env:V}}},xe,W=!1,Ne={scheme:"file",pattern:"**/package.json"},Nt={scheme:"file",pattern:"**/.eslintr{c.js,c.yaml,c.yml,c,c.json}"},ve=new Map,rn=new Set([ce.CodeActionKind.Source,ce.CodeActionKind.SourceFixAll,`${ce.CodeActionKind.SourceFixAll}.eslint`,ce.CodeActionKind.QuickFix]),on={documentSelector:[{scheme:"file"},{scheme:"untitled"}],diagnosticCollectionName:"eslint",revealOutputChannelOn:p.RevealOutputChannelOn.Never,initializationOptions:{},progressOnInitialization:!0,synchronize:{fileEvents:[p.workspace.createFileSystemWatcher("**/.eslintr{c.js,c.yaml,c.yml,c,c.json}"),p.workspace.createFileSystemWatcher("**/.eslintignore"),p.workspace.createFileSystemWatcher("**/package.json")]},initializationFailedHandler:f=>(C.error("Server initialization failed.",f),C.outputChannel.show(!0),!1),errorHandler:{error:(f,m,w)=>xe.error(f,m,w),closed:()=>W?p.CloseAction.DoNotRestart:xe.closed()},middleware:{didOpen:async(f,m)=>{if(p.workspace.match([Ne],f)||p.workspace.match([Nt],f)||pt(f)!==de.off){let w=m(f);return ve.set(f.uri.toString(),f),w}},didChange:async(f,m)=>{if(ve.has(f.textDocument.uri.toString()))return m(f)},willSave:async(f,m)=>{if(ve.has(f.document.uri.toString()))return m(f)},willSaveWaitUntil:(f,m)=>ve.has(f.document.uri.toString())?m(f):Promise.resolve([]),didSave:async(f,m)=>{if(ve.has(f.uri.toString()))return m(f)},didClose:async(f,m)=>{let w=f.uri.toString();if(ve.has(w))return ve.delete(w),m(f)},provideCodeActions:(f,m,w,q,B)=>{if(!ve.has(f.uri.toString()))return[];if(w.only!==void 0&&!rn.has(w.only[0]))return[];if(w.only===void 0&&(!w.diagnostics||w.diagnostics.length===0))return[];let fe=[];for(let M of w.diagnostics)M.source==="eslint"&&fe.push(M);if(w.only===void 0&&fe.length===0)return[];let Ae=Object.assign({},w,{diagnostics:fe});return B(f,m,Ae,q)},workspace:{didChangeWatchedFile:(f,m)=>(En.clear(),m(f)),didChangeConfiguration:async(f,m)=>m(f),configuration:async(f,m,w)=>{var B;if(f.items===void 0)return[];let q=[];for(let fe of f.items){if(fe.section||!fe.scopeUri){q.push(null);continue}let Ae=p.Uri.parse(fe.scopeUri),M=p.workspace.getConfiguration("eslint",Ae.fsPath),Te=Ae.scheme==="untitled"?p.workspace.workspaceFolders!==void 0?p.workspace.workspaceFolders[0]:void 0:p.workspace.getWorkspaceFolder(Ae.fsPath),pe={validate:de.off,packageManager:M.get("packageManager","npm"),useESLintClass:M.get("useESLintClass",!1),codeActionOnSave:{enable:!1,mode:tt.all},format:!1,quiet:M.get("quiet",!1),onIgnoredFiles:ft.from(M.get("onIgnoredFiles",ft.off)),options:M.get("options",{}),rulesCustomizations:Ou(M.get("rules.customizations")),run:M.get("run","onType"),nodePath:(B=M.get("nodePath",void 0))!=null?B:null,workingDirectory:void 0,workspaceFolder:void 0,codeAction:{disableRuleComment:M.get("codeAction.disableRuleComment",{enable:!0,location:"separateLine"}),showDocumentation:M.get("codeAction.showDocumentation",{enable:!0})}},he=ve.get(fe.scopeUri);if(he===void 0){q.push(pe);continue}M.get("enabled",!0)&&(pe.validate=pt(he)),pe.validate!==de.off&&(pe.format=!!M.get("format.enable",!1),pe.codeActionOnSave.enable=!!M.get("autoFixOnSave",!1),pe.codeActionOnSave.mode=tt.from(M.get("codeActionsOnSave.mode",tt.all)),pe.codeActionOnSave.rules=Kr.from(M.get("codeActionsOnSave.rules",null))),Te!==void 0&&(pe.workspaceFolder={name:Te.name,uri:Te.uri});let un=M.get("workingDirectories",void 0);if(Array.isArray(un)){let Oe,ht=Te&&p.Uri.parse(Te.uri).scheme==="file"?p.Uri.parse(Te.uri).fsPath:void 0;for(let ie of un){let Y,oe,rt=!1;if(we.string(ie))Y=ie;else if(Gr.is(ie))Y=ie.directory,rt=!ie.changeProcessCWD;else if(Yr.is(ie))Y=ie.directory,ie["!cwd"]!==void 0&&(rt=ie["!cwd"]);else if(Zr.is(ie))oe=ie.pattern,ie["!cwd"]!==void 0&&(rt=ie["!cwd"]);else if(Sn.is(ie)){Oe=ie;continue}let Je;if(Y!==void 0||oe!==void 0){let dn=p.Uri.parse(he.uri),je=dn.scheme==="file"?dn.fsPath:void 0;if(je!==void 0){if(Y!==void 0)Y=is(Y),!Fe.default.isAbsolute(Y)&&ht!==void 0&&(Y=Fe.default.join(ht,Y)),Y.charAt(Y.length-1)!==Fe.default.sep&&(Y=Y+Fe.default.sep),je.startsWith(Y)&&(Je=Y);else if(oe!==void 0&&oe.length>0){!Fe.default.posix.isAbsolute(oe)&&ht!==void 0&&(oe=Fe.default.posix.join(os(ht),oe)),oe.charAt(oe.length-1)!==Fe.default.posix.sep&&(oe=oe+Fe.default.posix.sep);let Qe=rs(oe);if(Qe!==void 0){let jt=Qe.exec(je);jt!==null&&jt.length>0&&(Je=jt[0])}}}}Je!==void 0&&(Oe===void 0||Sn.is(Oe)?Oe={directory:Je,"!cwd":rt}:Oe.directory.length<Je.length&&(Oe.directory=Je,Oe["!cwd"]=rt))}pe.workingDirectory=Oe}q.push(pe)}return q}}}},C;try{C=new p.LanguageClient("ESLint",J,on)}catch(f){void p.window.showErrorMessage("The ESLint extension couldn't be started. See the ESLint output channel for details.");return}p.workspace.registerAutocmd({request:!0,event:"BufWritePre",arglist:["+expand('<abuf>')"],callback:async f=>{let m=p.workspace.getDocument(f);if(!(!m||!m.attached)&&(pt(m.textDocument)!=de.off&&p.workspace.getConfiguration("eslint",m.uri).get("autoFixOnSave",!1))){let q={textDocument:{uri:m.uri},range:p.Range.create(0,0,m.textDocument.lineCount,0),context:{only:[`${ce.CodeActionKind.SourceFixAll}.eslint`],diagnostics:[]}},B=await Promise.resolve(C.sendRequest(ce.CodeActionRequest.type.method,q));B&&Array.isArray(B)&&(ce.CodeAction.is(B[0])&&await p.workspace.applyEdit(B[0].edit))}}}),p.workspace.onDidChangeConfiguration(()=>{En.clear();for(let f of ve.values())if(pt(f)===de.off)try{let m=C.getFeature(ce.DidCloseTextDocumentNotification.method).getProvider(f);m==null||m.send(f)}catch(m){}for(let f of p.workspace.textDocuments)if(!ve.has(f.uri.toString())&&pt(f)!==de.off)try{let m=C.getFeature(ce.DidOpenTextDocumentNotification.method).getProvider(f);m==null||m.send(f)}catch(m){}}),xe=C.createDefaultErrorHandler(),C.onDidChangeState(f=>{f.newState===p.State.Starting?(C.info("ESLint server is starting"),r=void 0):f.newState===p.State.Running?(C.info(i),r=!0):(C.info(s),r=!1),v(void 0)});let nt=()=>{C.onNotification(oi.type,()=>{C.outputChannel.show()}),C.onNotification(ei.type,f=>{g(f)}),C.onNotification(Eu,f=>{W=!0,C.error(`Server process exited with code ${f[0]}. This usually indicates a misconfigured ESLint setup.`,f[1]),void p.window.showErrorMessage("ESLint server shut down itself. See 'ESLint' output channel for details.",{title:"Open Output",id:1}).then(m=>{m!==void 0&&m.id===1&&C.outputChannel.show()})}),C.onRequest(ti.type,f=>{let m=p.Uri.parse(f.document.uri),w=p.workspace.getWorkspaceFolder(f.document.uri),q=m.fsPath;return w?C.warn(["",`No ESLint configuration (e.g .eslintrc) found for file: ${q}`,`File will not be validated. Consider running 'eslint --init' in the workspace folder ${w.name}`,"Alternatively you can disable ESLint by executing the 'Disable ESLint' command."].join(`
`)):C.warn(["",`No ESLint configuration (e.g .eslintrc) found for file: ${q}`,"File will not be validated. Alternatively you can disable ESLint by executing the 'Disable ESLint' command."].join(`
`)),g({uri:f.document.uri,state:3}),{}}),C.onRequest(ni.type,f=>{let m="noESLintMessageShown",w=e.globalState.get(m,{}),q=p.Uri.parse(f.source.uri),B=p.workspace.getWorkspaceFolder(q.toString()),fe=p.workspace.getConfiguration("eslint",q.toString()).get("packageManager","npm"),Ae={npm:"npm install eslint",pnpm:"pnpm install eslint",yarn:"yarn add eslint"},M={npm:"npm install -g eslint",pnpm:"pnpm install -g eslint",yarn:"yarn global add eslint"},Te=fe==="npm",pe={title:"Go to output",id:1};return B?(C.info(["",`Failed to load the ESLint library for the document ${q.fsPath}`,"",`To use ESLint please install eslint by running ${Ae[fe]} in the workspace folder ${B.name}`,`or globally using '${M[fe]}'. You need to reopen the workspace after installing eslint.`,"",Te?"If you are using yarn or pnpm instead of npm set the setting `eslint.packageManager` to either `yarn` or `pnpm`":null,`Alternatively you can disable ESLint for the workspace folder ${B.name} by executing the 'Disable ESLint' command.`].filter(he=>he!==null).join(`
`)),w.workspaces===void 0&&(w.workspaces={}),w.workspaces[B.uri.toString()]||(w.workspaces[B.uri.toString()]=!0,void e.globalState.update(m,w),void p.window.showInformationMessage(`Failed to load the ESLint library for the document ${q.fsPath}. See the output for more information.`,pe).then(he=>{he&&he.id===1&&C.outputChannel.show(!0)}))):(C.info([`Failed to load the ESLint library for the document ${q.fsPath}`,`To use ESLint for single JavaScript file install eslint globally using '${M[fe]}'.`,Te?"If you are using yarn or pnpm instead of npm set the setting `eslint.packageManager` to either `yarn` or `pnpm`":null,"You need to reopen VS Code after installing eslint."].filter(he=>he!==null).join(`
`)),w.global||(w.global=!0,void e.globalState.update(m,w),void p.window.showInformationMessage(`Failed to load the ESLint library for the document ${q.fsPath}. See the output for more information.`,pe).then(he=>{he&&he.id===1&&C.outputChannel.show(!0)}))),{}}),C.onRequest(ri.type,async f=>(await p.commands.executeCommand("vscode.open",p.Uri.parse(f.url)),{})),C.onRequest(ii.type,f=>{var w;En.add(f.textDocument.uri);let m=C.getFeature(ce.DidCloseTextDocumentNotification.method);for(let q of p.workspace.textDocuments)q.uri.toString()===f.textDocument.uri&&((w=m.getProvider(q))==null||w.send(q))})};C.onReady().then(nt).catch(f=>C.error("On ready failed",f)),Dt&&(Dt.forEach(f=>f.dispose()),Dt=void 0),e.subscriptions.push(C.start(),p.events.on("BufEnter",()=>{v(void 0)}),p.workspace.onDidCloseTextDocument(f=>{let m=f.uri.toString();c.delete(m),v(void 0)}),p.commands.registerCommand("eslint.executeAutofix",async()=>{let f=await p.workspace.document;if(!(!f||!f.attached)){let m={uri:f.uri,version:f.version},w={command:"eslint.applyAllFixes",arguments:[m]};await C.onReady(),C.sendRequest(ce.ExecuteCommandRequest.type.method,w).then(void 0,()=>{void p.window.showErrorMessage("Failed to apply ESLint fixes to the document. Please consider opening an issue with steps to reproduce.")})}}),p.commands.registerCommand("eslint.showOutputChannel",async()=>{C.outputChannel.show()}),p.commands.registerCommand("eslint.restart",async()=>{await C.stop();let f=()=>{C.start(),C.onReady().then(nt).catch(m=>C.error("On ready failed",m))};ju()?setTimeout(f,1e3):f()}))}function fs(){Dt&&Dt.forEach(e=>e.dispose())}
