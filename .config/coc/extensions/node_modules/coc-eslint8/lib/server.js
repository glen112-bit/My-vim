var Vu=Object.create,Qn=Object.defineProperty,Gu=Object.getPrototypeOf,Ju=Object.prototype.hasOwnProperty,Ku=Object.getOwnPropertyNames,Xu=Object.getOwnPropertyDescriptor,Wo=t=>Qn(t,"__esModule",{value:!0}),O=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports),Qu=(t,e)=>{Wo(t);for(var n in e)Qn(t,n,{get:e[n],enumerable:!0})},Yu=(t,e,n)=>{if(Wo(t),e&&typeof e=="object"||typeof e=="function")for(let r of Ku(e))!Ju.call(t,r)&&r!=="default"&&Qn(t,r,{get:()=>e[r],enumerable:!(n=Xu(e,r))||n.enumerable});return t},Jt=t=>t&&t.__esModule?t:Yu(Qn(t!=null?Vu(Gu(t)):{},"default",{value:t,enumerable:!0}),t),Yn=O(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.thenable=fe.typedArray=fe.stringArray=fe.array=fe.func=fe.error=fe.number=fe.string=fe.boolean=void 0;function Zu(t){return t===!0||t===!1}fe.boolean=Zu;function Ho(t){return typeof t=="string"||t instanceof String}fe.string=Ho;function ec(t){return typeof t=="number"||t instanceof Number}fe.number=ec;function tc(t){return t instanceof Error}fe.error=tc;function $o(t){return typeof t=="function"}fe.func=$o;function zo(t){return Array.isArray(t)}fe.array=zo;function nc(t){return zo(t)&&t.every(e=>Ho(e))}fe.stringArray=nc;function rc(t,e){return Array.isArray(t)&&t.every(e)}fe.typedArray=rc;function ic(t){return t&&$o(t.then)}fe.thenable=ic}),rt=O(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});var Lr;function Nr(){if(Lr===void 0)throw new Error("No runtime abstraction layer installed");return Lr}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Lr=n}t.install=e})(Nr||(Nr={}));Mr.default=Nr}),Or=O(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.Disposable=void 0;var oc;(function(t){function e(n){return{dispose:n}}t.create=e})(oc=bn.Disposable||(bn.Disposable={}))}),Uo=O(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.AbstractMessageBuffer=void 0;var sc=13,ac=10,uc=`\r
`,Bo=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length!==0){let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let c=this._chunks[n];r=0;t:for(;r<c.length;){switch(c[r]){case sc:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case ac:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=c.byteLength,n++}if(e===4){let o=this._read(i+r),s=new Map,a=this.toString(o,"ascii").split(uc);if(a.length<2)return s;for(let c=0;c<a.length-2;c++){let l=a[c],f=l.indexOf(":");if(f===-1)throw new Error("Message header must separate key and value using :");let p=l.substr(0,f),y=l.substr(f+1).trim();s.set(p,y)}return s}}}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);n.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};Zn.AbstractMessageBuffer=Bo}),Xo=O(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});var cc=rt(),Vo=require("util"),kt=Or(),lc=Uo(),_n=class extends lc.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return _n.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Vo.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};_n.emptyBuffer=Buffer.allocUnsafe(0);var Go=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),kt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),kt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),kt.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),kt.Disposable.create(()=>this.stream.off("data",e))}},Jo=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),kt.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),kt.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),kt.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},Ko=Object.freeze({messageBuffer:Object.freeze({create:t=>new _n(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Vo.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Go(t),asWritableStream:t=>new Jo(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){return setTimeout(t,e,...n)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function Ir(){return Ko}(function(t){function e(){cc.default.install(Ko)}t.install=e})(Ir||(Ir={}));Fr.default=Ir}),Kt=O(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.stringArray=Se.array=Se.func=Se.error=Se.number=Se.string=Se.boolean=void 0;function dc(t){return t===!0||t===!1}Se.boolean=dc;function Qo(t){return typeof t=="string"||t instanceof String}Se.string=Qo;function fc(t){return typeof t=="number"||t instanceof Number}Se.number=fc;function hc(t){return t instanceof Error}Se.error=hc;function gc(t){return typeof t=="function"}Se.func=gc;function Yo(t){return Array.isArray(t)}Se.array=Yo;function pc(t){return Yo(t)&&t.every(e=>Qo(e))}Se.stringArray=pc}),Ar=O(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.isResponseMessage=L.isNotificationMessage=L.isRequestMessage=L.NotificationType9=L.NotificationType8=L.NotificationType7=L.NotificationType6=L.NotificationType5=L.NotificationType4=L.NotificationType3=L.NotificationType2=L.NotificationType1=L.NotificationType0=L.NotificationType=L.RequestType9=L.RequestType8=L.RequestType7=L.RequestType6=L.RequestType5=L.RequestType4=L.RequestType3=L.RequestType2=L.RequestType1=L.RequestType=L.RequestType0=L.AbstractMessageSignature=L.ParameterStructures=L.ResponseError=L.ErrorCodes=void 0;var Mt=Kt(),Zo;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(Zo=L.ErrorCodes||(L.ErrorCodes={}));var er=class extends Error{constructor(e,n,r){super(n);this.code=Mt.number(e)?e:Zo.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,er.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};L.ResponseError=er;var we=class{constructor(e){this.kind=e}static is(e){return e===we.auto||e===we.byName||e===we.byPosition}toString(){return this.kind}};L.ParameterStructures=we;we.auto=new we("auto");we.byPosition=new we("byPosition");we.byName=new we("byName");var se=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return we.auto}};L.AbstractMessageSignature=se;var es=class extends se{constructor(e){super(e,0)}};L.RequestType0=es;var ts=class extends se{constructor(e,n=we.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};L.RequestType=ts;var ns=class extends se{constructor(e,n=we.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};L.RequestType1=ns;var rs=class extends se{constructor(e){super(e,2)}};L.RequestType2=rs;var is=class extends se{constructor(e){super(e,3)}};L.RequestType3=is;var os=class extends se{constructor(e){super(e,4)}};L.RequestType4=os;var ss=class extends se{constructor(e){super(e,5)}};L.RequestType5=ss;var as=class extends se{constructor(e){super(e,6)}};L.RequestType6=as;var us=class extends se{constructor(e){super(e,7)}};L.RequestType7=us;var cs=class extends se{constructor(e){super(e,8)}};L.RequestType8=cs;var ls=class extends se{constructor(e){super(e,9)}};L.RequestType9=ls;var ds=class extends se{constructor(e,n=we.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};L.NotificationType=ds;var fs=class extends se{constructor(e){super(e,0)}};L.NotificationType0=fs;var hs=class extends se{constructor(e,n=we.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};L.NotificationType1=hs;var gs=class extends se{constructor(e){super(e,2)}};L.NotificationType2=gs;var ps=class extends se{constructor(e){super(e,3)}};L.NotificationType3=ps;var ms=class extends se{constructor(e){super(e,4)}};L.NotificationType4=ms;var ys=class extends se{constructor(e){super(e,5)}};L.NotificationType5=ys;var vs=class extends se{constructor(e){super(e,6)}};L.NotificationType6=vs;var bs=class extends se{constructor(e){super(e,7)}};L.NotificationType7=bs;var _s=class extends se{constructor(e){super(e,8)}};L.NotificationType8=_s;var Rs=class extends se{constructor(e){super(e,9)}};L.NotificationType9=Rs;function mc(t){let e=t;return e&&Mt.string(e.method)&&(Mt.string(e.id)||Mt.number(e.id))}L.isRequestMessage=mc;function yc(t){let e=t;return e&&Mt.string(e.method)&&t.id===void 0}L.isNotificationMessage=yc;function vc(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(Mt.string(e.id)||Mt.number(e.id)||e.id===null)}L.isResponseMessage=vc}),Xt=O(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Emitter=Lt.Event=void 0;var bc=rt(),_c;(function(t){let e={dispose(){}};t.None=function(){return e}})(_c=Lt.Event||(Lt.Event={}));var ws=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!!this._callbacks){let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{n.push(r[o].apply(i[o],e))}catch(a){bc.default().console.error(a)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Rn=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new ws),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=Rn._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Lt.Emitter=Rn;Rn._noop=function(){}}),$r=O(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.CancellationTokenSource=Nt.CancellationToken=void 0;var Cs=rt(),Rc=Kt(),jr=Xt(),Wr;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:jr.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:jr.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Rc.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(Wr=Nt.CancellationToken||(Nt.CancellationToken={}));var wc=Object.freeze(function(t,e){let n=Cs.default().timer.setTimeout(t.bind(e),0);return{dispose(){Cs.default().timer.clearTimeout(n)}}}),Hr=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?wc:(this._emitter||(this._emitter=new jr.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},xs=class{get token(){return this._token||(this._token=new Hr),this._token}cancel(){this._token?this._token.cancel():this._token=Wr.Cancelled}dispose(){this._token?this._token instanceof Hr&&this._token.dispose():this._token=Wr.None}};Nt.CancellationTokenSource=xs}),Ss=O(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.ReadableStreamMessageReader=it.AbstractMessageReader=it.MessageReader=void 0;var tr=rt(),Qt=Kt(),zr=Xt(),Cc;(function(t){function e(n){let r=n;return r&&Qt.func(r.listen)&&Qt.func(r.dispose)&&Qt.func(r.onError)&&Qt.func(r.onClose)&&Qt.func(r.onPartialMessage)}t.is=e})(Cc=it.MessageReader||(it.MessageReader={}));var Br=class{constructor(){this.errorEmitter=new zr.Emitter,this.closeEmitter=new zr.Emitter,this.partialMessageEmitter=new zr.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Qt.string(e.message)?e.message:"unknown"}`)}};it.AbstractMessageReader=Br;var Ur;(function(t){function e(n){var r;let i,o,s,a=new Map,c,l=new Map;if(n===void 0||typeof n=="string")i=n!=null?n:"utf-8";else{if(i=(r=n.charset)!==null&&r!==void 0?r:"utf-8",n.contentDecoder!==void 0&&(s=n.contentDecoder,a.set(s.name,s)),n.contentDecoders!==void 0)for(let f of n.contentDecoders)a.set(f.name,f);if(n.contentTypeDecoder!==void 0&&(c=n.contentTypeDecoder,l.set(c.name,c)),n.contentTypeDecoders!==void 0)for(let f of n.contentTypeDecoders)l.set(f.name,f)}return c===void 0&&(c=tr.default().applicationJson.decoder,l.set(c.name,c)),{charset:i,contentDecoder:s,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}t.fromOptions=e})(Ur||(Ur={}));var Ps=class extends Br{constructor(e,n){super();this.readable=e,this.options=Ur.fromOptions(n),this.buffer=tr.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let o=i.get("Content-Length");if(!o)throw new Error("Header must provide a Content-Length property.");let s=parseInt(o);if(isNaN(s))throw new Error("Content-Length value must be a number.");this.nextMessageLength=s}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(o=>{this.callback(o)},o=>{this.fireError(o)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(tr.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){(this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0))&&(this.partialMessageTimer=tr.default().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};it.ReadableStreamMessageReader=Ps}),Ts=O(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.Semaphore=void 0;var xc=rt(),Es=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||xc.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(!(this._waiting.length===0||this._active===this._capacity)){let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}}};nr.Semaphore=Es}),Ls=O(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.WriteableStreamMessageWriter=ot.AbstractMessageWriter=ot.MessageWriter=void 0;var Ds=rt(),wn=Kt(),Pc=Ts(),qs=Xt(),Sc="Content-Length: ",ks=`\r
`,Ec;(function(t){function e(n){let r=n;return r&&wn.func(r.dispose)&&wn.func(r.onClose)&&wn.func(r.onError)&&wn.func(r.write)}t.is=e})(Ec=ot.MessageWriter||(ot.MessageWriter={}));var Vr=class{constructor(){this.errorEmitter=new qs.Emitter,this.closeEmitter=new qs.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${wn.string(e.message)?e.message:"unknown"}`)}};ot.AbstractMessageWriter=Vr;var Gr;(function(t){function e(n){var r,i;return n===void 0||typeof n=="string"?{charset:n!=null?n:"utf-8",contentTypeEncoder:Ds.default().applicationJson.encoder}:{charset:(r=n.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:(i=n.contentTypeEncoder)!==null&&i!==void 0?i:Ds.default().applicationJson.encoder}}t.fromOptions=e})(Gr||(Gr={}));var Ms=class extends Vr{constructor(e,n){super();this.writable=e,this.options=Gr.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Pc.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Sc,r.byteLength.toString(),ks),i.push(ks),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};ot.WriteableStreamMessageWriter=Ms}),Os=O(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.LRUCache=st.LinkedMap=st.Touch=void 0;var De;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(De=st.Touch||(st.Touch={}));var Jr=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,n=De.None){let r=this._map.get(e);if(!!r)return n!==De.None&&this.touch(r,n),r.value}set(e,n,r=De.None){let i=this._map.get(e);if(i)i.value=n,r!==De.None&&this.touch(i,r);else{i={key:e,value:n,next:void 0,previous:void 0};switch(r){case De.None:this.addItemLast(i);break;case De.First:this.addItemFirst(i);break;case De.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!(!this._head&&!this._tail)){if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(!(e>=this.size)){if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==De.First&&n!==De.Last)){if(n===De.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===De.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};st.LinkedMap=Jr;var Ns=class extends Jr{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=De.AsNew){return super.get(e,n)}peek(e){return super.get(e,De.None)}set(e,n){return super.set(e,n,De.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};st.LRUCache=Ns}),Hs=O(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.createMessageConnection=j.ConnectionOptions=j.CancellationStrategy=j.CancellationSenderStrategy=j.CancellationReceiverStrategy=j.ConnectionStrategy=j.ConnectionError=j.ConnectionErrors=j.LogTraceNotification=j.SetTraceNotification=j.TraceFormat=j.Trace=j.NullLogger=j.ProgressType=void 0;var Fs=rt(),be=Kt(),A=Ar(),Is=Os(),Cn=Xt(),Kr=$r(),xn;(function(t){t.type=new A.NotificationType("$/cancelRequest")})(xn||(xn={}));var rr;(function(t){t.type=new A.NotificationType("$/progress")})(rr||(rr={}));var As=class{constructor(){}};j.ProgressType=As;var Xr;(function(t){function e(n){return be.func(n)}t.is=e})(Xr||(Xr={}));j.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var he;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(he=j.Trace||(j.Trace={}));(function(t){function e(r){if(!be.string(r))return t.Off;r=r.toLowerCase();switch(r){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(he=j.Trace||(j.Trace={}));var Be;(function(t){t.Text="text",t.JSON="json"})(Be=j.TraceFormat||(j.TraceFormat={}));(function(t){function e(n){return n=n.toLowerCase(),n==="json"?t.JSON:t.Text}t.fromString=e})(Be=j.TraceFormat||(j.TraceFormat={}));var js;(function(t){t.type=new A.NotificationType("$/setTrace")})(js=j.SetTraceNotification||(j.SetTraceNotification={}));var Qr;(function(t){t.type=new A.NotificationType("$/logTrace")})(Qr=j.LogTraceNotification||(j.LogTraceNotification={}));var ir;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(ir=j.ConnectionErrors||(j.ConnectionErrors={}));var Ot=class extends Error{constructor(e,n){super(n);this.code=e,Object.setPrototypeOf(this,Ot.prototype)}};j.ConnectionError=Ot;var Ws;(function(t){function e(n){let r=n;return r&&be.func(r.cancelUndispatched)}t.is=e})(Ws=j.ConnectionStrategy||(j.ConnectionStrategy={}));var Yr;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Kr.CancellationTokenSource}});function e(n){let r=n;return r&&be.func(r.createCancellationTokenSource)}t.is=e})(Yr=j.CancellationReceiverStrategy||(j.CancellationReceiverStrategy={}));var Zr;(function(t){t.Message=Object.freeze({sendCancellation(n,r){n.sendNotification(xn.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&be.func(r.sendCancellation)&&be.func(r.cleanup)}t.is=e})(Zr=j.CancellationSenderStrategy||(j.CancellationSenderStrategy={}));var ei;(function(t){t.Message=Object.freeze({receiver:Yr.Message,sender:Zr.Message});function e(n){let r=n;return r&&Yr.is(r.receiver)&&Zr.is(r.sender)}t.is=e})(ei=j.CancellationStrategy||(j.CancellationStrategy={}));var Tc;(function(t){function e(n){let r=n;return r&&(ei.is(r.cancellationStrategy)||Ws.is(r.connectionStrategy))}t.is=e})(Tc=j.ConnectionOptions||(j.ConnectionOptions={}));var Ue;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Ue||(Ue={}));function Dc(t,e,n,r){let i=n!==void 0?n:j.NullLogger,o=0,s=0,a=0,c="2.0",l,f=Object.create(null),p,y=Object.create(null),v=new Map,_,S=new Is.LinkedMap,k=Object.create(null),g=Object.create(null),h=he.Off,m=Be.Text,E,N=Ue.New,K=new Cn.Emitter,ne=new Cn.Emitter,B=new Cn.Emitter,de=new Cn.Emitter,ye=new Cn.Emitter,V=r&&r.cancellationStrategy?r.cancellationStrategy:ei.Message;function I(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function $e(d){return d===null?"res-unknown-"+(++a).toString():"res-"+d.toString()}function Kn(){return"not-"+(++s).toString()}function nt(d,w){A.isRequestMessage(w)?d.set(I(w.id),w):A.isResponseMessage(w)?d.set($e(w.id),w):d.set(Kn(),w)}function T(d){}function R(){return N===Ue.Listening}function P(){return N===Ue.Closed}function M(){return N===Ue.Disposed}function J(){(N===Ue.New||N===Ue.Listening)&&(N=Ue.Closed,ne.fire(void 0))}function U(d){K.fire([d,void 0,void 0])}function G(d){K.fire(d)}t.onClose(J),t.onError(U),e.onClose(J),e.onError(G);function oe(){_||S.size===0||(_=Fs.default().timer.setImmediate(()=>{_=void 0,Pe()}))}function Pe(){if(S.size!==0){let d=S.shift();try{A.isRequestMessage(d)?Ut(d):A.isNotificationMessage(d)?Iu(d):A.isResponseMessage(d)?mt(d):Au(d)}finally{oe()}}}let ze=d=>{try{if(A.isNotificationMessage(d)&&d.method===xn.type.method){let w=I(d.params.id),D=S.get(w);if(A.isRequestMessage(D)){let F=r==null?void 0:r.connectionStrategy,Q=F&&F.cancelUndispatched?F.cancelUndispatched(D,T):T(D);if(Q&&(Q.error!==void 0||Q.result!==void 0)){S.delete(w),Q.id=D.id,Xn(Q,d.method,Date.now()),e.write(Q);return}}}nt(S,d)}finally{oe()}};function Ut(d){if(!M()){function w(Z,le,ee){let me={jsonrpc:c,id:d.id};Z instanceof A.ResponseError?me.error=Z.toJson():me.result=Z===void 0?null:Z,Xn(me,le,ee),e.write(me)}function D(Z,le,ee){let me={jsonrpc:c,id:d.id,error:Z.toJson()};Xn(me,le,ee),e.write(me)}function F(Z,le,ee){Z===void 0&&(Z=null);let me={jsonrpc:c,id:d.id,result:Z};Xn(me,le,ee),e.write(me)}Hu(d);let Q=f[d.method],ce,pe;Q&&(ce=Q.type,pe=Q.handler);let ve=Date.now();if(pe||l){let Z=String(d.id),le=V.receiver.createCancellationTokenSource(Z);g[Z]=le;try{let ee;if(pe)if(d.params===void 0){if(ce!==void 0&&ce.numberOfParams!==0){D(new A.ResponseError(A.ErrorCodes.InvalidParams,`Request ${d.method} defines ${ce.numberOfParams} params but recevied none.`),d.method,ve);return}ee=pe(le.token)}else if(Array.isArray(d.params)){if(ce!==void 0&&ce.parameterStructures===A.ParameterStructures.byName){D(new A.ResponseError(A.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,ve);return}ee=pe(...d.params,le.token)}else{if(ce!==void 0&&ce.parameterStructures===A.ParameterStructures.byPosition){D(new A.ResponseError(A.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,ve);return}ee=pe(d.params,le.token)}else l&&(ee=l(d.method,d.params,le.token));let me=ee;ee?me.then?me.then(Le=>{delete g[Z],w(Le,d.method,ve)},Le=>{delete g[Z],Le instanceof A.ResponseError?D(Le,d.method,ve):Le&&be.string(Le.message)?D(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Le.message}`),d.method,ve):D(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,ve)}):(delete g[Z],w(ee,d.method,ve)):(delete g[Z],F(ee,d.method,ve))}catch(ee){delete g[Z],ee instanceof A.ResponseError?w(ee,d.method,ve):ee&&be.string(ee.message)?D(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${ee.message}`),d.method,ve):D(new A.ResponseError(A.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,ve)}}else D(new A.ResponseError(A.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,ve)}}function mt(d){if(!M())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let w=String(d.id),D=k[w];if(zu(d,D),D){delete k[w];try{if(d.error){let F=d.error;D.reject(new A.ResponseError(F.code,F.message,F.data))}else if(d.result!==void 0)D.resolve(d.result);else throw new Error("Should never happen.")}catch(F){F.message?i.error(`Response handler '${D.method}' failed with message: ${F.message}`):i.error(`Response handler '${D.method}' failed unexpectedly.`)}}}}function Iu(d){if(!M()){let w,D;if(d.method===xn.type.method)D=F=>{let Q=F.id,ce=g[String(Q)];ce&&ce.cancel()};else{let F=y[d.method];F&&(D=F.handler,w=F.type)}if(D||p)try{$u(d),D?d.params===void 0?(w!==void 0&&(w.numberOfParams!==0&&w.parameterStructures!==A.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${w.numberOfParams} params but recevied none.`)),D()):Array.isArray(d.params)?(w!==void 0&&(w.parameterStructures===A.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),w.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${w.numberOfParams} params but received ${d.params.length} argumennts`)),D(...d.params)):(w!==void 0&&w.parameterStructures===A.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),D(d.params)):p&&p(d.method,d.params)}catch(F){F.message?i.error(`Notification handler '${d.method}' failed with message: ${F.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else B.fire(d)}}function Au(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let w=d;if(be.string(w.id)||be.number(w.id)){let D=String(w.id),F=k[D];F&&F.reject(new Error("The received response has neither a result nor an error property."))}}function ju(d){if(!(h===he.Off||!E))if(m===Be.Text){let w;h===he.Verbose&&d.params&&(w=`Params: ${JSON.stringify(d.params,null,4)}

`),E.log(`Sending request '${d.method} - (${d.id})'.`,w)}else Vt("send-request",d)}function Wu(d){if(!(h===he.Off||!E))if(m===Be.Text){let w;h===he.Verbose&&(d.params?w=`Params: ${JSON.stringify(d.params,null,4)}

`:w=`No parameters provided.

`),E.log(`Sending notification '${d.method}'.`,w)}else Vt("send-notification",d)}function Xn(d,w,D){if(!(h===he.Off||!E))if(m===Be.Text){let F;h===he.Verbose&&(d.error&&d.error.data?F=`Error data: ${JSON.stringify(d.error.data,null,4)}

`:d.result?F=`Result: ${JSON.stringify(d.result,null,4)}

`:d.error===void 0&&(F=`No result returned.

`)),E.log(`Sending response '${w} - (${d.id})'. Processing request took ${Date.now()-D}ms`,F)}else Vt("send-response",d)}function Hu(d){if(!(h===he.Off||!E))if(m===Be.Text){let w;h===he.Verbose&&d.params&&(w=`Params: ${JSON.stringify(d.params,null,4)}

`),E.log(`Received request '${d.method} - (${d.id})'.`,w)}else Vt("receive-request",d)}function $u(d){if(!(h===he.Off||!E||d.method===Qr.type.method))if(m===Be.Text){let w;h===he.Verbose&&(d.params?w=`Params: ${JSON.stringify(d.params,null,4)}

`:w=`No parameters provided.

`),E.log(`Received notification '${d.method}'.`,w)}else Vt("receive-notification",d)}function zu(d,w){if(!(h===he.Off||!E))if(m===Be.Text){let D;if(h===he.Verbose&&(d.error&&d.error.data?D=`Error data: ${JSON.stringify(d.error.data,null,4)}

`:d.result?D=`Result: ${JSON.stringify(d.result,null,4)}

`:d.error===void 0&&(D=`No result returned.

`)),w){let F=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";E.log(`Received response '${w.method} - (${d.id})' in ${Date.now()-w.timerStart}ms.${F}`,D)}else E.log(`Received response ${d.id} without active response promise.`,D)}else Vt("receive-response",d)}function Vt(d,w){if(!(!E||h===he.Off)){let D={isLSPMessage:!0,type:d,message:w,timestamp:Date.now()};E.log(D)}}function yn(){if(P())throw new Ot(ir.Closed,"Connection is closed.");if(M())throw new Ot(ir.Disposed,"Connection is disposed.")}function Bu(){if(R())throw new Ot(ir.AlreadyListening,"Connection is already listening")}function Uu(){if(!R())throw new Error("Call listen() first.")}function vn(d){return d===void 0?null:d}function Io(d){if(d!==null)return d}function Ao(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function kr(d,w){switch(d){case A.ParameterStructures.auto:if(Ao(w))return Io(w);return[vn(w)];break;case A.ParameterStructures.byName:if(!Ao(w))throw new Error("Recevied parameters by name but param is not an object literal.");return Io(w);case A.ParameterStructures.byPosition:return[vn(w)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function jo(d,w){let D,F=d.numberOfParams;switch(F){case 0:D=void 0;break;case 1:D=kr(d.parameterStructures,w[0]);break;default:D=[];for(let Q=0;Q<w.length&&Q<F;Q++)D.push(vn(w[Q]));if(w.length<F)for(let Q=w.length;Q<F;Q++)D.push(null);break}return D}let Gt={sendNotification:(d,...w)=>{yn();let D,F;if(be.string(d)){D=d;let ce=w[0],pe=0,ve=A.ParameterStructures.auto;A.ParameterStructures.is(ce)&&(pe=1,ve=ce);let Z=w.length,le=Z-pe;switch(le){case 0:F=void 0;break;case 1:F=kr(ve,w[pe]);break;default:if(ve===A.ParameterStructures.byName)throw new Error(`Recevied ${le} parameters for 'by Name' notification parameter structure.`);F=w.slice(pe,Z).map(ee=>vn(ee));break}}else{let ce=w;D=d.method,F=jo(d,ce)}let Q={jsonrpc:c,method:D,params:F};Wu(Q),e.write(Q)},onNotification:(d,w)=>{yn();let D;return be.func(d)?p=d:w&&(be.string(d)?(D=d,y[d]={type:void 0,handler:w}):(D=d.method,y[d.method]={type:d,handler:w})),{dispose:()=>{D!==void 0?delete y[D]:p=void 0}}},onProgress:(d,w,D)=>{if(v.has(w))throw new Error(`Progress handler for token ${w} already registered`);return v.set(w,D),{dispose:()=>{v.delete(w)}}},sendProgress:(d,w,D)=>{Gt.sendNotification(rr.type,{token:w,value:D})},onUnhandledProgress:de.event,sendRequest:(d,...w)=>{yn(),Uu();let D,F,Q;if(be.string(d)){D=d;let Z=w[0],le=w[w.length-1],ee=0,me=A.ParameterStructures.auto;A.ParameterStructures.is(Z)&&(ee=1,me=Z);let Le=w.length;Kr.CancellationToken.is(le)&&(Le=Le-1,Q=le);let qt=Le-ee;switch(qt){case 0:F=void 0;break;case 1:F=kr(me,w[ee]);break;default:if(me===A.ParameterStructures.byName)throw new Error(`Recevied ${qt} parameters for 'by Name' request parameter structure.`);F=w.slice(ee,Le).map(yt=>vn(yt));break}}else{let Z=w;D=d.method,F=jo(d,Z);let le=d.numberOfParams;Q=Kr.CancellationToken.is(Z[le])?Z[le]:void 0}let ce=o++,pe;return Q&&(pe=Q.onCancellationRequested(()=>{V.sender.sendCancellation(Gt,ce)})),new Promise((Z,le)=>{let ee={jsonrpc:c,id:ce,method:D,params:F},me=yt=>{Z(yt),V.sender.cleanup(ce),pe==null||pe.dispose()},Le=yt=>{le(yt),V.sender.cleanup(ce),pe==null||pe.dispose()},qt={method:D,timerStart:Date.now(),resolve:me,reject:Le};ju(ee);try{e.write(ee)}catch(yt){qt.reject(new A.ResponseError(A.ErrorCodes.MessageWriteError,yt.message?yt.message:"Unknown reason")),qt=null}qt&&(k[String(ce)]=qt)})},onRequest:(d,w)=>{yn();let D=null;return Xr.is(d)?(D=void 0,l=d):be.string(d)?(D=null,w!==void 0&&(D=d,f[d]={handler:w,type:void 0})):w!==void 0&&(D=d.method,f[d.method]={type:d,handler:w}),{dispose:()=>{D!==null&&(D!==void 0?delete f[D]:l=void 0)}}},trace:(d,w,D)=>{let F=!1,Q=Be.Text;D!==void 0&&(be.boolean(D)?F=D:(F=D.sendNotification||!1,Q=D.traceFormat||Be.Text)),h=d,m=Q,h===he.Off?E=void 0:E=w,F&&!P()&&!M()&&Gt.sendNotification(js.type,{value:he.toString(d)})},onError:K.event,onClose:ne.event,onUnhandledNotification:B.event,onDispose:ye.event,end:()=>{e.end()},dispose:()=>{if(!M()){N=Ue.Disposed,ye.fire(void 0);let d=new Error("Connection got disposed.");Object.keys(k).forEach(w=>{k[w].reject(d)}),k=Object.create(null),g=Object.create(null),S=new Is.LinkedMap,be.func(e.dispose)&&e.dispose(),be.func(t.dispose)&&t.dispose()}},listen:()=>{yn(),Bu(),N=Ue.Listening,t.listen(ze)},inspect:()=>{Fs.default().console.log("inspect")}};return Gt.onNotification(Qr.type,d=>{h===he.Off||!E||E.log(d.message,h===he.Verbose?d.verbose:void 0)}),Gt.onNotification(rr.type,d=>{let w=v.get(d.token);w?w(d.value):de.fire(d)}),Gt}j.createMessageConnection=Dc}),ri=O(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.CancellationSenderStrategy=C.CancellationReceiverStrategy=C.ConnectionError=C.ConnectionErrors=C.LogTraceNotification=C.SetTraceNotification=C.TraceFormat=C.Trace=C.ProgressType=C.createMessageConnection=C.NullLogger=C.ConnectionOptions=C.ConnectionStrategy=C.WriteableStreamMessageWriter=C.AbstractMessageWriter=C.MessageWriter=C.ReadableStreamMessageReader=C.AbstractMessageReader=C.MessageReader=C.CancellationToken=C.CancellationTokenSource=C.Emitter=C.Event=C.Disposable=C.ParameterStructures=C.NotificationType9=C.NotificationType8=C.NotificationType7=C.NotificationType6=C.NotificationType5=C.NotificationType4=C.NotificationType3=C.NotificationType2=C.NotificationType1=C.NotificationType0=C.NotificationType=C.ErrorCodes=C.ResponseError=C.RequestType9=C.RequestType8=C.RequestType7=C.RequestType6=C.RequestType5=C.RequestType4=C.RequestType3=C.RequestType2=C.RequestType1=C.RequestType0=C.RequestType=C.RAL=void 0;C.CancellationStrategy=void 0;var ie=Ar();Object.defineProperty(C,"RequestType",{enumerable:!0,get:function(){return ie.RequestType}});Object.defineProperty(C,"RequestType0",{enumerable:!0,get:function(){return ie.RequestType0}});Object.defineProperty(C,"RequestType1",{enumerable:!0,get:function(){return ie.RequestType1}});Object.defineProperty(C,"RequestType2",{enumerable:!0,get:function(){return ie.RequestType2}});Object.defineProperty(C,"RequestType3",{enumerable:!0,get:function(){return ie.RequestType3}});Object.defineProperty(C,"RequestType4",{enumerable:!0,get:function(){return ie.RequestType4}});Object.defineProperty(C,"RequestType5",{enumerable:!0,get:function(){return ie.RequestType5}});Object.defineProperty(C,"RequestType6",{enumerable:!0,get:function(){return ie.RequestType6}});Object.defineProperty(C,"RequestType7",{enumerable:!0,get:function(){return ie.RequestType7}});Object.defineProperty(C,"RequestType8",{enumerable:!0,get:function(){return ie.RequestType8}});Object.defineProperty(C,"RequestType9",{enumerable:!0,get:function(){return ie.RequestType9}});Object.defineProperty(C,"ResponseError",{enumerable:!0,get:function(){return ie.ResponseError}});Object.defineProperty(C,"ErrorCodes",{enumerable:!0,get:function(){return ie.ErrorCodes}});Object.defineProperty(C,"NotificationType",{enumerable:!0,get:function(){return ie.NotificationType}});Object.defineProperty(C,"NotificationType0",{enumerable:!0,get:function(){return ie.NotificationType0}});Object.defineProperty(C,"NotificationType1",{enumerable:!0,get:function(){return ie.NotificationType1}});Object.defineProperty(C,"NotificationType2",{enumerable:!0,get:function(){return ie.NotificationType2}});Object.defineProperty(C,"NotificationType3",{enumerable:!0,get:function(){return ie.NotificationType3}});Object.defineProperty(C,"NotificationType4",{enumerable:!0,get:function(){return ie.NotificationType4}});Object.defineProperty(C,"NotificationType5",{enumerable:!0,get:function(){return ie.NotificationType5}});Object.defineProperty(C,"NotificationType6",{enumerable:!0,get:function(){return ie.NotificationType6}});Object.defineProperty(C,"NotificationType7",{enumerable:!0,get:function(){return ie.NotificationType7}});Object.defineProperty(C,"NotificationType8",{enumerable:!0,get:function(){return ie.NotificationType8}});Object.defineProperty(C,"NotificationType9",{enumerable:!0,get:function(){return ie.NotificationType9}});Object.defineProperty(C,"ParameterStructures",{enumerable:!0,get:function(){return ie.ParameterStructures}});var qc=Or();Object.defineProperty(C,"Disposable",{enumerable:!0,get:function(){return qc.Disposable}});var $s=Xt();Object.defineProperty(C,"Event",{enumerable:!0,get:function(){return $s.Event}});Object.defineProperty(C,"Emitter",{enumerable:!0,get:function(){return $s.Emitter}});var zs=$r();Object.defineProperty(C,"CancellationTokenSource",{enumerable:!0,get:function(){return zs.CancellationTokenSource}});Object.defineProperty(C,"CancellationToken",{enumerable:!0,get:function(){return zs.CancellationToken}});var ti=Ss();Object.defineProperty(C,"MessageReader",{enumerable:!0,get:function(){return ti.MessageReader}});Object.defineProperty(C,"AbstractMessageReader",{enumerable:!0,get:function(){return ti.AbstractMessageReader}});Object.defineProperty(C,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return ti.ReadableStreamMessageReader}});var ni=Ls();Object.defineProperty(C,"MessageWriter",{enumerable:!0,get:function(){return ni.MessageWriter}});Object.defineProperty(C,"AbstractMessageWriter",{enumerable:!0,get:function(){return ni.AbstractMessageWriter}});Object.defineProperty(C,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return ni.WriteableStreamMessageWriter}});var Ne=Hs();Object.defineProperty(C,"ConnectionStrategy",{enumerable:!0,get:function(){return Ne.ConnectionStrategy}});Object.defineProperty(C,"ConnectionOptions",{enumerable:!0,get:function(){return Ne.ConnectionOptions}});Object.defineProperty(C,"NullLogger",{enumerable:!0,get:function(){return Ne.NullLogger}});Object.defineProperty(C,"createMessageConnection",{enumerable:!0,get:function(){return Ne.createMessageConnection}});Object.defineProperty(C,"ProgressType",{enumerable:!0,get:function(){return Ne.ProgressType}});Object.defineProperty(C,"Trace",{enumerable:!0,get:function(){return Ne.Trace}});Object.defineProperty(C,"TraceFormat",{enumerable:!0,get:function(){return Ne.TraceFormat}});Object.defineProperty(C,"SetTraceNotification",{enumerable:!0,get:function(){return Ne.SetTraceNotification}});Object.defineProperty(C,"LogTraceNotification",{enumerable:!0,get:function(){return Ne.LogTraceNotification}});Object.defineProperty(C,"ConnectionErrors",{enumerable:!0,get:function(){return Ne.ConnectionErrors}});Object.defineProperty(C,"ConnectionError",{enumerable:!0,get:function(){return Ne.ConnectionError}});Object.defineProperty(C,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Ne.CancellationReceiverStrategy}});Object.defineProperty(C,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Ne.CancellationSenderStrategy}});Object.defineProperty(C,"CancellationStrategy",{enumerable:!0,get:function(){return Ne.CancellationStrategy}});var kc=rt();C.RAL=kc.default}),tn=O(Y=>{"use strict";var Mc=Y&&Y.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Lc=Y&&Y.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Mc(e,t,n)};Object.defineProperty(Y,"__esModule",{value:!0});Y.createMessageConnection=Y.createServerSocketTransport=Y.createClientSocketTransport=Y.createServerPipeTransport=Y.createClientPipeTransport=Y.generateRandomPipeName=Y.StreamMessageWriter=Y.StreamMessageReader=Y.SocketMessageWriter=Y.SocketMessageReader=Y.IPCMessageWriter=Y.IPCMessageReader=void 0;var Yt=Xo();Yt.default.install();var Ze=ri(),Bs=require("path"),Nc=require("os"),Oc=require("crypto"),or=require("net");Lc(ri(),Y);var Us=class extends Ze.AbstractMessageReader{constructor(e){super();this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Ze.Disposable.create(()=>this.process.off("message",e))}};Y.IPCMessageReader=Us;var Vs=class extends Ze.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Y.IPCMessageWriter=Vs;var Zt=class extends Ze.ReadableStreamMessageReader{constructor(e,n="utf-8"){super(Yt.default().stream.asReadableStream(e),n)}};Y.SocketMessageReader=Zt;var en=class extends Ze.WriteableStreamMessageWriter{constructor(e,n){super(Yt.default().stream.asWritableStream(e),n);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Y.SocketMessageWriter=en;var ii=class extends Ze.ReadableStreamMessageReader{constructor(e,n){super(Yt.default().stream.asReadableStream(e),n)}};Y.StreamMessageReader=ii;var oi=class extends Ze.WriteableStreamMessageWriter{constructor(e,n){super(Yt.default().stream.asWritableStream(e),n)}};Y.StreamMessageWriter=oi;var Gs=process.env.XDG_RUNTIME_DIR,Fc=new Map([["linux",107],["darwin",103]]);function Ic(){let t=Oc.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Gs?e=Bs.join(Gs,`vscode-ipc-${t}.sock`):e=Bs.join(Nc.tmpdir(),`vscode-${t}.sock`);let n=Fc.get(process.platform);return n!==void 0&&e.length>=n&&Yt.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}Y.generateRandomPipeName=Ic;function Ac(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let s=or.createServer(a=>{s.close(),n([new Zt(a,e),new en(a,e)])});s.on("error",o),s.listen(t,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}Y.createClientPipeTransport=Ac;function jc(t,e="utf-8"){let n=or.createConnection(t);return[new Zt(n,e),new en(n,e)]}Y.createServerPipeTransport=jc;function Wc(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let s=or.createServer(a=>{s.close(),n([new Zt(a,e),new en(a,e)])});s.on("error",o),s.listen(t,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}Y.createClientSocketTransport=Wc;function Hc(t,e="utf-8"){let n=or.createConnection(t,"127.0.0.1");return[new Zt(n,e),new en(n,e)]}Y.createServerSocketTransport=Hc;function $c(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function zc(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function Bc(t,e,n,r){n||(n=Ze.NullLogger);let i=$c(t)?new ii(t):t,o=zc(e)?new oi(e):e;return Ze.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Ze.createMessageConnection(i,o,n,r)}Y.createMessageConnection=Bc}),si=O((sg,Js)=>{"use strict";Js.exports=tn()}),Xs=O(Uc=>{Qu(Uc,{AnnotatedTextEdit:()=>ut,ChangeAnnotation:()=>Ft,ChangeAnnotationIdentifier:()=>Ce,CodeAction:()=>Ii,CodeActionContext:()=>Fi,CodeActionKind:()=>Oi,CodeDescription:()=>pi,CodeLens:()=>Ai,Color:()=>ar,ColorInformation:()=>ci,ColorPresentation:()=>li,Command:()=>nn,CompletionItem:()=>xi,CompletionItemKind:()=>bi,CompletionItemTag:()=>Ri,CompletionList:()=>Pi,CreateFile:()=>rn,DeleteFile:()=>sn,Diagnostic:()=>Sn,DiagnosticRelatedInformation:()=>ur,DiagnosticSeverity:()=>hi,DiagnosticTag:()=>gi,DocumentHighlight:()=>qi,DocumentHighlightKind:()=>Di,DocumentLink:()=>Wi,DocumentSymbol:()=>Ni,EOL:()=>Gc,FoldingRange:()=>fi,FoldingRangeKind:()=>di,FormattingOptions:()=>ji,Hover:()=>Si,InsertReplaceEdit:()=>wi,InsertTextFormat:()=>_i,InsertTextMode:()=>Ci,Location:()=>sr,LocationLink:()=>ui,MarkedString:()=>Dn,MarkupContent:()=>dr,MarkupKind:()=>an,OptionalVersionedTextDocumentIdentifier:()=>Tn,ParameterInformation:()=>Ei,Position:()=>Ve,Range:()=>_e,RenameFile:()=>on,SelectionRange:()=>Hi,SignatureInformation:()=>Ti,SymbolInformation:()=>Li,SymbolKind:()=>ki,SymbolTag:()=>Mi,TextDocument:()=>$i,TextDocumentEdit:()=>En,TextDocumentIdentifier:()=>mi,TextDocumentItem:()=>vi,TextEdit:()=>at,VersionedTextDocumentIdentifier:()=>yi,WorkspaceChange:()=>Vc,WorkspaceEdit:()=>cr,integer:()=>ai,uinteger:()=>Pn});"use strict";var ai;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(ai||(ai={}));var Pn;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(Pn||(Pn={}));var Ve;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=Pn.MAX_VALUE),i===Number.MAX_VALUE&&(i=Pn.MAX_VALUE),{line:r,character:i}}t.create=e;function n(r){var i=r;return b.objectLiteral(i)&&b.uinteger(i.line)&&b.uinteger(i.character)}t.is=n})(Ve||(Ve={}));var _e;(function(t){function e(r,i,o,s){if(b.uinteger(r)&&b.uinteger(i)&&b.uinteger(o)&&b.uinteger(s))return{start:Ve.create(r,i),end:Ve.create(o,s)};if(Ve.is(r)&&Ve.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+o+", "+s+"]")}t.create=e;function n(r){var i=r;return b.objectLiteral(i)&&Ve.is(i.start)&&Ve.is(i.end)}t.is=n})(_e||(_e={}));var sr;(function(t){function e(r,i){return{uri:r,range:i}}t.create=e;function n(r){var i=r;return b.defined(i)&&_e.is(i.range)&&(b.string(i.uri)||b.undefined(i.uri))}t.is=n})(sr||(sr={}));var ui;(function(t){function e(r,i,o,s){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}t.create=e;function n(r){var i=r;return b.defined(i)&&_e.is(i.targetRange)&&b.string(i.targetUri)&&(_e.is(i.targetSelectionRange)||b.undefined(i.targetSelectionRange))&&(_e.is(i.originSelectionRange)||b.undefined(i.originSelectionRange))}t.is=n})(ui||(ui={}));var ar;(function(t){function e(r,i,o,s){return{red:r,green:i,blue:o,alpha:s}}t.create=e;function n(r){var i=r;return b.numberRange(i.red,0,1)&&b.numberRange(i.green,0,1)&&b.numberRange(i.blue,0,1)&&b.numberRange(i.alpha,0,1)}t.is=n})(ar||(ar={}));var ci;(function(t){function e(r,i){return{range:r,color:i}}t.create=e;function n(r){var i=r;return _e.is(i.range)&&ar.is(i.color)}t.is=n})(ci||(ci={}));var li;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}t.create=e;function n(r){var i=r;return b.string(i.label)&&(b.undefined(i.textEdit)||at.is(i))&&(b.undefined(i.additionalTextEdits)||b.typedArray(i.additionalTextEdits,at.is))}t.is=n})(li||(li={}));var di;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(di||(di={}));var fi;(function(t){function e(r,i,o,s,a){var c={startLine:r,endLine:i};return b.defined(o)&&(c.startCharacter=o),b.defined(s)&&(c.endCharacter=s),b.defined(a)&&(c.kind=a),c}t.create=e;function n(r){var i=r;return b.uinteger(i.startLine)&&b.uinteger(i.startLine)&&(b.undefined(i.startCharacter)||b.uinteger(i.startCharacter))&&(b.undefined(i.endCharacter)||b.uinteger(i.endCharacter))&&(b.undefined(i.kind)||b.string(i.kind))}t.is=n})(fi||(fi={}));var ur;(function(t){function e(r,i){return{location:r,message:i}}t.create=e;function n(r){var i=r;return b.defined(i)&&sr.is(i.location)&&b.string(i.message)}t.is=n})(ur||(ur={}));var hi;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(hi||(hi={}));var gi;(function(t){t.Unnecessary=1,t.Deprecated=2})(gi||(gi={}));var pi;(function(t){function e(n){var r=n;return r!=null&&b.string(r.href)}t.is=e})(pi||(pi={}));var Sn;(function(t){function e(r,i,o,s,a,c){var l={range:r,message:i};return b.defined(o)&&(l.severity=o),b.defined(s)&&(l.code=s),b.defined(a)&&(l.source=a),b.defined(c)&&(l.relatedInformation=c),l}t.create=e;function n(r){var i,o=r;return b.defined(o)&&_e.is(o.range)&&b.string(o.message)&&(b.number(o.severity)||b.undefined(o.severity))&&(b.integer(o.code)||b.string(o.code)||b.undefined(o.code))&&(b.undefined(o.codeDescription)||b.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(b.string(o.source)||b.undefined(o.source))&&(b.undefined(o.relatedInformation)||b.typedArray(o.relatedInformation,ur.is))}t.is=n})(Sn||(Sn={}));var nn;(function(t){function e(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:r,command:i};return b.defined(o)&&o.length>0&&(a.arguments=o),a}t.create=e;function n(r){var i=r;return b.defined(i)&&b.string(i.title)&&b.string(i.command)}t.is=n})(nn||(nn={}));var at;(function(t){function e(o,s){return{range:o,newText:s}}t.replace=e;function n(o,s){return{range:{start:o,end:o},newText:s}}t.insert=n;function r(o){return{range:o,newText:""}}t.del=r;function i(o){var s=o;return b.objectLiteral(s)&&b.string(s.newText)&&_e.is(s.range)}t.is=i})(at||(at={}));var Ft;(function(t){function e(r,i,o){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}t.create=e;function n(r){var i=r;return i!==void 0&&b.objectLiteral(i)&&b.string(i.label)&&(b.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(b.string(i.description)||i.description===void 0)}t.is=n})(Ft||(Ft={}));var Ce;(function(t){function e(n){var r=n;return typeof r=="string"}t.is=e})(Ce||(Ce={}));var ut;(function(t){function e(o,s,a){return{range:o,newText:s,annotationId:a}}t.replace=e;function n(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}t.insert=n;function r(o,s){return{range:o,newText:"",annotationId:s}}t.del=r;function i(o){var s=o;return at.is(s)&&(Ft.is(s.annotationId)||Ce.is(s.annotationId))}t.is=i})(ut||(ut={}));var En;(function(t){function e(r,i){return{textDocument:r,edits:i}}t.create=e;function n(r){var i=r;return b.defined(i)&&Tn.is(i.textDocument)&&Array.isArray(i.edits)}t.is=n})(En||(En={}));var rn;(function(t){function e(r,i,o){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&b.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||b.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||b.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ce.is(i.annotationId))}t.is=n})(rn||(rn={}));var on;(function(t){function e(r,i,o,s){var a={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&b.string(i.oldUri)&&b.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||b.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||b.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ce.is(i.annotationId))}t.is=n})(on||(on={}));var sn;(function(t){function e(r,i,o){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&b.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||b.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||b.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Ce.is(i.annotationId))}t.is=n})(sn||(sn={}));var cr;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return b.string(i.kind)?rn.is(i)||on.is(i)||sn.is(i):En.is(i)}))}t.is=e})(cr||(cr={}));var lr=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return t.prototype.insert=function(e,n,r){var i,o;if(r===void 0?i=at.insert(e,n):Ce.is(r)?(o=r,i=ut.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=ut.insert(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.replace=function(e,n,r){var i,o;if(r===void 0?i=at.replace(e,n):Ce.is(r)?(o=r,i=ut.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=ut.replace(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=at.del(e):Ce.is(n)?(i=n,r=ut.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=ut.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),Ks=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Ce.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Vc=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Ks(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(En.is(r)){var i=new lr(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new lr(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(Tn.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],o={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(o),r=new lr(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new lr(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ks,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Ft.is(n)||Ce.is(n)?i=n:r=n;var o,s;if(i===void 0?o=rn.create(e,r):(s=Ce.is(i)?i:this._changeAnnotations.manage(i),o=rn.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Ft.is(r)||Ce.is(r)?o=r:i=r;var s,a;if(o===void 0?s=on.create(e,n,i):(a=Ce.is(o)?o:this._changeAnnotations.manage(o),s=on.create(e,n,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Ft.is(n)||Ce.is(n)?i=n:r=n;var o,s;if(i===void 0?o=sn.create(e,r):(s=Ce.is(i)?i:this._changeAnnotations.manage(i),o=sn.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},t}(),mi;(function(t){function e(r){return{uri:r}}t.create=e;function n(r){var i=r;return b.defined(i)&&b.string(i.uri)}t.is=n})(mi||(mi={}));var yi;(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return b.defined(i)&&b.string(i.uri)&&b.integer(i.version)}t.is=n})(yi||(yi={}));var Tn;(function(t){function e(r,i){return{uri:r,version:i}}t.create=e;function n(r){var i=r;return b.defined(i)&&b.string(i.uri)&&(i.version===null||b.integer(i.version))}t.is=n})(Tn||(Tn={}));var vi;(function(t){function e(r,i,o,s){return{uri:r,languageId:i,version:o,text:s}}t.create=e;function n(r){var i=r;return b.defined(i)&&b.string(i.uri)&&b.string(i.languageId)&&b.integer(i.version)&&b.string(i.text)}t.is=n})(vi||(vi={}));var an;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(an||(an={}));(function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}t.is=e})(an||(an={}));var dr;(function(t){function e(n){var r=n;return b.objectLiteral(n)&&an.is(r.kind)&&b.string(r.value)}t.is=e})(dr||(dr={}));var bi;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(bi||(bi={}));var _i;(function(t){t.PlainText=1,t.Snippet=2})(_i||(_i={}));var Ri;(function(t){t.Deprecated=1})(Ri||(Ri={}));var wi;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}t.create=e;function n(r){var i=r;return i&&b.string(i.newText)&&_e.is(i.insert)&&_e.is(i.replace)}t.is=n})(wi||(wi={}));var Ci;(function(t){t.asIs=1,t.adjustIndentation=2})(Ci||(Ci={}));var xi;(function(t){function e(n){return{label:n}}t.create=e})(xi||(xi={}));var Pi;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}t.create=e})(Pi||(Pi={}));var Dn;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}t.fromPlainText=e;function n(r){var i=r;return b.string(i)||b.objectLiteral(i)&&b.string(i.language)&&b.string(i.value)}t.is=n})(Dn||(Dn={}));var Si;(function(t){function e(n){var r=n;return!!r&&b.objectLiteral(r)&&(dr.is(r.contents)||Dn.is(r.contents)||b.typedArray(r.contents,Dn.is))&&(n.range===void 0||_e.is(n.range))}t.is=e})(Si||(Si={}));var Ei;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}t.create=e})(Ei||(Ei={}));var Ti;(function(t){function e(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:n};return b.defined(r)&&(s.documentation=r),b.defined(i)?s.parameters=i:s.parameters=[],s}t.create=e})(Ti||(Ti={}));var Di;(function(t){t.Text=1,t.Read=2,t.Write=3})(Di||(Di={}));var qi;(function(t){function e(n,r){var i={range:n};return b.number(r)&&(i.kind=r),i}t.create=e})(qi||(qi={}));var ki;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(ki||(ki={}));var Mi;(function(t){t.Deprecated=1})(Mi||(Mi={}));var Li;(function(t){function e(n,r,i,o,s){var a={name:n,kind:r,location:{uri:o,range:i}};return s&&(a.containerName=s),a}t.create=e})(Li||(Li={}));var Ni;(function(t){function e(r,i,o,s,a,c){var l={name:r,detail:i,kind:o,range:s,selectionRange:a};return c!==void 0&&(l.children=c),l}t.create=e;function n(r){var i=r;return i&&b.string(i.name)&&b.number(i.kind)&&_e.is(i.range)&&_e.is(i.selectionRange)&&(i.detail===void 0||b.string(i.detail))&&(i.deprecated===void 0||b.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}t.is=n})(Ni||(Ni={}));var Oi;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Oi||(Oi={}));var Fi;(function(t){function e(r,i){var o={diagnostics:r};return i!=null&&(o.only=i),o}t.create=e;function n(r){var i=r;return b.defined(i)&&b.typedArray(i.diagnostics,Sn.is)&&(i.only===void 0||b.typedArray(i.only,b.string))}t.is=n})(Fi||(Fi={}));var Ii;(function(t){function e(r,i,o){var s={title:r},a=!0;return typeof i=="string"?(a=!1,s.kind=i):nn.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}t.create=e;function n(r){var i=r;return i&&b.string(i.title)&&(i.diagnostics===void 0||b.typedArray(i.diagnostics,Sn.is))&&(i.kind===void 0||b.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||nn.is(i.command))&&(i.isPreferred===void 0||b.boolean(i.isPreferred))&&(i.edit===void 0||cr.is(i.edit))}t.is=n})(Ii||(Ii={}));var Ai;(function(t){function e(r,i){var o={range:r};return b.defined(i)&&(o.data=i),o}t.create=e;function n(r){var i=r;return b.defined(i)&&_e.is(i.range)&&(b.undefined(i.command)||nn.is(i.command))}t.is=n})(Ai||(Ai={}));var ji;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}t.create=e;function n(r){var i=r;return b.defined(i)&&b.uinteger(i.tabSize)&&b.boolean(i.insertSpaces)}t.is=n})(ji||(ji={}));var Wi;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}t.create=e;function n(r){var i=r;return b.defined(i)&&_e.is(i.range)&&(b.undefined(i.target)||b.string(i.target))}t.is=n})(Wi||(Wi={}));var Hi;(function(t){function e(r,i){return{range:r,parent:i}}t.create=e;function n(r){var i=r;return i!==void 0&&_e.is(i.range)&&(i.parent===void 0||t.is(i.parent))}t.is=n})(Hi||(Hi={}));var Gc=[`
`,`\r
`,"\r"],$i;(function(t){function e(o,s,a,c){return new Jc(o,s,a,c)}t.create=e;function n(o){var s=o;return!!(b.defined(s)&&b.string(s.uri)&&(b.undefined(s.languageId)||b.string(s.languageId))&&b.uinteger(s.lineCount)&&b.func(s.getText)&&b.func(s.positionAt)&&b.func(s.offsetAt))}t.is=n;function r(o,s){for(var a=o.getText(),c=i(s,function(_,S){var k=_.range.start.line-S.range.start.line;return k===0?_.range.start.character-S.range.start.character:k}),l=a.length,f=c.length-1;f>=0;f--){var p=c[f],y=o.offsetAt(p.range.start),v=o.offsetAt(p.range.end);if(v<=l)a=a.substring(0,y)+p.newText+a.substring(v,a.length);else throw new Error("Overlapping edit");l=y}return a}t.applyEdits=r;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,c=o.slice(0,a),l=o.slice(a);i(c,s),i(l,s);for(var f=0,p=0,y=0;f<c.length&&p<l.length;){var v=s(c[f],l[p]);v<=0?o[y++]=c[f++]:o[y++]=l[p++]}for(;f<c.length;)o[y++]=c[f++];for(;p<l.length;)o[y++]=l[p++];return o}})($i||($i={}));var Jc=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Ve.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);n[o]>e?i=o:r=o+1}var s=r-1;return Ve.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),b;(function(t){var e=Object.prototype.toString;function n(v){return typeof v!="undefined"}t.defined=n;function r(v){return typeof v=="undefined"}t.undefined=r;function i(v){return v===!0||v===!1}t.boolean=i;function o(v){return e.call(v)==="[object String]"}t.string=o;function s(v){return e.call(v)==="[object Number]"}t.number=s;function a(v,_,S){return e.call(v)==="[object Number]"&&_<=v&&v<=S}t.numberRange=a;function c(v){return e.call(v)==="[object Number]"&&-2147483648<=v&&v<=2147483647}t.integer=c;function l(v){return e.call(v)==="[object Number]"&&0<=v&&v<=2147483647}t.uinteger=l;function f(v){return e.call(v)==="[object Function]"}t.func=f;function p(v){return v!==null&&typeof v=="object"}t.objectLiteral=p;function y(v,_){return Array.isArray(v)&&v.every(_)}t.typedArray=y})(b||(b={}))}),Re=O(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.ProtocolNotificationType=Ae.ProtocolNotificationType0=Ae.ProtocolRequestType=Ae.ProtocolRequestType0=Ae.RegistrationType=void 0;var un=tn(),Qs=class{constructor(e){this.method=e}};Ae.RegistrationType=Qs;var Ys=class extends un.RequestType0{constructor(e){super(e)}};Ae.ProtocolRequestType0=Ys;var Zs=class extends un.RequestType{constructor(e){super(e,un.ParameterStructures.byName)}};Ae.ProtocolRequestType=Zs;var ea=class extends un.NotificationType0{constructor(e){super(e)}};Ae.ProtocolNotificationType0=ea;var ta=class extends un.NotificationType{constructor(e){super(e,un.ParameterStructures.byName)}};Ae.ProtocolNotificationType=ta}),ia=O(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.objectLiteral=ge.typedArray=ge.stringArray=ge.array=ge.func=ge.error=ge.number=ge.string=ge.boolean=void 0;function Kc(t){return t===!0||t===!1}ge.boolean=Kc;function na(t){return typeof t=="string"||t instanceof String}ge.string=na;function Xc(t){return typeof t=="number"||t instanceof Number}ge.number=Xc;function Qc(t){return t instanceof Error}ge.error=Qc;function Yc(t){return typeof t=="function"}ge.func=Yc;function ra(t){return Array.isArray(t)}ge.array=ra;function Zc(t){return ra(t)&&t.every(e=>na(e))}ge.stringArray=Zc;function el(t,e){return Array.isArray(t)&&t.every(e)}ge.typedArray=el;function tl(t){return t!==null&&typeof t=="object"}ge.objectLiteral=tl}),oa=O(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.ImplementationRequest=void 0;var nl=Re(),rl;(function(t){t.method="textDocument/implementation",t.type=new nl.ProtocolRequestType(t.method)})(rl=qn.ImplementationRequest||(qn.ImplementationRequest={}))}),sa=O(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.TypeDefinitionRequest=void 0;var il=Re(),ol;(function(t){t.method="textDocument/typeDefinition",t.type=new il.ProtocolRequestType(t.method)})(ol=kn.TypeDefinitionRequest||(kn.TypeDefinitionRequest={}))}),ua=O(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.DidChangeWorkspaceFoldersNotification=vt.WorkspaceFoldersRequest=void 0;var aa=Re(),sl;(function(t){t.type=new aa.ProtocolRequestType0("workspace/workspaceFolders")})(sl=vt.WorkspaceFoldersRequest||(vt.WorkspaceFoldersRequest={}));var al;(function(t){t.type=new aa.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(al=vt.DidChangeWorkspaceFoldersNotification||(vt.DidChangeWorkspaceFoldersNotification={}))}),ca=O(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.ConfigurationRequest=void 0;var ul=Re(),cl;(function(t){t.type=new ul.ProtocolRequestType("workspace/configuration")})(cl=Mn.ConfigurationRequest||(Mn.ConfigurationRequest={}))}),da=O(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.ColorPresentationRequest=bt.DocumentColorRequest=void 0;var la=Re(),ll;(function(t){t.method="textDocument/documentColor",t.type=new la.ProtocolRequestType(t.method)})(ll=bt.DocumentColorRequest||(bt.DocumentColorRequest={}));var dl;(function(t){t.type=new la.ProtocolRequestType("textDocument/colorPresentation")})(dl=bt.ColorPresentationRequest||(bt.ColorPresentationRequest={}))}),fa=O(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.FoldingRangeRequest=_t.FoldingRangeKind=void 0;var fl=Re(),hl;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(hl=_t.FoldingRangeKind||(_t.FoldingRangeKind={}));var gl;(function(t){t.method="textDocument/foldingRange",t.type=new fl.ProtocolRequestType(t.method)})(gl=_t.FoldingRangeRequest||(_t.FoldingRangeRequest={}))}),ha=O(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.DeclarationRequest=void 0;var pl=Re(),ml;(function(t){t.method="textDocument/declaration",t.type=new pl.ProtocolRequestType(t.method)})(ml=Ln.DeclarationRequest||(Ln.DeclarationRequest={}))}),ga=O(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.SelectionRangeRequest=void 0;var yl=Re(),vl;(function(t){t.method="textDocument/selectionRange",t.type=new yl.ProtocolRequestType(t.method)})(vl=Nn.SelectionRangeRequest||(Nn.SelectionRangeRequest={}))}),ma=O(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.WorkDoneProgressCancelNotification=Ge.WorkDoneProgressCreateRequest=Ge.WorkDoneProgress=void 0;var bl=tn(),pa=Re(),_l;(function(t){t.type=new bl.ProgressType;function e(n){return n===t.type}t.is=e})(_l=Ge.WorkDoneProgress||(Ge.WorkDoneProgress={}));var Rl;(function(t){t.type=new pa.ProtocolRequestType("window/workDoneProgress/create")})(Rl=Ge.WorkDoneProgressCreateRequest||(Ge.WorkDoneProgressCreateRequest={}));var wl;(function(t){t.type=new pa.ProtocolNotificationType("window/workDoneProgress/cancel")})(wl=Ge.WorkDoneProgressCancelNotification||(Ge.WorkDoneProgressCancelNotification={}))}),ya=O(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.CallHierarchyOutgoingCallsRequest=Je.CallHierarchyIncomingCallsRequest=Je.CallHierarchyPrepareRequest=void 0;var zi=Re(),Cl;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new zi.ProtocolRequestType(t.method)})(Cl=Je.CallHierarchyPrepareRequest||(Je.CallHierarchyPrepareRequest={}));var xl;(function(t){t.method="callHierarchy/incomingCalls",t.type=new zi.ProtocolRequestType(t.method)})(xl=Je.CallHierarchyIncomingCallsRequest||(Je.CallHierarchyIncomingCallsRequest={}));var Pl;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new zi.ProtocolRequestType(t.method)})(Pl=Je.CallHierarchyOutgoingCallsRequest||(Je.CallHierarchyOutgoingCallsRequest={}))}),va=O(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.SemanticTokensRefreshRequest=te.SemanticTokensRangeRequest=te.SemanticTokensDeltaRequest=te.SemanticTokensRequest=te.SemanticTokensRegistrationType=te.TokenFormat=te.SemanticTokens=te.SemanticTokenModifiers=te.SemanticTokenTypes=void 0;var On=Re(),Sl;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(Sl=te.SemanticTokenTypes||(te.SemanticTokenTypes={}));var El;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(El=te.SemanticTokenModifiers||(te.SemanticTokenModifiers={}));var Tl;(function(t){function e(n){let r=n;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(Tl=te.SemanticTokens||(te.SemanticTokens={}));var Dl;(function(t){t.Relative="relative"})(Dl=te.TokenFormat||(te.TokenFormat={}));var ql;(function(t){t.method="textDocument/semanticTokens",t.type=new On.RegistrationType(t.method)})(ql=te.SemanticTokensRegistrationType||(te.SemanticTokensRegistrationType={}));var kl;(function(t){t.method="textDocument/semanticTokens/full",t.type=new On.ProtocolRequestType(t.method)})(kl=te.SemanticTokensRequest||(te.SemanticTokensRequest={}));var Ml;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new On.ProtocolRequestType(t.method)})(Ml=te.SemanticTokensDeltaRequest||(te.SemanticTokensDeltaRequest={}));var Ll;(function(t){t.method="textDocument/semanticTokens/range",t.type=new On.ProtocolRequestType(t.method)})(Ll=te.SemanticTokensRangeRequest||(te.SemanticTokensRangeRequest={}));var Nl;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new On.ProtocolRequestType0(t.method)})(Nl=te.SemanticTokensRefreshRequest||(te.SemanticTokensRefreshRequest={}))}),ba=O(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.ShowDocumentRequest=void 0;var Ol=Re(),Fl;(function(t){t.method="window/showDocument",t.type=new Ol.ProtocolRequestType(t.method)})(Fl=Fn.ShowDocumentRequest||(Fn.ShowDocumentRequest={}))}),_a=O(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.LinkedEditingRangeRequest=void 0;var Il=Re(),Al;(function(t){t.method="textDocument/linkedEditingRange",t.type=new Il.ProtocolRequestType(t.method)})(Al=In.LinkedEditingRangeRequest||(In.LinkedEditingRangeRequest={}))}),Ra=O(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.WillDeleteFilesRequest=ue.DidDeleteFilesNotification=ue.DidRenameFilesNotification=ue.WillRenameFilesRequest=ue.DidCreateFilesNotification=ue.WillCreateFilesRequest=ue.FileOperationPatternKind=void 0;var cn=Re(),jl;(function(t){t.file="file",t.folder="folder"})(jl=ue.FileOperationPatternKind||(ue.FileOperationPatternKind={}));var Wl;(function(t){t.method="workspace/willCreateFiles",t.type=new cn.ProtocolRequestType(t.method)})(Wl=ue.WillCreateFilesRequest||(ue.WillCreateFilesRequest={}));var Hl;(function(t){t.method="workspace/didCreateFiles",t.type=new cn.ProtocolNotificationType(t.method)})(Hl=ue.DidCreateFilesNotification||(ue.DidCreateFilesNotification={}));var $l;(function(t){t.method="workspace/willRenameFiles",t.type=new cn.ProtocolRequestType(t.method)})($l=ue.WillRenameFilesRequest||(ue.WillRenameFilesRequest={}));var zl;(function(t){t.method="workspace/didRenameFiles",t.type=new cn.ProtocolNotificationType(t.method)})(zl=ue.DidRenameFilesNotification||(ue.DidRenameFilesNotification={}));var Bl;(function(t){t.method="workspace/didDeleteFiles",t.type=new cn.ProtocolNotificationType(t.method)})(Bl=ue.DidDeleteFilesNotification||(ue.DidDeleteFilesNotification={}));var Ul;(function(t){t.method="workspace/willDeleteFiles",t.type=new cn.ProtocolRequestType(t.method)})(Ul=ue.WillDeleteFilesRequest||(ue.WillDeleteFilesRequest={}))}),wa=O(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.MonikerRequest=Ke.MonikerKind=Ke.UniquenessLevel=void 0;var Vl=Re(),Gl;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Gl=Ke.UniquenessLevel||(Ke.UniquenessLevel={}));var Jl;(function(t){t.import="import",t.export="export",t.local="local"})(Jl=Ke.MonikerKind||(Ke.MonikerKind={}));var Kl;(function(t){t.method="textDocument/moniker",t.type=new Vl.ProtocolRequestType(t.method)})(Kl=Ke.MonikerRequest||(Ke.MonikerRequest={}))}),Ea=O(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeError=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.DocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.SemanticTokens=u.SemanticTokenModifiers=u.SemanticTokenTypes=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=void 0;var Rt=ia(),H=Re(),Xl=oa();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return Xl.ImplementationRequest}});var Ql=sa();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Ql.TypeDefinitionRequest}});var Ca=ua();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Ca.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Ca.DidChangeWorkspaceFoldersNotification}});var Yl=ca();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return Yl.ConfigurationRequest}});var xa=da();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return xa.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return xa.ColorPresentationRequest}});var Zl=fa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return Zl.FoldingRangeRequest}});var ed=ha();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return ed.DeclarationRequest}});var td=ga();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return td.SelectionRangeRequest}});var Bi=ma();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return Bi.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Bi.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Bi.WorkDoneProgressCancelNotification}});var Ui=ya();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ui.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ui.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ui.CallHierarchyPrepareRequest}});var ct=va();Object.defineProperty(u,"SemanticTokenTypes",{enumerable:!0,get:function(){return ct.SemanticTokenTypes}});Object.defineProperty(u,"SemanticTokenModifiers",{enumerable:!0,get:function(){return ct.SemanticTokenModifiers}});Object.defineProperty(u,"SemanticTokens",{enumerable:!0,get:function(){return ct.SemanticTokens}});Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return ct.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return ct.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return ct.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return ct.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return ct.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return ct.SemanticTokensRegistrationType}});var nd=ba();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return nd.ShowDocumentRequest}});var rd=_a();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return rd.LinkedEditingRangeRequest}});var It=Ra();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return It.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return It.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return It.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return It.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return It.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return It.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return It.WillDeleteFilesRequest}});var Vi=wa();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return Vi.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return Vi.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return Vi.MonikerRequest}});var Pa;(function(t){function e(n){let r=n;return Rt.string(r.language)||Rt.string(r.scheme)||Rt.string(r.pattern)}t.is=e})(Pa=u.DocumentFilter||(u.DocumentFilter={}));var Sa;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Rt.string(r)&&!Pa.is(r))return!1;return!0}t.is=e})(Sa=u.DocumentSelector||(u.DocumentSelector={}));var id;(function(t){t.type=new H.ProtocolRequestType("client/registerCapability")})(id=u.RegistrationRequest||(u.RegistrationRequest={}));var od;(function(t){t.type=new H.ProtocolRequestType("client/unregisterCapability")})(od=u.UnregistrationRequest||(u.UnregistrationRequest={}));var sd;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(sd=u.ResourceOperationKind||(u.ResourceOperationKind={}));var ad;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(ad=u.FailureHandlingKind||(u.FailureHandlingKind={}));var ud;(function(t){function e(n){let r=n;return r&&Rt.string(r.id)&&r.id.length>0}t.hasId=e})(ud=u.StaticRegistrationOptions||(u.StaticRegistrationOptions={}));var cd;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Sa.is(r.documentSelector))}t.is=e})(cd=u.TextDocumentRegistrationOptions||(u.TextDocumentRegistrationOptions={}));var ld;(function(t){function e(r){let i=r;return Rt.objectLiteral(i)&&(i.workDoneProgress===void 0||Rt.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&Rt.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(ld=u.WorkDoneProgressOptions||(u.WorkDoneProgressOptions={}));var dd;(function(t){t.type=new H.ProtocolRequestType("initialize")})(dd=u.InitializeRequest||(u.InitializeRequest={}));var fd;(function(t){t.unknownProtocolVersion=1})(fd=u.InitializeError||(u.InitializeError={}));var hd;(function(t){t.type=new H.ProtocolNotificationType("initialized")})(hd=u.InitializedNotification||(u.InitializedNotification={}));var gd;(function(t){t.type=new H.ProtocolRequestType0("shutdown")})(gd=u.ShutdownRequest||(u.ShutdownRequest={}));var pd;(function(t){t.type=new H.ProtocolNotificationType0("exit")})(pd=u.ExitNotification||(u.ExitNotification={}));var md;(function(t){t.type=new H.ProtocolNotificationType("workspace/didChangeConfiguration")})(md=u.DidChangeConfigurationNotification||(u.DidChangeConfigurationNotification={}));var yd;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(yd=u.MessageType||(u.MessageType={}));var vd;(function(t){t.type=new H.ProtocolNotificationType("window/showMessage")})(vd=u.ShowMessageNotification||(u.ShowMessageNotification={}));var bd;(function(t){t.type=new H.ProtocolRequestType("window/showMessageRequest")})(bd=u.ShowMessageRequest||(u.ShowMessageRequest={}));var _d;(function(t){t.type=new H.ProtocolNotificationType("window/logMessage")})(_d=u.LogMessageNotification||(u.LogMessageNotification={}));var Rd;(function(t){t.type=new H.ProtocolNotificationType("telemetry/event")})(Rd=u.TelemetryEventNotification||(u.TelemetryEventNotification={}));var wd;(function(t){t.None=0,t.Full=1,t.Incremental=2})(wd=u.TextDocumentSyncKind||(u.TextDocumentSyncKind={}));var Cd;(function(t){t.method="textDocument/didOpen",t.type=new H.ProtocolNotificationType(t.method)})(Cd=u.DidOpenTextDocumentNotification||(u.DidOpenTextDocumentNotification={}));var xd;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(xd=u.TextDocumentContentChangeEvent||(u.TextDocumentContentChangeEvent={}));var Pd;(function(t){t.method="textDocument/didChange",t.type=new H.ProtocolNotificationType(t.method)})(Pd=u.DidChangeTextDocumentNotification||(u.DidChangeTextDocumentNotification={}));var Sd;(function(t){t.method="textDocument/didClose",t.type=new H.ProtocolNotificationType(t.method)})(Sd=u.DidCloseTextDocumentNotification||(u.DidCloseTextDocumentNotification={}));var Ed;(function(t){t.method="textDocument/didSave",t.type=new H.ProtocolNotificationType(t.method)})(Ed=u.DidSaveTextDocumentNotification||(u.DidSaveTextDocumentNotification={}));var Td;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Td=u.TextDocumentSaveReason||(u.TextDocumentSaveReason={}));var Dd;(function(t){t.method="textDocument/willSave",t.type=new H.ProtocolNotificationType(t.method)})(Dd=u.WillSaveTextDocumentNotification||(u.WillSaveTextDocumentNotification={}));var qd;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new H.ProtocolRequestType(t.method)})(qd=u.WillSaveTextDocumentWaitUntilRequest||(u.WillSaveTextDocumentWaitUntilRequest={}));var kd;(function(t){t.type=new H.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(kd=u.DidChangeWatchedFilesNotification||(u.DidChangeWatchedFilesNotification={}));var Md;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(Md=u.FileChangeType||(u.FileChangeType={}));var Ld;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Ld=u.WatchKind||(u.WatchKind={}));var Nd;(function(t){t.type=new H.ProtocolNotificationType("textDocument/publishDiagnostics")})(Nd=u.PublishDiagnosticsNotification||(u.PublishDiagnosticsNotification={}));var Od;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Od=u.CompletionTriggerKind||(u.CompletionTriggerKind={}));var Fd;(function(t){t.method="textDocument/completion",t.type=new H.ProtocolRequestType(t.method)})(Fd=u.CompletionRequest||(u.CompletionRequest={}));var Id;(function(t){t.method="completionItem/resolve",t.type=new H.ProtocolRequestType(t.method)})(Id=u.CompletionResolveRequest||(u.CompletionResolveRequest={}));var Ad;(function(t){t.method="textDocument/hover",t.type=new H.ProtocolRequestType(t.method)})(Ad=u.HoverRequest||(u.HoverRequest={}));var jd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(jd=u.SignatureHelpTriggerKind||(u.SignatureHelpTriggerKind={}));var Wd;(function(t){t.method="textDocument/signatureHelp",t.type=new H.ProtocolRequestType(t.method)})(Wd=u.SignatureHelpRequest||(u.SignatureHelpRequest={}));var Hd;(function(t){t.method="textDocument/definition",t.type=new H.ProtocolRequestType(t.method)})(Hd=u.DefinitionRequest||(u.DefinitionRequest={}));var $d;(function(t){t.method="textDocument/references",t.type=new H.ProtocolRequestType(t.method)})($d=u.ReferencesRequest||(u.ReferencesRequest={}));var zd;(function(t){t.method="textDocument/documentHighlight",t.type=new H.ProtocolRequestType(t.method)})(zd=u.DocumentHighlightRequest||(u.DocumentHighlightRequest={}));var Bd;(function(t){t.method="textDocument/documentSymbol",t.type=new H.ProtocolRequestType(t.method)})(Bd=u.DocumentSymbolRequest||(u.DocumentSymbolRequest={}));var Ud;(function(t){t.method="textDocument/codeAction",t.type=new H.ProtocolRequestType(t.method)})(Ud=u.CodeActionRequest||(u.CodeActionRequest={}));var Vd;(function(t){t.method="codeAction/resolve",t.type=new H.ProtocolRequestType(t.method)})(Vd=u.CodeActionResolveRequest||(u.CodeActionResolveRequest={}));var Gd;(function(t){t.method="workspace/symbol",t.type=new H.ProtocolRequestType(t.method)})(Gd=u.WorkspaceSymbolRequest||(u.WorkspaceSymbolRequest={}));var Jd;(function(t){t.method="textDocument/codeLens",t.type=new H.ProtocolRequestType(t.method)})(Jd=u.CodeLensRequest||(u.CodeLensRequest={}));var Kd;(function(t){t.method="codeLens/resolve",t.type=new H.ProtocolRequestType(t.method)})(Kd=u.CodeLensResolveRequest||(u.CodeLensResolveRequest={}));var Xd;(function(t){t.method="workspace/codeLens/refresh",t.type=new H.ProtocolRequestType0(t.method)})(Xd=u.CodeLensRefreshRequest||(u.CodeLensRefreshRequest={}));var Qd;(function(t){t.method="textDocument/documentLink",t.type=new H.ProtocolRequestType(t.method)})(Qd=u.DocumentLinkRequest||(u.DocumentLinkRequest={}));var Yd;(function(t){t.method="documentLink/resolve",t.type=new H.ProtocolRequestType(t.method)})(Yd=u.DocumentLinkResolveRequest||(u.DocumentLinkResolveRequest={}));var Zd;(function(t){t.method="textDocument/formatting",t.type=new H.ProtocolRequestType(t.method)})(Zd=u.DocumentFormattingRequest||(u.DocumentFormattingRequest={}));var ef;(function(t){t.method="textDocument/rangeFormatting",t.type=new H.ProtocolRequestType(t.method)})(ef=u.DocumentRangeFormattingRequest||(u.DocumentRangeFormattingRequest={}));var tf;(function(t){t.method="textDocument/onTypeFormatting",t.type=new H.ProtocolRequestType(t.method)})(tf=u.DocumentOnTypeFormattingRequest||(u.DocumentOnTypeFormattingRequest={}));var nf;(function(t){t.Identifier=1})(nf=u.PrepareSupportDefaultBehavior||(u.PrepareSupportDefaultBehavior={}));var rf;(function(t){t.method="textDocument/rename",t.type=new H.ProtocolRequestType(t.method)})(rf=u.RenameRequest||(u.RenameRequest={}));var of;(function(t){t.method="textDocument/prepareRename",t.type=new H.ProtocolRequestType(t.method)})(of=u.PrepareRenameRequest||(u.PrepareRenameRequest={}));var sf;(function(t){t.type=new H.ProtocolRequestType("workspace/executeCommand")})(sf=u.ExecuteCommandRequest||(u.ExecuteCommandRequest={}));var af;(function(t){t.type=new H.ProtocolRequestType("workspace/applyEdit")})(af=u.ApplyWorkspaceEditRequest||(u.ApplyWorkspaceEditRequest={}))}),Da=O(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.createProtocolConnection=void 0;var Ta=tn();function uf(t,e,n,r){return Ta.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Ta.createMessageConnection(t,e,n,r)}fr.createProtocolConnection=uf}),qa=O(qe=>{"use strict";var cf=qe&&qe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hr=qe&&qe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cf(e,t,n)};Object.defineProperty(qe,"__esModule",{value:!0});qe.LSPErrorCodes=qe.createProtocolConnection=void 0;hr(tn(),qe);hr(Xs(),qe);hr(Re(),qe);hr(Ea(),qe);var lf=Da();Object.defineProperty(qe,"createProtocolConnection",{enumerable:!0,get:function(){return lf.createProtocolConnection}});var df;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(df=qe.LSPErrorCodes||(qe.LSPErrorCodes={}))}),Oe=O(et=>{"use strict";var ff=et&&et.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ka=et&&et.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ff(e,t,n)};Object.defineProperty(et,"__esModule",{value:!0});et.createProtocolConnection=void 0;var hf=si();ka(si(),et);ka(qa(),et);function gf(t,e,n,r){return hf.createMessageConnection(t,e,n,r)}et.createProtocolConnection=gf}),Gi=O(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.generateUuid=je.parse=je.isUUID=je.v4=je.empty=void 0;var gr=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},z=class extends gr{constructor(){super([z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),"-",z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),"-","4",z._randomHex(),z._randomHex(),z._randomHex(),"-",z._oneOf(z._timeHighBits),z._randomHex(),z._randomHex(),z._randomHex(),"-",z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex(),z._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return z._oneOf(z._chars)}};z._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];z._timeHighBits=["8","9","a","b"];je.empty=new gr("00000000-0000-0000-0000-000000000000");function Ma(){return new z}je.v4=Ma;var pf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function La(t){return pf.test(t)}je.isUUID=La;function mf(t){if(!La(t))throw new Error("invalid uuid");return new gr(t)}je.parse=mf;function yf(){return Ma().asHex()}je.generateUuid=yf}),Oa=O(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.attachPartialResult=wt.ProgressFeature=wt.attachWorkDone=void 0;var Ct=Oe(),vf=Gi(),lt=class{constructor(e,n){this._connection=e,this._token=n,lt.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(Ct.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(Ct.WorkDoneProgress.type,this._token,r)}done(){lt.Instances.delete(this._token),this._connection.sendProgress(Ct.WorkDoneProgress.type,this._token,{kind:"end"})}};lt.Instances=new Map;var Ji=class extends lt{constructor(e,n){super(e,n);this._source=new Ct.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},pr=class{constructor(){}begin(){}report(){}done(){}},Ki=class extends pr{constructor(){super();this._source=new Ct.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function bf(t,e){if(e===void 0||e.workDoneToken===void 0)return new pr;let n=e.workDoneToken;return delete e.workDoneToken,new lt(t,n)}wt.attachWorkDone=bf;var _f=t=>class extends t{constructor(){super();this._progressSupported=!1}initialize(e){var n;((n=e==null?void 0:e.window)===null||n===void 0?void 0:n.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(Ct.WorkDoneProgressCancelNotification.type,r=>{let i=lt.Instances.get(r.token);(i instanceof Ji||i instanceof Ki)&&i.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new pr:new lt(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=vf.generateUuid();return this.connection.sendRequest(Ct.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new Ji(this.connection,e))}else return Promise.resolve(new Ki)}};wt.ProgressFeature=_f;var Xi;(function(t){t.type=new Ct.ProgressType})(Xi||(Xi={}));var Na=class{constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(Xi.type,this._token,e)}};function Rf(t,e){if(!(e===void 0||e.partialResultToken===void 0)){let n=e.partialResultToken;return delete e.partialResultToken,new Na(t,n)}}wt.attachPartialResult=Rf}),Fa=O(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.ConfigurationFeature=void 0;var wf=Oe(),Cf=Yn(),xf=t=>class extends t{getConfiguration(e){return e?Cf.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(wf.ConfigurationRequest.type,n).then(r=>Array.isArray(e)?r:r[0])}};mr.ConfigurationFeature=xf}),Ia=O(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.WorkspaceFoldersFeature=void 0;var vr=Oe(),Pf=t=>class extends t{initialize(e){let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new vr.Emitter,this.connection.onNotification(vr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}getWorkspaceFolders(){return this.connection.sendRequest(vr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(vr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};yr.WorkspaceFoldersFeature=Pf}),Aa=O(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.CallHierarchyFeature=void 0;var Qi=Oe(),Sf=t=>class extends t{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(Qi.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))},onIncomingCalls:e=>{let n=Qi.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:e=>{let n=Qi.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};br.CallHierarchyFeature=Sf}),Zi=O(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.SemanticTokensBuilder=ln.SemanticTokensFeature=void 0;var Yi=Oe(),Ef=t=>class extends t{get semanticTokens(){return{on:e=>{let n=Yi.SemanticTokensRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:e=>{let n=Yi.SemanticTokensDeltaRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:e=>{let n=Yi.SemanticTokensRangeRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ln.SemanticTokensFeature=Ef;var ja=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let s=e,a=n;this._dataLen>0&&(s-=this._prevLine,s===0&&(a-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){if(this._prevData!==void 0){let e=this._prevData.length,n=this._data.length,r=0;for(;r<n&&r<e&&this._prevData[r]===this._data[r];)r++;if(r<n&&r<e){let i=0;for(;i<n&&i<e&&this._prevData[e-1-i]===this._data[n-1-i];)i++;let o=this._data.slice(r,n-i);return{resultId:this.id,edits:[{start:r,deleteCount:e-i-r,data:o}]}}else return r<n?{resultId:this.id,edits:[{start:r,deleteCount:0,data:this._data.slice(r)}]}:r<e?{resultId:this.id,edits:[{start:r,deleteCount:e-r}]}:{resultId:this.id,edits:[]}}else return this.build()}};ln.SemanticTokensBuilder=ja}),Wa=O(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.ShowDocumentFeature=void 0;var Tf=Oe(),Df=t=>class extends t{showDocument(e){return this.connection.sendRequest(Tf.ShowDocumentRequest.type,e)}};_r.ShowDocumentFeature=Df}),Ha=O(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.FileOperationsFeature=void 0;var dn=Oe(),qf=t=>class extends t{onDidCreateFiles(e){this.connection.onNotification(dn.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){this.connection.onNotification(dn.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){this.connection.onNotification(dn.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(dn.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(dn.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(dn.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}};Rr.FileOperationsFeature=qf}),$a=O(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.LinkedEditingRangeFeature=void 0;var kf=Oe(),Mf=t=>class extends t{onLinkedEditingRange(e){this.connection.onRequest(kf.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}};wr.LinkedEditingRangeFeature=Mf}),za=O(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.MonikerFeature=void 0;var Lf=Oe(),Nf=t=>class extends t{get moniker(){return{on:e=>{let n=Lf.MonikerRequest.type;this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Cr.MonikerFeature=Nf}),uo=O(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.createConnection=X.combineFeatures=X.combineLanguagesFeatures=X.combineWorkspaceFeatures=X.combineWindowFeatures=X.combineClientFeatures=X.combineTracerFeatures=X.combineTelemetryFeatures=X.combineConsoleFeatures=X._LanguagesImpl=X.BulkUnregistration=X.BulkRegistration=X.ErrorMessageTracker=X.TextDocuments=void 0;var q=Oe(),We=Yn(),eo=Gi(),$=Oa(),Of=Fa(),Ff=Ia(),If=Aa(),Af=Zi(),jf=Wa(),Wf=Ha(),Hf=$a(),$f=za();function to(t){if(t!==null)return t}var Ba=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new q.Emitter,this._onDidOpen=new q.Emitter,this._onDidClose=new q.Emitter,this._onDidSave=new q.Emitter,this._onWillSave=new q.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map(e=>this._documents[e])}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=q.TextDocumentSyncKind.Full,e.onDidOpenTextDocument(n=>{let r=n.textDocument,i=this._configuration.create(r.uri,r.languageId,r.version,r.text);this._documents[r.uri]=i;let o=Object.freeze({document:i});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)}),e.onDidChangeTextDocument(n=>{let r=n.textDocument,i=n.contentChanges;if(i.length!==0){let o=this._documents[r.uri],{version:s}=r;if(s==null)throw new Error(`Received document change event for ${r.uri} without valid version identifier`);o=this._configuration.update(o,i,s),this._documents[r.uri]=o,this._onDidChangeContent.fire(Object.freeze({document:o}))}}),e.onDidCloseTextDocument(n=>{let r=this._documents[n.textDocument.uri];r&&(delete this._documents[n.textDocument.uri],this._onDidClose.fire(Object.freeze({document:r})))}),e.onWillSaveTextDocument(n=>{let r=this._documents[n.textDocument.uri];r&&this._onWillSave.fire(Object.freeze({document:r,reason:n.reason}))}),e.onWillSaveTextDocumentWaitUntil((n,r)=>{let i=this._documents[n.textDocument.uri];return i&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:i,reason:n.reason}),r):[]}),e.onDidSaveTextDocument(n=>{let r=this._documents[n.textDocument.uri];r&&this._onDidSave.fire(Object.freeze({document:r}))})}};X.TextDocuments=Ba;var Ua=class{constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};X.ErrorMessageTracker=Ua;var no=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(q.MessageType.Error,e)}warn(e){this.send(q.MessageType.Warning,e)}info(e){this.send(q.MessageType.Info,e)}log(e){this.send(q.MessageType.Log,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(q.LogMessageNotification.type,{type:e,message:n})}},Va=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:q.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(q.ShowMessageRequest.type,r).then(to)}showWarningMessage(e,...n){let r={type:q.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(q.ShowMessageRequest.type,r).then(to)}showInformationMessage(e,...n){let r={type:q.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(q.ShowMessageRequest.type,r).then(to)}},Ga=jf.ShowDocumentFeature($.ProgressFeature(Va)),zf;(function(t){function e(){return new ro}t.create=e})(zf=X.BulkRegistration||(X.BulkRegistration={}));var ro=class{constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=We.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=eo.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Bf;(function(t){function e(){return new xr(void 0,[])}t.create=e})(Bf=X.BulkUnregistration||(X.BulkUnregistration={}));var xr=class{constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest(q.UnregistrationRequest.type,n).then(void 0,r=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=We.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(q.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},io=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof ro?this.registerMany(e):e instanceof xr?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=We.string(n)?n:n.method,o=eo.generateUuid(),s={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(q.RegistrationRequest.type,s).then(a=>(e.add({id:o,method:i}),e),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(e,n){let r=We.string(e)?e:e.method,i=eo.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(q.RegistrationRequest.type,o).then(s=>q.Disposable.create(()=>{this.unregisterSingle(i,r)}),s=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(s)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(q.UnregistrationRequest.type,r).then(void 0,i=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(q.RegistrationRequest.type,n).then(()=>new xr(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},Ja=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(q.ApplyWorkspaceEditRequest.type,r)}},Ka=Wf.FileOperationsFeature(Ff.WorkspaceFoldersFeature(Of.ConfigurationFeature(Ja))),oo=class{constructor(){this._trace=q.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==q.Trace.Off&&this.connection.sendNotification(q.LogTraceNotification.type,{message:e,verbose:this._trace===q.Trace.Verbose?n:void 0})}},so=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(q.TelemetryEventNotification.type,e)}},ao=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return $.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,n){return $.attachPartialResult(this.connection,n)}};X._LanguagesImpl=ao;var Xa=$f.MonikerFeature(Hf.LinkedEditingRangeFeature(Af.SemanticTokensFeature(If.CallHierarchyFeature(ao))));function Qa(t,e){return function(n){return e(t(n))}}X.combineConsoleFeatures=Qa;function Ya(t,e){return function(n){return e(t(n))}}X.combineTelemetryFeatures=Ya;function Za(t,e){return function(n){return e(t(n))}}X.combineTracerFeatures=Za;function eu(t,e){return function(n){return e(t(n))}}X.combineClientFeatures=eu;function tu(t,e){return function(n){return e(t(n))}}X.combineWindowFeatures=tu;function nu(t,e){return function(n){return e(t(n))}}X.combineWorkspaceFeatures=nu;function Uf(t,e){return function(n){return e(t(n))}}X.combineLanguagesFeatures=Uf;function Vf(t,e){function n(i,o,s){return i&&o?s(i,o):i||o}return{__brand:"features",console:n(t.console,e.console,Qa),tracer:n(t.tracer,e.tracer,Za),telemetry:n(t.telemetry,e.telemetry,Ya),client:n(t.client,e.client,eu),window:n(t.window,e.window,tu),workspace:n(t.workspace,e.workspace,nu)}}X.combineFeatures=Vf;function Gf(t,e,n){let r=n&&n.console?new(n.console(no)):new no,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(oo)):new oo,s=n&&n.telemetry?new(n.telemetry(so)):new so,a=n&&n.client?new(n.client(io)):new io,c=n&&n.window?new(n.window(Ga)):new Ga,l=n&&n.workspace?new(n.workspace(Ka)):new Ka,f=n&&n.languages?new(n.languages(Xa)):new Xa,p=[r,o,s,a,c,l,f];function y(g){return g instanceof Promise?g:We.thenable(g)?new Promise((h,m)=>{g.then(E=>h(E),E=>m(E))}):Promise.resolve(g)}let v,_,S,k={listen:()=>i.listen(),sendRequest:(g,...h)=>i.sendRequest(We.string(g)?g:g.method,...h),onRequest:(g,h)=>i.onRequest(g,h),sendNotification:(g,h)=>{let m=We.string(g)?g:g.method;arguments.length===1?i.sendNotification(m):i.sendNotification(m,h)},onNotification:(g,h)=>i.onNotification(g,h),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:g=>_=g,onInitialized:g=>i.onNotification(q.InitializedNotification.type,g),onShutdown:g=>v=g,onExit:g=>S=g,get console(){return r},get telemetry(){return s},get tracer(){return o},get client(){return a},get window(){return c},get workspace(){return l},get languages(){return f},onDidChangeConfiguration:g=>i.onNotification(q.DidChangeConfigurationNotification.type,g),onDidChangeWatchedFiles:g=>i.onNotification(q.DidChangeWatchedFilesNotification.type,g),__textDocumentSync:void 0,onDidOpenTextDocument:g=>i.onNotification(q.DidOpenTextDocumentNotification.type,g),onDidChangeTextDocument:g=>i.onNotification(q.DidChangeTextDocumentNotification.type,g),onDidCloseTextDocument:g=>i.onNotification(q.DidCloseTextDocumentNotification.type,g),onWillSaveTextDocument:g=>i.onNotification(q.WillSaveTextDocumentNotification.type,g),onWillSaveTextDocumentWaitUntil:g=>i.onRequest(q.WillSaveTextDocumentWaitUntilRequest.type,g),onDidSaveTextDocument:g=>i.onNotification(q.DidSaveTextDocumentNotification.type,g),sendDiagnostics:g=>i.sendNotification(q.PublishDiagnosticsNotification.type,g),onHover:g=>i.onRequest(q.HoverRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),void 0)),onCompletion:g=>i.onRequest(q.CompletionRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onCompletionResolve:g=>i.onRequest(q.CompletionResolveRequest.type,g),onSignatureHelp:g=>i.onRequest(q.SignatureHelpRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),void 0)),onDeclaration:g=>i.onRequest(q.DeclarationRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onDefinition:g=>i.onRequest(q.DefinitionRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onTypeDefinition:g=>i.onRequest(q.TypeDefinitionRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onImplementation:g=>i.onRequest(q.ImplementationRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onReferences:g=>i.onRequest(q.ReferencesRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onDocumentHighlight:g=>i.onRequest(q.DocumentHighlightRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onDocumentSymbol:g=>i.onRequest(q.DocumentSymbolRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onWorkspaceSymbol:g=>i.onRequest(q.WorkspaceSymbolRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onCodeAction:g=>i.onRequest(q.CodeActionRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onCodeActionResolve:g=>i.onRequest(q.CodeActionResolveRequest.type,(h,m)=>g(h,m)),onCodeLens:g=>i.onRequest(q.CodeLensRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onCodeLensResolve:g=>i.onRequest(q.CodeLensResolveRequest.type,(h,m)=>g(h,m)),onDocumentFormatting:g=>i.onRequest(q.DocumentFormattingRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),void 0)),onDocumentRangeFormatting:g=>i.onRequest(q.DocumentRangeFormattingRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),void 0)),onDocumentOnTypeFormatting:g=>i.onRequest(q.DocumentOnTypeFormattingRequest.type,(h,m)=>g(h,m)),onRenameRequest:g=>i.onRequest(q.RenameRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),void 0)),onPrepareRename:g=>i.onRequest(q.PrepareRenameRequest.type,(h,m)=>g(h,m)),onDocumentLinks:g=>i.onRequest(q.DocumentLinkRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onDocumentLinkResolve:g=>i.onRequest(q.DocumentLinkResolveRequest.type,(h,m)=>g(h,m)),onDocumentColor:g=>i.onRequest(q.DocumentColorRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onColorPresentation:g=>i.onRequest(q.ColorPresentationRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onFoldingRanges:g=>i.onRequest(q.FoldingRangeRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onSelectionRanges:g=>i.onRequest(q.SelectionRangeRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),$.attachPartialResult(i,h))),onExecuteCommand:g=>i.onRequest(q.ExecuteCommandRequest.type,(h,m)=>g(h,m,$.attachWorkDone(i,h),void 0)),dispose:()=>i.dispose()};for(let g of p)g.attach(k);return i.onRequest(q.InitializeRequest.type,g=>{e.initialize(g),We.string(g.trace)&&(o.trace=q.Trace.fromString(g.trace));for(let h of p)h.initialize(g.capabilities);if(_){let h=_(g,new q.CancellationTokenSource().token,$.attachWorkDone(i,g),void 0);return y(h).then(m=>{if(m instanceof q.ResponseError)return m;let E=m;E||(E={capabilities:{}});let N=E.capabilities;N||(N={},E.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=We.number(k.__textDocumentSync)?k.__textDocumentSync:q.TextDocumentSyncKind.None:!We.number(N.textDocumentSync)&&!We.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=We.number(k.__textDocumentSync)?k.__textDocumentSync:q.TextDocumentSyncKind.None);for(let K of p)K.fillServerCapabilities(N);return E})}else{let h={capabilities:{textDocumentSync:q.TextDocumentSyncKind.None}};for(let m of p)m.fillServerCapabilities(h.capabilities);return h}}),i.onRequest(q.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,v)return v(new q.CancellationTokenSource().token)}),i.onNotification(q.ExitNotification.type,()=>{try{S&&S()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(q.SetTraceNotification.type,g=>{o.trace=q.Trace.fromString(g.value)}),k}X.createConnection=Gf}),iu=O(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.resolveModulePath=ke.FileSystem=ke.resolveGlobalYarnPath=ke.resolveGlobalNodePath=ke.resolve=ke.uriToFilePath=void 0;var Jf=require("url"),Xe=require("path"),co=require("fs"),lo=require("child_process");function Kf(t){let e=Jf.parse(t);if(!(e.protocol!=="file:"||!e.path)){let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],s=n[1];o.length===0&&s.length>1&&s[1]===":"&&n.shift()}return Xe.normalize(n.join("/"))}}ke.uriToFilePath=Kf;function fo(){return process.platform==="win32"}function Pr(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,a)=>{let c=process.env,l=Object.create(null);Object.keys(c).forEach(f=>l[f]=c[f]),e&&co.existsSync(e)&&(l[i]?l[i]=e+Xe.delimiter+l[i]:l[i]=e,r&&r(`NODE_PATH value is: ${l[i]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let f=lo.fork("",[],{cwd:n,env:l,execArgv:["-e",o]});if(f.pid===void 0){a(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",y=>{a(y)}),f.on("message",y=>{y.c==="r"&&(f.send({c:"e"}),y.s?s(y.r):a(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){a(f)}})}ke.resolve=Pr;function ho(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};fo()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let o=lo.spawnSync(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let s=o.trim();return t&&t(`'npm config get prefix' value is: ${s}`),s.length>0?fo()?Xe.join(s,"node_modules"):Xe.join(s,"lib","node_modules"):void 0}catch(o){return}finally{process.removeListener("SIGPIPE",i)}}ke.resolveGlobalNodePath=ho;function Xf(t){let e="yarn",n={encoding:"utf8"};fo()&&(e="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=lo.spawnSync(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let s=o.trim().split(/\r?\n/);for(let a of s)try{let c=JSON.parse(a);if(c.type==="log")return Xe.join(c.data,"node_modules")}catch(c){}return}catch(i){return}finally{process.removeListener("SIGPIPE",r)}}ke.resolveGlobalYarnPath=Xf;var ru;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!co.existsSync(__filename.toUpperCase())||!co.existsSync(__filename.toLowerCase())),e}t.isCaseSensitive=n;function r(i,o){return n()?Xe.normalize(o).indexOf(Xe.normalize(i))===0:Xe.normalize(o).toLowerCase().indexOf(Xe.normalize(i).toLowerCase())===0}t.isParent=r})(ru=ke.FileSystem||(ke.FileSystem={}));function Qf(t,e,n,r){return n?(Xe.isAbsolute(n)||(n=Xe.join(t,n)),Pr(e,n,n,r).then(i=>ru.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Pr(e,ho(r),t,r))):Pr(e,ho(r),t,r)}ke.resolveModulePath=Qf}),go=O((Hg,ou)=>{"use strict";ou.exports=Oe()}),au=O(Fe=>{"use strict";var Yf=Fe&&Fe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),su=Fe&&Fe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Yf(e,t,n)};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ProposedFeatures=Fe.SemanticTokensBuilder=void 0;var Zf=Zi();Object.defineProperty(Fe,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Zf.SemanticTokensBuilder}});su(Oe(),Fe);su(uo(),Fe);var eh;(function(t){t.all={__brand:"features"}})(eh=Fe.ProposedFeatures||(Fe.ProposedFeatures={}))}),du=O(Ie=>{"use strict";var th=Ie&&Ie.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),uu=Ie&&Ie.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&th(e,t,n)};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.createConnection=Ie.Files=void 0;var po=Yn(),nh=uo(),An=iu(),At=go();uu(go(),Ie);uu(au(),Ie);var rh;(function(t){t.uriToFilePath=An.uriToFilePath,t.resolveGlobalNodePath=An.resolveGlobalNodePath,t.resolveGlobalYarnPath=An.resolveGlobalYarnPath,t.resolve=An.resolve,t.resolveModulePath=An.resolveModulePath})(rh=Ie.Files||(Ie.Files={}));var cu;function Sr(){if(cu!==void 0)try{cu.end()}catch(t){}}var fn=!1,lu;function ih(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(lu=setInterval(()=>{try{process.kill(r,0)}catch(i){Sr(),process.exit(fn?0:1)}},3e3))}catch(r){}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}ih();var oh={initialize:t=>{let e=t.processId;po.number(e)&&lu===void 0&&setInterval(()=>{try{process.kill(e,0)}catch(n){process.exit(fn?0:1)}},3e3)},get shutdownReceived(){return fn},set shutdownReceived(t){fn=t},exit:t=>{Sr(),process.exit(t)}};function ah(t,e,n,r){let i,o,s,a;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),At.ConnectionStrategy.is(t)||At.ConnectionOptions.is(t)?a=t:(o=t,s=e,a=n),sh(o,s,a,i)}Ie.createConnection=ah;function sh(t,e,n,r){if(!t&&!e&&process.argv.length>2){let a,c,l=process.argv.slice(2);for(let f=0;f<l.length;f++){let p=l[f];if(p==="--node-ipc"){t=new At.IPCMessageReader(process),e=new At.IPCMessageWriter(process);break}else if(p==="--stdio"){t=process.stdin,e=process.stdout;break}else if(p==="--socket"){a=parseInt(l[f+1]);break}else if(p==="--pipe"){c=l[f+1];break}else{var i=p.split("=");if(i[0]==="--socket"){a=parseInt(i[1]);break}else if(i[0]==="--pipe"){c=i[1];break}}}if(a){let f=At.createServerSocketTransport(a);t=f[0],e=f[1]}else if(c){let f=At.createServerPipeTransport(c);t=f[0],e=f[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(po.func(t.read)&&po.func(t.on)){let a=t;a.on("end",()=>{Sr(),process.exit(fn?0:1)}),a.on("close",()=>{Sr(),process.exit(fn?0:1)})}let s=a=>At.createProtocolConnection(t,e,a,n);return nh.createConnection(s,oh,r)}}),hu=O((Bg,fu)=>{"use strict";fu.exports=du()}),Fu=O(()=>{var x=Jt(hu()),xe=Jt(require("path")),hn=Jt(require("fs")),_u=Jt(require("crypto")),Ru=Jt(require("child_process")),bo=Jt(require("os"));"use strict";var Qe;(function(i){let t=Object.prototype.toString;function e(o){return o===!0||o===!1}i.boolean=e;function n(o){return o==null}i.nullOrUndefined=n;function r(o){return t.call(o)==="[object String]"}i.string=r})(Qe||(Qe={}));var re;(function(a){a.applySingleFix="eslint.applySingleFix",a.applySuggestion="eslint.applySuggestion",a.applySameFixes="eslint.applySameFixes",a.applyAllFixes="eslint.applyAllFixes",a.applyDisableLine="eslint.applyDisableLine",a.applyDisableFile="eslint.applyDisableFile",a.openRuleDoc="eslint.openRuleDoc"})(re||(re={}));var ht;(function(t){t[t.ok=1]="ok",t[t.warn=2]="warn",t[t.error=3]="error"})(ht||(ht={}));var Hn;(function(e){e.type=new x.NotificationType("eslint/status")})(Hn||(Hn={}));var _o;(function(e){e.type=new x.RequestType("eslint/noConfig")})(_o||(_o={}));var Ro;(function(e){e.type=new x.RequestType("eslint/noLibrary")})(Ro||(Ro={}));var wo;(function(e){e.type=new x.RequestType("eslint/openDoc")})(wo||(wo={}));var Co;(function(e){e.type=new x.RequestType("eslint/probeFailed")})(Co||(Co={}));var xo;(function(e){e.type=new x.NotificationType0("eslint/showOutputChannel")})(xo||(xo={}));var gt;(function(t){t.auto="auto",t.location="location"})(gt||(gt={}));(function(e){function t(n){return n===e.auto||n===e.location}e.is=t})(gt||(gt={}));var Po;(function(e){function t(n){let r=n;return r&&gt.is(r.mode)}e.is=t})(Po||(Po={}));var wu;(function(e){function t(n){let r=n;return r&&Qe.string(r.directory)&&(Qe.boolean(r["!cwd"])||r["!cwd"]===void 0)}e.is=t})(wu||(wu={}));var ae;(function(t){t.on="on",t.off="off",t.probe="probe"})(ae||(ae={}));var So;(function(t){t.off="off",t.warn="warn",t.error="error"})(So||(So={}));var Eo;(function(t){t.all="all",t.problems="problems"})(Eo||(Eo={}));var Te;(function(t){t.info="info",t.warn="warn",t.error="error",t.off="off",t.default="default",t.downgrade="downgrade",t.upgrade="upgrade"})(Te||(Te={}));var Pt;(function(e){function t(n){return n.library!==void 0}e.hasLibrary=t})(Pt||(Pt={}));var Cu;(function(e){function t(n){return n!==void 0&&n.type!==void 0}e.hasMetaType=t})(Cu||(Cu={}));var $n;(function(n){function t(r){return r.ESLint!==void 0}n.hasESLintClass=t;function e(r){return r.CLIEngine!==void 0}n.hasCLIEngine=e})($n||($n={}));var Tr;(function(e){function t(n,r,i){return $n.hasESLintClass(n)&&i?new n.ESLint(r):$n.hasCLIEngine(n)?new xu(new n.CLIEngine(r)):new n.ESLint(r)}e.newESLintClass=t})(Tr||(Tr={}));var To;(function(e){function t(n){return n.getRules!==void 0}e.hasRule=t})(To||(To={}));var xu=class{constructor(e){this.cli=e}get isCLIEngine(){return!0}async lintText(e,n){return this.cli.executeOnText(e,n.filePath,n.warnIgnored).results}async isPathIgnored(e){return this.cli.isPathIgnored(e)}getRulesMetaForResults(e){if(!!To.hasRule(this.cli)){let n={};for(let[r,i]of this.cli.getRules())i.meta!==void 0&&(n[r]=i.meta);return n}}async calculateConfigForFile(e){return typeof this.cli.getConfigForFile=="function"?this.cli.getConfigForFile(e):void 0}},St;(function(a){let t=new Set,e=new Map;function n(c,l){let f;if(c.isCLIEngine){let p=l.filter(y=>!t.has(y.filePath));if(p.length===0)return;f=typeof c.getRulesMetaForResults=="function"?c.getRulesMetaForResults(p):void 0,p.forEach(y=>t.add(y.filePath))}else f=typeof c.getRulesMetaForResults=="function"?c.getRulesMetaForResults(l):void 0;f!==void 0&&Object.entries(f).forEach(([p,y])=>{e.has(p)||y&&y.docs&&Qe.string(y.docs.url)&&e.set(p,y)})}a.capture=n;function r(){t.clear(),e.clear()}a.clear=r;function i(c){var l,f;return(f=(l=e.get(c))==null?void 0:l.docs)==null?void 0:f.url}a.getUrl=i;function o(c){var l;return(l=e.get(c))==null?void 0:l.type}a.getType=o;function s(c){return e.has(c)}a.hasRuleId=s})(St||(St={}));function lh(t){try{return require(t)}catch(e){e.stack&&W.console.error(e.stack.toString())}}var zn=new Er(1024);function dh(t,e){let n=zn.get(t);if(n!==null){if(n!==void 0)return n;if(n===void 0){zn.set(t,null);return}return zn.set(t,n),n}}var gn=new Er(128);function fh(t,e){for(let n of e){if(n.startsWith("!")&&new RegExp(`^${n.slice(1).replace(/\*/g,".*")}$`,"g").test(t))return!0;if(new RegExp(`^${n.replace(/\*/g,".*")}$`,"g").test(t))return!1}return!0}async function hh(t,e){let n=gn.get(t);if(n!==null){if(n!==void 0)return n;let r=e.codeActionOnSave.rules;if(r===void 0||!$n.hasESLintClass(e.library)||!e.useESLintClass?n=void 0:n=await Bn(async i=>{let o=await i.calculateConfigForFile(t);if(!(o===void 0||o.rules===void 0||o.rules.length===0)){let s=new Set,a=new Set;if(r.length===0)Object.keys(o.rules).forEach(c=>s.add(c));else for(let c of Object.keys(o.rules))fh(c,r)?s.add(c):a.add(c);return s.size>0?{offRules:s,onRules:a}:void 0}},e),n==null){gn.set(t,null);return}else return gn.set(t,n),n}}function ph(t,e){let n=e.message,r=Qe.nullOrUndefined(e.line)?0:Math.max(0,e.line-1),i=Qe.nullOrUndefined(e.column)?0:Math.max(0,e.column-1),o=Qe.nullOrUndefined(e.endLine)?r:Math.max(0,e.endLine-1),s=Qe.nullOrUndefined(e.endColumn)?i:Math.max(0,e.endColumn-1),a=dh(e.ruleId,t.rulesCustomizations),c={message:n,severity:gh(e.severity,a),source:"eslint",range:{start:{line:r,character:i},end:{line:o,character:s}}};if(e.ruleId){let l=St.getUrl(e.ruleId);c.code=e.ruleId,l!==void 0&&(c.codeDescription={href:l}),e.ruleId==="no-unused-vars"&&(c.tags=[x.DiagnosticTag.Unnecessary])}return[c,a]}var Un;(function(n){function t(r){return r.edit!==void 0}n.isFixable=t;function e(r){return r.suggestions!==void 0}n.hasSuggestions=e})(Un||(Un={}));var $t;(function(e){function t(n,r){return x.TextEdit.replace(x.Range.create(n.positionAt(r.edit.range[0]),n.positionAt(r.edit.range[1])),r.edit.text||"")}e.createTextEdit=t})($t||($t={}));var Do;(function(e){function t(n,r){return x.TextEdit.replace(x.Range.create(n.positionAt(r.fix.range[0]),n.positionAt(r.fix.range[1])),r.fix.text||"")}e.createTextEdit=t})(Do||(Do={}));function Pu(t){let e=t.range,n;if(t.message){let r=_u.createHash("md5");r.update(t.message),n=r.digest("base64")}return`[${e.start.line},${e.start.character},${e.end.line},${e.end.character}]-${t.code}-${n!=null?n:""}`}var zt=new Map;function Su(t,e,n){if(!!n.ruleId){let r=t.uri,i=zt.get(r);i===void 0&&(i=new Map,zt.set(r,i)),i.set(Pu(e),{label:`Fix this ${n.ruleId} problem`,documentVersion:t.version,ruleId:n.ruleId,line:n.line,diagnostic:e,edit:n.fix,suggestions:n.suggestions})}}function mh(t,e){switch(e){case Te.off:case Te.info:case Te.warn:case Te.error:return e;case Te.downgrade:switch(qo(t)){case x.DiagnosticSeverity.Error:return Te.warn;case x.DiagnosticSeverity.Warning:case x.DiagnosticSeverity.Information:return Te.info}case Te.upgrade:switch(qo(t)){case x.DiagnosticSeverity.Information:return Te.warn;case x.DiagnosticSeverity.Warning:case x.DiagnosticSeverity.Error:return Te.error}default:return t}}function qo(t){switch(t){case 1:case Te.warn:return x.DiagnosticSeverity.Warning;case 2:case Te.error:return x.DiagnosticSeverity.Error;case Te.info:return x.DiagnosticSeverity.Information;default:return x.DiagnosticSeverity.Error}}function gh(t,e){return qo(mh(t,e))}var pn;(function(t){t[t.Backslash=92]="Backslash"})(pn||(pn={}));function Dr(t){if(process.platform!=="win32")return!1;if(!t||t.length<5)return!1;let e=t.charCodeAt(0);if(e!==92)return!1;if(e=t.charCodeAt(1),e!==92)return!1;let n=2,r=n;for(;n<t.length&&(e=t.charCodeAt(n),e!==92);n++);return r===n?!1:(e=t.charCodeAt(n+1),!(isNaN(e)||e===92))}function yh(t){return process.platform!=="win32"||t.length<2||t[1]!==":"?t:t[0].toUpperCase()+t.substr(1)}function vh(t){let e=t.fsPath;if(process.platform==="win32"&&e.length>=2&&e[1]===":"&&(e=e[0].toUpperCase()+e.substr(1)),process.platform==="win32"||process.platform==="darwin"){let n=hn.realpathSync.native(e);n.toLowerCase()===e.toLowerCase()&&(e=n)}return e}function Eu(t){if(t!==void 0)return process.platform==="win32"?t.replace(/\\/g,"/"):t}function bh(t){return Qe.string(t)?jt.parse(t):t instanceof jt?t:jt.parse(t.uri)}function Et(t){if(!!t){let e=bh(t);if(e.scheme==="file")return vh(e)}}var _h=new x.NotificationType("eslint/exitCalled"),Rh=process.exit;process.exit=t=>{let e=new Error("stack");W.sendNotification(_h,[t||0,e.stack]),setTimeout(()=>{Rh(t)},1e3)};process.on("uncaughtException",t=>{let e;if(t&&(typeof t.stack=="string"?e=t.stack:typeof t.message=="string"?e=t.message:typeof t=="string"&&(e=t),e===void 0||e.length===0))try{e=JSON.stringify(t,void 0,4)}catch(n){}console.error("Uncaught exception received."),e&&console.error(e)});function wh(t){let e=t;return e&&typeof e.method=="string"&&(typeof e.id=="string"||typeof e.id=="number")}var W=x.createConnection({cancelUndispatched:t=>{if(wh(t)&&t.method==="textDocument/codeAction")return{jsonrpc:t.jsonrpc,id:t.id,result:null}}});W.console.info(`ESLint server running in node ${process.version}`);var Me,Ch={yarn:{cache:void 0,get(){return x.Files.resolveGlobalYarnPath(Vn)}},npm:{cache:void 0,get(){return x.Files.resolveGlobalNodePath(Vn)}},pnpm:{cache:void 0,get(){return Ru.execSync("pnpm root -g").toString().trim()}}};function xh(t){let e=Ch[t];if(e)return e.cache===void 0&&(e.cache=e.get()),e.cache}var ko=new Map([["javascript",{ext:"js",lineComment:"//",blockComment:["/*","*/"]}],["javascriptreact",{ext:"jsx",lineComment:"//",blockComment:["/*","*/"]}],["typescript",{ext:"ts",lineComment:"//",blockComment:["/*","*/"]}],["typescriptreact",{ext:"tsx",lineComment:"//",blockComment:["/*","*/"]}],["html",{ext:"html",lineComment:"//",blockComment:["/*","*/"]}],["vue",{ext:"vue",lineComment:"//",blockComment:["/*","*/"]}],["coffeescript",{ext:"coffee",lineComment:"#",blockComment:["###","###"]}],["yaml",{ext:"yaml",lineComment:"#",blockComment:["#",""]}],["graphql",{ext:"graphql",lineComment:"#",blockComment:["#",""]}]]);function Tu(t){var e,n;return(n=(e=ko.get(t))==null?void 0:e.lineComment)!=null?n:"//"}function Ph(t){var e,n;return(n=(e=ko.get(t))==null?void 0:e.blockComment)!=null?n:["/**","*/"]}var Sh=function(){let e=new Map,n=/\/@typescript-eslint\/parser\//,r=/\/babel-eslint\/lib\/index.js$/;e.set("typescript",[n,r]),e.set("typescriptreact",[n,r]);let i=/\/@angular-eslint\/template-parser\//;return e.set("html",[i]),e}(),Eh=function(){let e=new Map,n=/vue-eslint-parser\/.*\.js$/,r=/@typescript-eslint\/parser\/.*\.js$/;return e.set("typescript",{regExps:[n],parsers:new Set(["@typescript-eslint/parser"]),parserRegExps:[r]}),e}(),Th=new Map([["html","html"],["vue","vue"],["markdown","markdown"]]),Dh=new Set(["javascript","javascriptreact"]),Du=new Map,Gn=new Map,qh=[["package.json",!0],[".eslintignore",!0],[".eslintrc",!1],[".eslintrc.json",!1],[".eslintrc.js",!1],[".eslintrc.yaml",!1],[".eslintrc.yml",!1]];function qu(t,e){if(t!==void 0){let n=jt.parse(t.uri);if(n.scheme==="untitled"){if(e.workspaceFolder!==void 0){let r=ko.get(t.languageId),i=Et(e.workspaceFolder.uri);if(i!==void 0&&r!==void 0)return xe.join(i,`test${r}`)}return}else return Et(n)}}function kh(t,e){if(e===void 0||Dr(e))return t;if(e.indexOf(`${xe.sep}node_modules${xe.sep}`)!==-1)return t;let n=t,r=xe.dirname(e);e:for(;r!==void 0&&r.startsWith(t);){for(let o of qh)if(hn.existsSync(xe.join(r,o[0]))){if(n=r,o[1])break e;break}let i=xe.dirname(r);r=i!==r?i:void 0}return n}function Bt(t){let e=t.uri,n=Gn.get(e);return n||(n=W.workspace.getConfiguration({scopeUri:e,section:""}).then(r=>{var y;let i=Object.assign({},r,{silent:!1,library:void 0,resolvedGlobalPackageManagerPath:void 0},{workingDirectory:void 0});if(i.validate===ae.off)return i;i.resolvedGlobalPackageManagerPath=xh(i.packageManager);let o=Et(t),s=i.workspaceFolder!==void 0?Et(i.workspaceFolder.uri):void 0,a=r.workingDirectory!==void 0,c=(y=r.workingDirectory)!=null?y:{mode:gt.location};if(Po.is(c)){let v;c.mode===gt.location?s!==void 0?v=s:o!==void 0&&!Dr(o)&&(v=xe.dirname(o)):c.mode===gt.auto&&(s!==void 0?v=kh(s,o):o!==void 0&&!Dr(o)&&(v=xe.dirname(o))),v!==void 0&&hn.existsSync(v)&&(i.workingDirectory={directory:v})}else i.workingDirectory=c;let l,f;i.nodePath!==null&&(f=i.nodePath,!xe.isAbsolute(f)&&s!==void 0&&(f=xe.join(s,f)));let p;return!a&&o!==void 0&&(p=xe.dirname(o)),p===void 0&&i.workingDirectory!==void 0&&!i.workingDirectory["!cwd"]&&(p=i.workingDirectory.directory),f!==void 0?l=x.Files.resolve("eslint",f,f,Vn).then(void 0,()=>x.Files.resolve("eslint",i.resolvedGlobalPackageManagerPath,p,Vn)):l=x.Files.resolve("eslint",i.resolvedGlobalPackageManagerPath,p,Vn),i.silent=i.validate===ae.probe,l.then(async v=>{var S;let _=Du.get(v);if(_===void 0?(_=lh(v),_===void 0?(i.validate=ae.off,i.silent||W.console.error(`Failed to load eslint library from ${v}. See output panel for more information.`)):_.CLIEngine===void 0&&_.ESLint===void 0?(i.validate=ae.off,W.console.error(`The eslint library loaded from ${v} doesn't neither exports a CLIEngine nor an ESLint class. You need at least eslint@1.0.0`)):(W.console.info(`ESLint library loaded from: ${v}`),i.library=_,Du.set(v,_))):i.library=_,i.validate===ae.probe&&Pt.hasLibrary(i)){i.validate=ae.off;let k=qu(t,i);if(k!==void 0){let g=Sh.get(t.languageId),h=Th.get(t.languageId),m=Eh.get(t.languageId);if(Dh.has(t.languageId))i.validate=ae.on;else if(g!==void 0||h!==void 0||m!==void 0){let E=await Bn(N=>{try{return N.calculateConfigForFile(k)}catch(K){return}},i);if(E!==void 0){let N=E.parser!==null?Eu(E.parser):void 0;if(N!==void 0){if(g!==void 0){for(let K of g)if(K.test(N)){i.validate=ae.on;break}}if(i.validate!==ae.on&&m!==void 0&&typeof((S=E.parserOptions)==null?void 0:S.parser)=="string"){let K=Eu(E.parserOptions.parser);for(let ne of m.regExps)if(ne.test(N)&&(m.parsers.has(E.parserOptions.parser)||m.parserRegExps!==void 0&&m.parserRegExps.some(B=>B.test(K)))){i.validate=ae.on;break}}}if(i.validate!==ae.on&&Array.isArray(E.plugins)&&E.plugins.length>0&&h!==void 0){for(let K of E.plugins)if(K===h){i.validate=ae.on;break}}}}}if(i.validate===ae.off){let g={textDocument:{uri:t.uri}};void W.sendRequest(Co.type,g)}}if(i.format&&i.validate===ae.on&&Pt.hasLibrary(i)){let k=jt.parse(e),g=k.scheme==="file",h=g?k.fsPath.replace(/\\/g,"/"):k.fsPath;h=h.replace(/[\[\]\{\}]/g,"?");let E={documentSelector:[{scheme:k.scheme,pattern:h}]};if(!g)mn.set(e,W.client.register(x.DocumentFormattingRequest.type,E));else{let N=Et(e);await Bn(async K=>{await K.isPathIgnored(N)||mn.set(e,W.client.register(x.DocumentFormattingRequest.type,E))},i)}}return i},()=>(i.validate=ae.off,i.silent||void W.sendRequest(Ro.type,{source:{uri:t.uri}}),i))}),Gn.set(e,n),n)}var Mo;(function(e){function t(n){let r=n;return r&&r.token!==void 0&&r.resolve!==void 0&&r.reject!==void 0}e.is=t})(Mo||(Mo={}));var Lo;(function(e){function t(n){let r=n;return r&&typeof r.then=="function"}e.is=t})(Lo||(Lo={}));var ku=class{constructor(e){this.connection=e;this.queue=[],this.requestHandlers=new Map,this.notificationHandlers=new Map}registerRequest(e,n,r){this.connection.onRequest(e,(i,o)=>new Promise((s,a)=>{this.queue.push({method:e.method,params:i,documentVersion:r?r(i):void 0,resolve:s,reject:a,token:o}),this.trigger()})),this.requestHandlers.set(e.method,{handler:n,versionProvider:r})}registerNotification(e,n,r){W.onNotification(e,i=>{this.queue.push({method:e.method,params:i,documentVersion:r?r(i):void 0}),this.trigger()}),this.notificationHandlers.set(e.method,{handler:n,versionProvider:r})}addNotificationMessage(e,n,r){this.queue.push({method:e.method,params:n,documentVersion:r}),this.trigger()}onNotification(e,n,r){this.notificationHandlers.set(e.method,{handler:n,versionProvider:r})}trigger(){this.timer||this.queue.length===0||(this.timer=setImmediate(()=>{this.timer=void 0,this.processQueue(),this.trigger()}))}processQueue(){let e=this.queue.shift();if(!!e)if(Mo.is(e)){let n=e;if(n.token.isCancellationRequested){n.reject(new x.ResponseError(x.LSPErrorCodes.RequestCancelled,"Request got cancelled"));return}let r=this.requestHandlers.get(n.method);if(r===void 0)throw new Error("No handler registered");if(r.versionProvider&&n.documentVersion!==void 0&&n.documentVersion!==r.versionProvider(n.params)){n.reject(new x.ResponseError(x.LSPErrorCodes.RequestCancelled,"Request got cancelled"));return}let i=r.handler(n.params,n.token);Lo.is(i)?i.then(o=>{n.resolve(o)},o=>{n.reject(o)}):n.resolve(i)}else{let n=e,r=this.notificationHandlers.get(n.method);if(r===void 0)throw new Error("No handler registered");if(r.versionProvider&&n.documentVersion!==void 0&&n.documentVersion!==r.versionProvider(n.params))return;r.handler(n.params)}}},He=new ku(W),mn=new Map,Tt;(function(e){e.type=new x.NotificationType("eslint/validate")})(Tt||(Tt={}));He.onNotification(Tt.type,t=>{void Mh(t,!0)},t=>t.version);function Lh(){Me.listen(W),Me.onDidOpen(t=>{void Bt(t.document).then(e=>{e.validate!==ae.on||!Pt.hasLibrary(e)||e.run==="onSave"&&He.addNotificationMessage(Tt.type,t.document,t.document.version)})}),Me.onDidChangeContent(t=>{let e=t.document.uri;zt.delete(e),void Bt(t.document).then(n=>{n.validate!==ae.on||n.run!=="onType"||He.addNotificationMessage(Tt.type,t.document,t.document.version)})}),Me.onDidSave(t=>{void Bt(t.document).then(e=>{e.validate!==ae.on||e.run!=="onSave"||He.addNotificationMessage(Tt.type,t.document,t.document.version)})}),Me.onDidClose(t=>{void Bt(t.document).then(e=>{let n=t.document.uri;Gn.delete(n),gn.delete(n),zt.delete(n);let r=mn.get(t.document.uri);r!==void 0&&(void r.then(i=>i.dispose()),mn.delete(t.document.uri)),e.validate===ae.on&&W.sendDiagnostics({uri:n,diagnostics:[]})})})}function Mu(){Gn.clear(),zn.clear(),gn.clear();for(let t of Me.all())He.addNotificationMessage(Tt.type,t,t.version);for(let t of mn.values())void t.then(e=>e.dispose());mn.clear()}function Vn(t,e){W.tracer.log(t,e)}W.onInitialize((t,e,n)=>{n.begin("Initializing ESLint Server");let r=x.TextDocumentSyncKind.Incremental;return Me=new x.TextDocuments(jn),Lh(),n.done(),{capabilities:{textDocumentSync:{openClose:!0,change:r,willSaveWaitUntil:!1,save:{includeText:!1}},workspace:{workspaceFolders:{supported:!0}},codeActionProvider:{codeActionKinds:[x.CodeActionKind.QuickFix,`${x.CodeActionKind.SourceFixAll}.eslint`]},executeCommandProvider:{commands:[re.applySingleFix,re.applySuggestion,re.applySameFixes,re.applyAllFixes,re.applyDisableLine,re.applyDisableFile,re.openRuleDoc]}}}});W.onInitialized(()=>{void W.client.register(x.DidChangeConfigurationNotification.type,void 0),void W.client.register(x.DidChangeWorkspaceFoldersNotification.type,void 0)});He.registerNotification(x.DidChangeConfigurationNotification.type,t=>{Mu()});He.registerNotification(x.DidChangeWorkspaceFoldersNotification.type,t=>{Mu()});var Ah=[Nh,Oh,Fh,Ih];function Mh(t,e=!0){return Me.get(t.uri)?Bt(t).then(async n=>{if(!(n.validate!==ae.on||!Pt.hasLibrary(n)))try{await jh(t,n,e),W.sendNotification(Hn.type,{uri:t.uri,state:1})}catch(r){if(W.sendDiagnostics({uri:t.uri,diagnostics:[]}),n.silent)W.console.info(Jn(r,t)),W.sendNotification(Hn.type,{uri:t.uri,state:1});else{let i;for(let o of Ah)if(i=o(r,t,n.library),i)break;i=i||3,W.sendNotification(Hn.type,{uri:t.uri,state:i})}}}):Promise.resolve(void 0)}function Wh(t){t.forEach(e=>{He.addNotificationMessage(Tt.type,e,e.version)})}function Jn(t,e){let n;return typeof t.message=="string"||t.message instanceof String?(n=t.message,n=n.replace(/\r?\n/g," "),/^CLI: /.test(n)&&(n=n.substr(5))):n=`An unknown error occurred while validating document: ${e.uri}`,n}var Hh=new Set(["problem","suggestion","layout"]);async function jh(t,e,n=!0){let r=Object.assign(Object.create(null),e.options),i;if(Array.isArray(r.fixTypes)&&r.fixTypes.length>0){i=new Set;for(let c of r.fixTypes)Hh.has(c)&&i.add(c);i.size===0&&(i=void 0)}let o=t.getText(),s=t.uri,a=qu(t,e);await Bn(async c=>{zt.delete(s);let l=await c.lintText(o,{filePath:a,warnIgnored:e.onIgnoredFiles!==So.off});St.capture(c,l);let f=[];if(l&&Array.isArray(l)&&l.length>0){let p=l[0];p.messages&&Array.isArray(p.messages)&&p.messages.forEach(y=>{if(y){let[v,_]=ph(e,y);if(_===Te.off||e.quiet&&v.severity===x.DiagnosticSeverity.Warning||f.push(v),i!==void 0&&y.ruleId!==void 0&&y.fix!==void 0){let S=St.getType(y.ruleId);S!==void 0&&i.has(S)&&Su(t,v,y)}else Su(t,v,y)}})}n&&W.sendDiagnostics({uri:s,diagnostics:f})},e)}function Bn(t,e,n){let r=n===void 0?Object.assign(Object.create(null),e.options):Object.assign(Object.create(null),e.options,n),i=process.cwd();try{e.workingDirectory&&(r.cwd=yh(e.workingDirectory.directory),e.workingDirectory["!cwd"]!==!0&&hn.existsSync(e.workingDirectory.directory)&&process.chdir(e.workingDirectory.directory));let o=Tr.newESLintClass(e.library,r,e.useESLintClass);return t(o)}finally{i!==process.cwd()&&process.chdir(i)}}var No=new Map;function $h(t){let e=t;return e.messageTemplate==="no-config-found"||e.message==="No ESLint configuration found."}function Nh(t,e,n){if(!!$h(t))return No.has(e.uri)||(W.sendRequest(_o.type,{message:Jn(t,e),document:{uri:e.uri}}).then(void 0,()=>{}),No.set(e.uri,n)),2}var qr=new Map;function Oh(t,e,n){if(!!t.message){function r(o){return qr.has(o)||(W.console.error(Jn(t,e)),Me.get(jt.file(o).toString())||W.window.showInformationMessage(Jn(t,e)),qr.set(o,n)),2}let i=/Cannot read config file:\s+(.*)\nError:\s+(.*)/.exec(t.message);if(i&&i.length===3)return r(i[1]);if(i=/(.*):\n\s*Configuration for rule \"(.*)\" is /.exec(t.message),i&&i.length===3)return r(i[1]);if(i=/Cannot find module '([^']*)'\nReferenced from:\s+(.*)/.exec(t.message),i&&i.length===3)return r(i[2])}}var Oo=new Map;function Fh(t,e,n){if(!!t.message){function r(o,s,a){if(!Oo.has(o)){let c=Et(e);Oo.set(o,n),a.messageTemplate==="plugin-missing"?W.console.error(["",`${a.message.toString()}`,`Happened while validating ${c||e.uri}`,"This can happen for a couple of reasons:","1. The plugin name is spelled incorrectly in an ESLint configuration file (e.g. .eslintrc).",`2. If ESLint is installed globally, then make sure ${s} is installed globally as well.`,`3. If ESLint is installed locally, then ${s} isn't installed correctly.`,"",`Consider running eslint --debug ${c||e.uri} from a terminal to obtain a trace about the configuration files used.`].join(`
`)):W.console.error([`${a.message.toString()}`,`Happened while validating ${c||e.uri}`].join(`
`))}return 2}let i=/Failed to load plugin (.*): Cannot find module (.*)/.exec(t.message);if(i&&i.length===3)return r(i[1],i[2],t)}}function Ih(t,e){return void W.window.showErrorMessage(`ESLint: ${Jn(t,e)}. Please see the 'ESLint' output channel for details.`,{title:"Open Output",id:1}).then(n=>{n!==void 0&&n.id===1&&W.sendNotification(xo.type)}),Qe.string(t.stack)&&(W.console.error("ESLint stack trace:"),W.console.error(t.stack)),3}He.registerNotification(x.DidChangeWatchedFilesNotification.type,async t=>{St.clear(),No.clear(),Oo.clear(),Gn.clear(),zn.clear(),gn.clear(),await Promise.all(t.changes.map(async e=>{let n=Et(e.uri);if(!(n===void 0||n.length===0||Dr(n))){let r=xe.dirname(n);if(r){let i=qr.get(n);if(i!==void 0){let o=Tr.newESLintClass(i,{},!1);try{await o.lintText("",{filePath:xe.join(r,"___test___.js")}),qr.delete(n)}catch(s){}}}}})),Wh(Me.all())});var pt=class{constructor(e){this.edits=e}static overlaps(e,n){return e!==void 0&&e.edit.range[1]>n.edit.range[0]}static sameRange(e,n){return e.edit.range[0]===n.edit.range[0]&&e.edit.range[1]===n.edit.range[1]}isEmpty(){return this.edits.size===0}getDocumentVersion(){if(this.isEmpty())throw new Error("No edits recorded.");return this.edits.values().next().value.documentVersion}getScoped(e){let n=[];for(let r of e){let i=Pu(r),o=this.edits.get(i);o&&n.push(o)}return n}getAllSorted(){let e=[];for(let n of this.edits.values())Un.isFixable(n)&&e.push(n);return e.sort((n,r)=>{let i=n.edit.range[0]-r.edit.range[0];if(i!==0)return i;let o=n.edit.range[1]-n.edit.range[0],s=r.edit.range[1]-r.edit.range[0];return o===s?0:o===0?-1:s===0?1:o-s})}getApplicable(){let e=this.getAllSorted();if(e.length<=1)return e;let n=[],r=e[0];n.push(r);for(let i=1;i<e.length;i++){let o=e[i];!pt.overlaps(r,o)&&!pt.sameRange(r,o)&&(n.push(o),r=o)}return n}},Lu=class{constructor(){this._actions=new Map}get(e){let n=this._actions.get(e);return n===void 0&&(n={fixes:[],suggestions:[]},this._actions.set(e,n)),n}get fixAll(){return this._fixAll===void 0&&(this._fixAll=[]),this._fixAll}all(){let e=[];for(let n of this._actions.values())e.push(...n.fixes),e.push(...n.suggestions),n.disable&&e.push(n.disable),n.fixAll&&e.push(n.fixAll),n.disableFile&&e.push(n.disableFile),n.showDocumentation&&e.push(n.showDocumentation);return this._fixAll!==void 0&&e.push(...this._fixAll),e}get length(){let e=0;for(let n of this._actions.values())e+=n.fixes.length;return e}},Nu=class{constructor(){this.values=new Map,this.uri=void 0,this.version=void 0}clear(e){e===void 0?(this.uri=void 0,this.version=void 0):(this.uri=e.uri,this.version=e.version),this.values.clear()}isUsable(e,n){return this.uri===e&&this.version===n}set(e,n){this.values.set(e,n)}get(e){return this.values.get(e)}},Ye;(function(n){function t(r,i,o){return{uri:r.uri,version:r.version,ruleId:i,sequence:o}}n.create=t;function e(r){return r.ruleId!==void 0}n.hasRuleId=e})(Ye||(Ye={}));var tt=new Nu,Ou=`${x.CodeActionKind.SourceFixAll}.eslint`;He.registerRequest(x.CodeActionRequest.type,t=>{let e=new Lu,n=t.textDocument.uri,r=Me.get(n);if(r===void 0)return tt.clear(r),e.all();function i(l,f,p,y,v){let _=x.Command.create(l,p,y),S=x.CodeAction.create(l,_,f);return v!==void 0&&(S.diagnostics=[v]),S}function o(l,f){return x.TextEdit.insert(x.Position.create(l.line-1,0),`${f}${Tu(r.languageId)} eslint-disable-next-line ${l.ruleId}${bo.EOL}`)}function s(l){return x.TextEdit.insert(x.Position.create(l.line-1,2147483647),` ${Tu(r.languageId)} eslint-disable-line ${l.ruleId}`)}function a(l){let p=(r==null?void 0:r.getText(x.Range.create(x.Position.create(0,0),x.Position.create(0,2))))==="#!"?1:0,y=Ph(r.languageId);return x.TextEdit.insert(x.Position.create(p,0),`${y[0]} eslint-disable ${l.ruleId} ${y[1]}${bo.EOL}`)}function c(l){let f=l.length;if(f!==0)return l[f-1]}return Bt(r).then(async l=>{if(l.validate!==ae.on||!Pt.hasLibrary(l))return e.all();let f=zt.get(n);if(f===void 0&&l.run==="onType")return e.all();let p=t.context.only!==void 0&&t.context.only.length>0?t.context.only[0]:void 0,y=p===x.CodeActionKind.Source,v=p===Ou||p===x.CodeActionKind.SourceFixAll;if(v||y){if(v&&l.codeActionOnSave.enable){let h={uri:r.uri,version:r.version},m=await Fo(h,Dt.onSave);m!==void 0&&e.fixAll.push(x.CodeAction.create("Fix all ESLint auto-fixable problems",{documentChanges:[x.TextDocumentEdit.create(h,m)]},Ou))}else y&&e.fixAll.push(i("Fix all ESLint auto-fixable problems",x.CodeActionKind.Source,re.applyAllFixes,Ye.create(r)));return e.all()}if(f===void 0)return e.all();let _=new pt(f);if(_.isEmpty())return e.all();let S=-1,k=[],g=p!=null?p:x.CodeActionKind.QuickFix;for(let h of _.getScoped(t.context.diagnostics)){S=h.documentVersion;let m=h.ruleId;if(k.push(m),Un.isFixable(h)){let E=new x.WorkspaceChange;E.getTextEditChange({uri:n,version:S}).add($t.createTextEdit(r,h)),tt.set(`${re.applySingleFix}:${m}`,E);let N=i(h.label,g,re.applySingleFix,Ye.create(r,m),h.diagnostic);N.isPreferred=!0,e.get(m).fixes.push(N)}if(Un.hasSuggestions(h)&&h.suggestions.forEach((E,N)=>{let K=new x.WorkspaceChange;K.getTextEditChange({uri:n,version:S}).add(Do.createTextEdit(r,E)),tt.set(`${re.applySuggestion}:${m}:${N}`,K);let ne=i(`${E.desc} (${h.ruleId})`,x.CodeActionKind.QuickFix,re.applySuggestion,Ye.create(r,m,N),h.diagnostic);e.get(m).suggestions.push(ne)}),l.codeAction.disableRuleComment.enable){let E=new x.WorkspaceChange;if(l.codeAction.disableRuleComment.location==="sameLine")E.getTextEditChange({uri:n,version:S}).add(s(h));else{let N=r.getText(x.Range.create(x.Position.create(h.line-1,0),x.Position.create(h.line-1,2147483647))),K=/^([ \t]*)/.exec(N),ne=K!==null&&K.length>0?K[1]:"";E.getTextEditChange({uri:n,version:S}).add(o(h,ne))}tt.set(`${re.applyDisableLine}:${m}`,E),e.get(m).disable=i(`Disable ${m} for this line`,g,re.applyDisableLine,Ye.create(r,m)),e.get(m).disableFile===void 0&&(E=new x.WorkspaceChange,E.getTextEditChange({uri:n,version:S}).add(a(h)),tt.set(`${re.applyDisableFile}:${m}`,E),e.get(m).disableFile=i(`Disable ${m} for the entire file`,g,re.applyDisableFile,Ye.create(r,m)))}l.codeAction.showDocumentation.enable&&e.get(m).showDocumentation===void 0&&(St.hasRuleId(m)&&(e.get(m).showDocumentation=i(`Show documentation for ${m}`,g,re.openRuleDoc,Ye.create(r,m))))}if(e.length>0){let h=new Map(k.map(m=>[m,[]]));for(let m of _.getAllSorted())if(S===-1&&(S=m.documentVersion),h.has(m.ruleId)){let E=h.get(m.ruleId);pt.overlaps(c(E),m)||E.push(m)}h.forEach((m,E)=>{if(m.length>1){let N=new x.WorkspaceChange,K=N.getTextEditChange({uri:n,version:S});m.map(ne=>$t.createTextEdit(r,ne)).forEach(ne=>K.add(ne)),tt.set(re.applySameFixes,N),e.get(E).fixAll=i(`Fix all ${E} problems`,g,re.applySameFixes,Ye.create(r))}}),e.fixAll.push(i("Fix all auto-fixable problems",g,re.applyAllFixes,Ye.create(r)))}return e.all()})},t=>{let e=Me.get(t.textDocument.uri);return e!==void 0?e.version:void 0});var Dt;(function(t){t.onSave="onsave",t.format="format",t.command="command"})(Dt||(Dt={}));async function Fo(t,e){let n=t.uri,r=Me.get(n);if(!(r===void 0||t.version!==r.version)){let i=await Bt(r);if(i.validate!==ae.on||!Pt.hasLibrary(i)||e===Dt.format&&!i.format)return[];let o=Et(r),s=zt.get(n),a=r.getText(),c=Date.now();if(e===Dt.onSave&&i.codeActionOnSave.mode===Eo.problems){let l=s!==void 0&&s.size>0?new pt(s).getApplicable().map(f=>$t.createTextEdit(r,f)):[];return W.tracer.log(`Computing all fixes took: ${Date.now()-c} ms.`),l}else{let l=o!==void 0&&e===Dt.onSave?await hh(o,i):void 0,f=l==null?void 0:l.offRules,p=l==null?void 0:l.onRules,y;if(f!==void 0){y={rules:Object.create(null)};for(let v of f)y.rules[v]="off"}return Bn(async v=>{let _=[],S;if(s!==void 0&&s.size>0)if(f!==void 0){let h=new Map;for(let[m,E]of s)(p==null?void 0:p.has(E.ruleId))&&h.set(m,E);S=h.size>0?new pt(h).getApplicable().map(m=>$t.createTextEdit(r,m)):void 0}else S=new pt(s).getApplicable().map(h=>$t.createTextEdit(r,h));let k=S!==void 0?jn.applyEdits(r,S):a,g=await v.lintText(k,{filePath:o});if(W.tracer.log(`Computing all fixes took: ${Date.now()-c} ms.`),Array.isArray(g)&&g.length===1&&g[0].output!==void 0){let h=g[0].output;c=Date.now();let m=vu(a,h,!1);W.tracer.log(`Computing minimal edits took: ${Date.now()-c} ms.`);for(let E of m)_.push({range:{start:r.positionAt(E.originalStart),end:r.positionAt(E.originalStart+E.originalLength)},newText:h.substr(E.modifiedStart,E.modifiedLength)})}else S!==void 0&&_.push(...S);return _},i,y!==void 0?{fix:!0,overrideConfig:y}:{fix:!0})}}}He.registerRequest(x.ExecuteCommandRequest.type,async t=>{let e,n=t.arguments[0];if(t.command===re.applyAllFixes){let r=await Fo(n,Dt.command);if(r!==void 0){e=new x.WorkspaceChange;let i=e.getTextEditChange(n);r.forEach(o=>i.add(o))}}else if([re.applySingleFix,re.applyDisableLine,re.applyDisableFile].indexOf(t.command)!==-1)e=tt.get(`${t.command}:${n.ruleId}`);else if([re.applySuggestion].indexOf(t.command)!==-1)e=tt.get(`${t.command}:${n.ruleId}:${n.sequence}`);else if(t.command===re.openRuleDoc&&Ye.hasRuleId(n)){let r=St.getUrl(n.ruleId);r&&void W.sendRequest(wo.type,{url:r})}else e=tt.get(t.command);return e===void 0?{}:W.workspace.applyEdit(e.edit).then(r=>(r.applied||W.console.error(`Failed to apply command: ${t.command}`),{}),()=>{W.console.error(`Failed to apply command: ${t.command}`)})},t=>{let e=t.arguments[0];if(tt.isUsable(e.uri,e.version))return e.version});He.registerRequest(x.DocumentFormattingRequest.type,t=>{let e=Me.get(t.textDocument.uri);return e===void 0?[]:Fo({uri:e.uri,version:e.version},Dt.format)},t=>{let e=Me.get(t.textDocument.uri);return e!==void 0?e.version:void 0});W.listen()});"use strict";var uh=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},mu=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(t.isIncremental(o)){var s=pu(o.range),a=this.offsetAt(s.start),c=this.offsetAt(s.end);this._content=this._content.substring(0,a)+o.text+this._content.substring(c,this._content.length);var l=Math.max(s.start.line,0),f=Math.max(s.end.line,0),p=this._lineOffsets,y=gu(o.text,!1,a);if(f-l===y.length)for(var v=0,_=y.length;v<_;v++)p[v+l+1]=y[v];else y.length<1e4?p.splice.apply(p,uh([l+1,f-l],y,!1)):this._lineOffsets=p=p.slice(0,l+1).concat(y,p.slice(f+1));var S=o.text.length-(c-a);if(S!==0)for(var v=l+1+y.length,_=p.length;v<_;v++)p[v]=p[v]+S}else if(t.isFull(o))this._content=o.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=n},t.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=gu(this._content,!0)),this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){var o=Math.floor((r+i)/2);n[o]>e?i=o:r=o+1}var s=r-1;return{line:s,character:e-n[s]}},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t.isIncremental=function(e){var n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")},t.isFull=function(e){var n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0},t}(),jn;(function(t){function e(i,o,s,a){return new mu(i,o,s,a)}t.create=e;function n(i,o,s){if(i instanceof mu)return i.update(o,s),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=n;function r(i,o){for(var s=i.getText(),a=mo(o.map(ch),function(_,S){var k=_.range.start.line-S.range.start.line;return k===0?_.range.start.character-S.range.start.character:k}),c=0,l=[],f=0,p=a;f<p.length;f++){var y=p[f],v=i.offsetAt(y.range.start);if(v<c)throw new Error("Overlapping edit");v>c&&l.push(s.substring(c,v)),y.newText.length&&l.push(y.newText),c=i.offsetAt(y.range.end)}return l.push(s.substr(c)),l.join("")}t.applyEdits=r})(jn||(jn={}));function mo(t,e){if(t.length<=1)return t;var n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);mo(r,e),mo(i,e);for(var o=0,s=0,a=0;o<r.length&&s<i.length;){var c=e(r[o],i[s]);c<=0?t[a++]=r[o++]:t[a++]=i[s++]}for(;o<r.length;)t[a++]=r[o++];for(;s<i.length;)t[a++]=i[s++];return t}function gu(t,e,n){n===void 0&&(n=0);for(var r=e?[n]:[],i=0;i<t.length;i++){var o=t.charCodeAt(i);(o===13||o===10)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function pu(t){var e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}function ch(t){var e=pu(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var yu;yu=(()=>{"use strict";var t={470:r=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var l,f="",p=0,y=-1,v=0,_=0;_<=a.length;++_){if(_<a.length)l=a.charCodeAt(_);else{if(l===47)break;l=47}if(l===47){if(!(y===_-1||v===1))if(y!==_-1&&v===2){if(f.length<2||p!==2||f.charCodeAt(f.length-1)!==46||f.charCodeAt(f.length-2)!==46){if(f.length>2){var S=f.lastIndexOf("/");if(S!==f.length-1){S===-1?(f="",p=0):p=(f=f.slice(0,S)).length-1-f.lastIndexOf("/"),y=_,v=0;continue}}else if(f.length===2||f.length===1){f="",p=0,y=_,v=0;continue}}c&&(f.length>0?f+="/..":f="..",p=2)}else f.length>0?f+="/"+a.slice(y+1,_):f=a.slice(y+1,_),p=_-y-1;y=_,v=0}else l===46&&v!==-1?++v:v=-1}return f}var s={resolve:function(){for(var a,c="",l=!1,f=arguments.length-1;f>=-1&&!l;f--){var p;f>=0?p=arguments[f]:(a===void 0&&(a=process.cwd()),p=a),i(p),p.length!==0&&(c=p+"/"+c,l=p.charCodeAt(0)===47)}return c=o(c,!l),l?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,l=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&l&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var l=arguments[c];i(l),l.length>0&&(a===void 0?a=l:a+="/"+l)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c)return"";if((a=s.resolve(a))===(c=s.resolve(c)))return"";for(var l=1;l<a.length&&a.charCodeAt(l)===47;++l);for(var f=a.length,p=f-l,y=1;y<c.length&&c.charCodeAt(y)===47;++y);for(var v=c.length-y,_=p<v?p:v,S=-1,k=0;k<=_;++k){if(k===_){if(v>_){if(c.charCodeAt(y+k)===47)return c.slice(y+k+1);if(k===0)return c.slice(y+k)}else p>_&&(a.charCodeAt(l+k)===47?S=k:k===0&&(S=0));break}var g=a.charCodeAt(l+k);if(g!==c.charCodeAt(y+k))break;g===47&&(S=k)}var h="";for(k=l+S+1;k<=f;++k)k!==f&&a.charCodeAt(k)!==47||(h.length===0?h+="..":h+="/..");return h.length>0?h+c.slice(y+S):(y+=S,c.charCodeAt(y)===47&&++y,c.slice(y))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),l=c===47,f=-1,p=!0,y=a.length-1;y>=1;--y)if((c=a.charCodeAt(y))===47){if(!p){f=y;break}}else p=!1;return f===-1?l?"/":".":l&&f===1?"//":a.slice(0,f)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var l,f=0,p=-1,y=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var v=c.length-1,_=-1;for(l=a.length-1;l>=0;--l){var S=a.charCodeAt(l);if(S===47){if(!y){f=l+1;break}}else _===-1&&(y=!1,_=l+1),v>=0&&(S===c.charCodeAt(v)?--v==-1&&(p=l):(v=-1,p=_))}return f===p?p=_:p===-1&&(p=a.length),a.slice(f,p)}for(l=a.length-1;l>=0;--l)if(a.charCodeAt(l)===47){if(!y){f=l+1;break}}else p===-1&&(y=!1,p=l+1);return p===-1?"":a.slice(f,p)},extname:function(a){i(a);for(var c=-1,l=0,f=-1,p=!0,y=0,v=a.length-1;v>=0;--v){var _=a.charCodeAt(v);if(_!==47)f===-1&&(p=!1,f=v+1),_===46?c===-1?c=v:y!==1&&(y=1):c!==-1&&(y=-1);else if(!p){l=v+1;break}}return c===-1||f===-1||y===0||y===1&&c===f-1&&c===l+1?"":a.slice(c,f)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,l){var f=l.dir||l.root,p=l.base||(l.name||"")+(l.ext||"");return f?f===l.root?f+p:f+"/"+p:p}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var l,f=a.charCodeAt(0),p=f===47;p?(c.root="/",l=1):l=0;for(var y=-1,v=0,_=-1,S=!0,k=a.length-1,g=0;k>=l;--k)if((f=a.charCodeAt(k))!==47)_===-1&&(S=!1,_=k+1),f===46?y===-1?y=k:g!==1&&(g=1):y!==-1&&(g=-1);else if(!S){v=k+1;break}return y===-1||_===-1||g===0||g===1&&y===_-1&&y===v+1?_!==-1&&(c.base=c.name=v===0&&p?a.slice(1,_):a.slice(v,_)):(v===0&&p?(c.name=a.slice(1,y),c.base=a.slice(1,_)):(c.name=a.slice(v,y),c.base=a.slice(v,_)),c.ext=a.slice(y,_)),v>0?c.dir=a.slice(0,v-1):p&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,r.exports=s},447:(r,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>g,Utils:()=>I}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,l,f=(c=function(T,R){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,M){P.__proto__=M}||function(P,M){for(var J in M)Object.prototype.hasOwnProperty.call(M,J)&&(P[J]=M[J])})(T,R)},function(T,R){function P(){this.constructor=T}c(T,R),T.prototype=R===null?Object.create(R):(P.prototype=R.prototype,new P)}),p=/^\w[\w\d+.-]*$/,y=/^\//,v=/^\/\//,_="",S="/",k=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,g=function(){function T(R,P,M,J,U,G){G===void 0&&(G=!1),typeof R=="object"?(this.scheme=R.scheme||_,this.authority=R.authority||_,this.path=R.path||_,this.query=R.query||_,this.fragment=R.fragment||_):(this.scheme=function(oe,Pe){return oe||Pe?oe:"file"}(R,G),this.authority=P||_,this.path=function(oe,Pe){switch(oe){case"https":case"http":case"file":Pe?Pe[0]!==S&&(Pe=S+Pe):Pe=S}return Pe}(this.scheme,M||_),this.query=J||_,this.fragment=U||_,function(oe,Pe){if(!oe.scheme&&Pe)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+oe.authority+'", path: "'+oe.path+'", query: "'+oe.query+'", fragment: "'+oe.fragment+'"}');if(oe.scheme&&!p.test(oe.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(oe.path){if(oe.authority){if(!y.test(oe.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(v.test(oe.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,G))}return T.isUri=function(R){return R instanceof T||!!R&&typeof R.authority=="string"&&typeof R.fragment=="string"&&typeof R.path=="string"&&typeof R.query=="string"&&typeof R.scheme=="string"&&typeof R.fsPath=="function"&&typeof R.with=="function"&&typeof R.toString=="function"},Object.defineProperty(T.prototype,"fsPath",{get:function(){return ne(this,!1)},enumerable:!1,configurable:!0}),T.prototype.with=function(R){if(!R)return this;var P=R.scheme,M=R.authority,J=R.path,U=R.query,G=R.fragment;return P===void 0?P=this.scheme:P===null&&(P=_),M===void 0?M=this.authority:M===null&&(M=_),J===void 0?J=this.path:J===null&&(J=_),U===void 0?U=this.query:U===null&&(U=_),G===void 0?G=this.fragment:G===null&&(G=_),P===this.scheme&&M===this.authority&&J===this.path&&U===this.query&&G===this.fragment?this:new m(P,M,J,U,G)},T.parse=function(R,P){P===void 0&&(P=!1);var M=k.exec(R);return M?new m(M[2]||_,V(M[4]||_),V(M[5]||_),V(M[7]||_),V(M[9]||_),P):new m(_,_,_,_,_)},T.file=function(R){var P=_;if(s&&(R=R.replace(/\\/g,S)),R[0]===S&&R[1]===S){var M=R.indexOf(S,2);M===-1?(P=R.substring(2),R=S):(P=R.substring(2,M),R=R.substring(M)||S)}return new m("file",P,R,_,_)},T.from=function(R){return new m(R.scheme,R.authority,R.path,R.query,R.fragment)},T.prototype.toString=function(R){return R===void 0&&(R=!1),B(this,R)},T.prototype.toJSON=function(){return this},T.revive=function(R){if(R){if(R instanceof T)return R;var P=new m(R);return P._formatted=R.external,P._fsPath=R._sep===h?R.fsPath:null,P}return R},T}(),h=s?1:void 0,m=function(T){function R(){var P=T!==null&&T.apply(this,arguments)||this;return P._formatted=null,P._fsPath=null,P}return f(R,T),Object.defineProperty(R.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=ne(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),R.prototype.toString=function(P){return P===void 0&&(P=!1),P?B(this,!0):(this._formatted||(this._formatted=B(this,!1)),this._formatted)},R.prototype.toJSON=function(){var P={$mid:1};return this._fsPath&&(P.fsPath=this._fsPath,P._sep=h),this._formatted&&(P.external=this._formatted),this.path&&(P.path=this.path),this.scheme&&(P.scheme=this.scheme),this.authority&&(P.authority=this.authority),this.query&&(P.query=this.query),this.fragment&&(P.fragment=this.fragment),P},R}(g),E=((l={})[58]="%3A",l[47]="%2F",l[63]="%3F",l[35]="%23",l[91]="%5B",l[93]="%5D",l[64]="%40",l[33]="%21",l[36]="%24",l[38]="%26",l[39]="%27",l[40]="%28",l[41]="%29",l[42]="%2A",l[43]="%2B",l[44]="%2C",l[59]="%3B",l[61]="%3D",l[32]="%20",l);function N(T,R){for(var P=void 0,M=-1,J=0;J<T.length;J++){var U=T.charCodeAt(J);if(U>=97&&U<=122||U>=65&&U<=90||U>=48&&U<=57||U===45||U===46||U===95||U===126||R&&U===47)M!==-1&&(P+=encodeURIComponent(T.substring(M,J)),M=-1),P!==void 0&&(P+=T.charAt(J));else{P===void 0&&(P=T.substr(0,J));var G=E[U];G!==void 0?(M!==-1&&(P+=encodeURIComponent(T.substring(M,J)),M=-1),P+=G):M===-1&&(M=J)}}return M!==-1&&(P+=encodeURIComponent(T.substring(M))),P!==void 0?P:T}function K(T){for(var R=void 0,P=0;P<T.length;P++){var M=T.charCodeAt(P);M===35||M===63?(R===void 0&&(R=T.substr(0,P)),R+=E[M]):R!==void 0&&(R+=T[P])}return R!==void 0?R:T}function ne(T,R){var P;return P=T.authority&&T.path.length>1&&T.scheme==="file"?"//"+T.authority+T.path:T.path.charCodeAt(0)===47&&(T.path.charCodeAt(1)>=65&&T.path.charCodeAt(1)<=90||T.path.charCodeAt(1)>=97&&T.path.charCodeAt(1)<=122)&&T.path.charCodeAt(2)===58?R?T.path.substr(1):T.path[1].toLowerCase()+T.path.substr(2):T.path,s&&(P=P.replace(/\//g,"\\")),P}function B(T,R){var P=R?K:N,M="",J=T.scheme,U=T.authority,G=T.path,oe=T.query,Pe=T.fragment;if(J&&(M+=J,M+=":"),(U||J==="file")&&(M+=S,M+=S),U){var ze=U.indexOf("@");if(ze!==-1){var Ut=U.substr(0,ze);U=U.substr(ze+1),(ze=Ut.indexOf(":"))===-1?M+=P(Ut,!1):(M+=P(Ut.substr(0,ze),!1),M+=":",M+=P(Ut.substr(ze+1),!1)),M+="@"}(ze=(U=U.toLowerCase()).indexOf(":"))===-1?M+=P(U,!1):(M+=P(U.substr(0,ze),!1),M+=U.substr(ze))}if(G){if(G.length>=3&&G.charCodeAt(0)===47&&G.charCodeAt(2)===58)(mt=G.charCodeAt(1))>=65&&mt<=90&&(G="/"+String.fromCharCode(mt+32)+":"+G.substr(3));else if(G.length>=2&&G.charCodeAt(1)===58){var mt;(mt=G.charCodeAt(0))>=65&&mt<=90&&(G=String.fromCharCode(mt+32)+":"+G.substr(2))}M+=P(G,!0)}return oe&&(M+="?",M+=P(oe,!1)),Pe&&(M+="#",M+=R?Pe:N(Pe,!1)),M}function de(T){try{return decodeURIComponent(T)}catch(R){return T.length>3?T.substr(0,3)+de(T.substr(3)):T}}var ye=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function V(T){return T.match(ye)?T.replace(ye,function(R){return de(R)}):T}var I,$e=o(470),Kn=function(){for(var T=0,R=0,P=arguments.length;R<P;R++)T+=arguments[R].length;var M=Array(T),J=0;for(R=0;R<P;R++)for(var U=arguments[R],G=0,oe=U.length;G<oe;G++,J++)M[J]=U[G];return M},nt=$e.posix||$e;!function(T){T.joinPath=function(R){for(var P=[],M=1;M<arguments.length;M++)P[M-1]=arguments[M];return R.with({path:nt.join.apply(nt,Kn([R.path],P))})},T.resolvePath=function(R){for(var P=[],M=1;M<arguments.length;M++)P[M-1]=arguments[M];var J=R.path||"/";return R.with({path:nt.resolve.apply(nt,Kn([J],P))})},T.dirname=function(R){var P=nt.dirname(R.path);return P.length===1&&P.charCodeAt(0)===46?R:R.with({path:P})},T.basename=function(R){return nt.basename(R.path)},T.extname=function(R){return nt.extname(R.path)}}(I||(I={}))}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}return n.d=(r,i)=>{for(var o in i)n.o(i,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:i[o]})},n.o=(r,i)=>Object.prototype.hasOwnProperty.call(r,i),n.r=r=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n(447)})();var{URI:jt,Utils:Gg}=yu;function vu(t,e,n){return new Wn(new yo(t),new yo(e)).ComputeDiff(n).changes}var yo=class{constructor(e){this.source=e}getElements(){let e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}},dt=class{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},Wt=class{static Assert(e,n){if(!e)throw new Error(n)}},xt;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(xt||(xt={}));var ft;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(ft||(ft={}));var Ht=class{static Copy(e,n,r,i,o){for(let s=0;s<o;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,o){for(let s=0;s<o;s++)r[i+s]=e[n+s]}},vo=class{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new dt(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},Wn=class{constructor(e,n,r=null){this.ContinueProcessingPredicate=r;let[i,o,s]=Wn._getElements(e),[a,c,l]=Wn._getElements(n);this._hasStrings=s&&l,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=c,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let n=e.getElements();return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,o){let s=[!1],a=this.ComputeDiffRecursive(e,n,r,i,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,n,r,i,o){for(o[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let p;return r<=i?(Wt.Assert(e===n+1,"originalStart should only be one more than originalEnd"),p=[new dt(e,0,r,i-r+1)]):e<=n?(Wt.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[new dt(e,n-e+1,r,0)]):(Wt.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Wt.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],a=[0],c=this.ComputeRecursionPoint(e,n,r,i,s,a,o),l=s[0],f=a[0];if(c!==null)return c;if(!o[0]){let p=this.ComputeDiffRecursive(e,l,r,f,o),y=[];return o[0]?y=[new dt(l+1,n-(l+1)+1,f+1,i-(f+1)+1)]:y=this.ComputeDiffRecursive(l+1,n,f+1,i,o),this.ConcatenateChanges(p,y)}return[new dt(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,o,s,a,c,l,f,p,y,v,_,S,k,g,h){let m=null,E=null,N=new vo,K=n,ne=r,B=v[0]-k[0]-i,de=-1073741824,ye=this.m_forwardHistory.length-1;do{let V=B+e;V===K||V<ne&&l[V-1]<l[V+1]?(p=l[V+1],_=p-B-i,p<de&&N.MarkNextChange(),de=p,N.AddModifiedElement(p+1,_),B=V+1-e):(p=l[V-1]+1,_=p-B-i,p<de&&N.MarkNextChange(),de=p-1,N.AddOriginalElement(p,_+1),B=V-1-e),ye>=0&&(l=this.m_forwardHistory[ye],e=l[0],K=1,ne=l.length-1)}while(--ye>=-1);if(m=N.getReverseChanges(),h[0]){let V=v[0]+1,I=k[0]+1;if(m!==null&&m.length>0){let $e=m[m.length-1];V=Math.max(V,$e.getOriginalEnd()),I=Math.max(I,$e.getModifiedEnd())}E=[new dt(V,y-V+1,I,S-I+1)]}else{N=new vo,K=s,ne=a,B=v[0]-k[0]-c,de=1073741824,ye=g?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let V=B+o;V===K||V<ne&&f[V-1]>=f[V+1]?(p=f[V+1]-1,_=p-B-c,p>de&&N.MarkNextChange(),de=p+1,N.AddOriginalElement(p+1,_+1),B=V+1-o):(p=f[V-1],_=p-B-c,p>de&&N.MarkNextChange(),de=p,N.AddModifiedElement(p+1,_+1),B=V-1-o),ye>=0&&(f=this.m_reverseHistory[ye],o=f[0],K=1,ne=f.length-1)}while(--ye>=-1);E=N.getChanges()}return this.ConcatenateChanges(m,E)}ComputeRecursionPoint(e,n,r,i,o,s,a){let c=0,l=0,f=0,p=0,y=0,v=0;e--,r--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let _=n-e+(i-r),S=_+1,k=new Int32Array(S),g=new Int32Array(S),h=i-r,m=n-e,E=e-r,N=n-i,ne=(m-h)%2===0;k[h]=e,g[m]=n,a[0]=!1;for(let B=1;B<=_/2+1;B++){let de=0,ye=0;f=this.ClipDiagonalBound(h-B,B,h,S),p=this.ClipDiagonalBound(h+B,B,h,S);for(let I=f;I<=p;I+=2){I===f||I<p&&k[I-1]<k[I+1]?c=k[I+1]:c=k[I-1]+1,l=c-(I-h)-E;let $e=c;for(;c<n&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(k[I]=c,c+l>de+ye&&(de=c,ye=l),!ne&&Math.abs(I-m)<=B-1&&c>=g[I])return o[0]=c,s[0]=l,$e<=g[I]&&1447>0&&B<=1447+1?this.WALKTRACE(h,f,p,E,m,y,v,N,k,g,c,n,o,l,i,s,ne,a):null}let V=(de-e+(ye-r)-B)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(de,V))return a[0]=!0,o[0]=de,s[0]=ye,V>0&&1447>0&&B<=1447+1?this.WALKTRACE(h,f,p,E,m,y,v,N,k,g,c,n,o,l,i,s,ne,a):(e++,r++,[new dt(e,n-e+1,r,i-r+1)]);y=this.ClipDiagonalBound(m-B,B,m,S),v=this.ClipDiagonalBound(m+B,B,m,S);for(let I=y;I<=v;I+=2){I===y||I<v&&g[I-1]>=g[I+1]?c=g[I+1]-1:c=g[I-1],l=c-(I-m)-N;let $e=c;for(;c>e&&l>r&&this.ElementsAreEqual(c,l);)c--,l--;if(g[I]=c,ne&&Math.abs(I-h)<=B&&c<=k[I])return o[0]=c,s[0]=l,$e>=k[I]&&1447>0&&B<=1447+1?this.WALKTRACE(h,f,p,E,m,y,v,N,k,g,c,n,o,l,i,s,ne,a):null}if(B<=1447){let I=new Int32Array(p-f+2);I[0]=h-f+1,Ht.Copy2(k,f,I,1,p-f+1),this.m_forwardHistory.push(I),I=new Int32Array(v-y+2),I[0]=m-y+1,Ht.Copy2(g,y,I,1,v-y+1),this.m_reverseHistory.push(I)}}return this.WALKTRACE(h,f,p,E,m,y,v,N,k,g,c,n,o,l,i,s,ne,a)}PrettifyChanges(e){for(let n=0;n<e.length;n++){let r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,o=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,a=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!a||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));)r.originalStart++,r.modifiedStart++;let c=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],c)){e[n]=c[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){let r=e[n],i=0,o=0;if(n>0){let f=e[n-1];f.originalLength>0&&(i=f.originalStart+f.originalLength),f.modifiedLength>0&&(o=f.modifiedStart+f.modifiedLength)}let s=r.originalLength>0,a=r.modifiedLength>0,c=0,l=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let f=1;;f++){let p=r.originalStart-f,y=r.modifiedStart-f;if(p<i||y<o)break;if(s&&!this.OriginalElementsAreEqual(p,p+r.originalLength))break;if(a&&!this.ModifiedElementsAreEqual(y,y+r.modifiedLength))break;let v=this._boundaryScore(p,r.originalLength,y,r.modifiedLength);v>l&&(l=v,c=f)}r.originalStart-=c,r.modifiedStart-=c}return e}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){let r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){let r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){let o=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return o+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){let i=new Array(e.length+n.length-1);return Ht.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Ht.Copy(n,1,i,e.length,n.length-1),i}else{let i=new Array(e.length+n.length);return Ht.Copy(e,0,i,0,e.length),Ht.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(Wt.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Wt.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(a=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new dt(i,o,s,a),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;let o=r,s=i-r-1,a=n%2===0;if(e<0){let c=o%2===0;return a===c?0:1}else{let c=s%2===0;return a===c?i-1:i-2}}},Ee;(function(o){o.None=0,o.First=1,o.AsOld=o.First,o.Last=2,o.AsNew=o.Last})(Ee||(Ee={}));var Xg,bu=class{constructor(){this[Xg]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Ee.None){let r=this._map.get(e);if(!!r)return n!==Ee.None&&this.touch(r,n),r.value}set(e,n,r=Ee.None){let i=this._map.get(e);if(i)i.value=n,r!==Ee.None&&this.touch(i,r);else{i={key:e,value:n,next:void 0,previous:void 0};switch(r){case Ee.None:this.addItemLast(i);break;case Ee.First:this.addItemFirst(i);break;case Ee.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!(!this._head&&!this._tail)){if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[(Xg=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(!(e>=this.size)){if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ee.First&&n!==Ee.Last)){if(n===Ee.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ee.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}},Er=class extends bu{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ee.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ee.None)}set(e,n){return super.set(e,n,Ee.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Fu();
